var position,bootstrap=function(t,_,y){"use strict";function r(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}_=_&&_.hasOwnProperty("default")?_.default:_,y=y&&y.hasOwnProperty("default")?y.default:y;var e,l,c,h,u,i,s,f,d,o,a,g,p,B,m,n,v,w,A,C,b,E,Q,F,U,T,S,x,O,H,I,D,k,L,N,M,P,R,K,j,z,X,V,G,Y,W,J,q,Z,$,tt,et,it,rt,nt,At,st,ot,at,lt,ct,ht,ut,ft,dt,gt,pt,Bt,mt,vt,wt,Ct,bt,_t,yt,Et,Qt,Ft,Ut,Tt,St,xt,Ot,Ht,It,Dt,kt,Lt,Nt,Mt,Pt,Rt,Kt,jt,zt,Xt,Vt,Gt,Yt,Wt,Jt,qt,Zt,$t,te,ee,ie,re,ne,Ae,se,oe,ae,le,ce,he,ue,fe,de,ge,pe,Be,me,ve,we,Ce,be,_e=(we=!1,Ce={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},be={TRANSITION_END:"bsTransitionEnd",getUID:function(t){for(;t+=~~(1e6*Math.random()),document.getElementById(t););return t},getSelectorFromElement:function(t){var e=t.getAttribute("data-target");e&&"#"!==e||(e=t.getAttribute("href")||"");try{return 0<_(document).find(e).length?e:null}catch(t){return null}},reflow:function(t){return t.offsetHeight},triggerTransitionEnd:function(t){_(t).trigger(we.end)},supportsTransitionEnd:function(){return Boolean(we)},isElement:function(t){return(t[0]||t).nodeType},typeCheckConfig:function(t,e,i){for(var r in i)if(Object.prototype.hasOwnProperty.call(i,r)){var n=i[r],A=e[r],s=A&&be.isElement(A)?"element":(o=A,{}.toString.call(o).match(/\s([a-zA-Z]+)/)[1].toLowerCase());if(!new RegExp(n).test(s))throw new Error(t.toUpperCase()+': Option "'+r+'" provided type "'+s+'" but expected type "'+n+'".')}var o}},we=function(){if(window.QUnit)return!1;var t=document.createElement("bootstrap");for(var e in Ce)if(void 0!==t.style[e])return{end:Ce[e]};return!1}(),_.fn.emulateTransitionEnd=function(t){var e=this,i=!1;return _(this).one(be.TRANSITION_END,function(){i=!0}),setTimeout(function(){i||be.triggerTransitionEnd(e)},t),this},be.supportsTransitionEnd()&&(_.event.special[be.TRANSITION_END]={bindType:we.end,delegateType:we.end,handle:function(t){if(_(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}}),be),ye=function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t},Ee=(he="alert",ue=_.fn[he],fe="close.bs.alert",de="closed.bs.alert",ge="click.bs.alert.data-api",pe="alert",Be="fade",me="show",ve=function(){function r(t){this._element=t}var t=r.prototype;return t.close=function(t){t=t||this._element;var e=this._getRootElement(t);this._triggerCloseEvent(e).isDefaultPrevented()||this._removeElement(e)},t.dispose=function(){_.removeData(this._element,"bs.alert"),this._element=null},t._getRootElement=function(t){var e=_e.getSelectorFromElement(t),i=!1;return e&&(i=_(e)[0]),i||(i=_(t).closest("."+pe)[0]),i},t._triggerCloseEvent=function(t){var e=_.Event(fe);return _(t).trigger(e),e},t._removeElement=function(e){var i=this;_(e).removeClass(me),_e.supportsTransitionEnd()&&_(e).hasClass(Be)?_(e).one(_e.TRANSITION_END,function(t){return i._destroyElement(e,t)}).emulateTransitionEnd(150):this._destroyElement(e)},t._destroyElement=function(t){_(t).detach().trigger(de).remove()},r._jQueryInterface=function(i){return this.each(function(){var t=_(this),e=t.data("bs.alert");e||(e=new r(this),t.data("bs.alert",e)),"close"===i&&e[i](this)})},r._handleDismiss=function(e){return function(t){t&&t.preventDefault(),e.close(this)}},ye(r,null,[{key:"VERSION",get:function(){return"4.0.0-beta.2"}}]),r}(),_(document).on(ge,'[data-dismiss="alert"]',ve._handleDismiss(new ve)),_.fn[he]=ve._jQueryInterface,_.fn[he].Constructor=ve,_.fn[he].noConflict=function(){return _.fn[he]=ue,ve._jQueryInterface},ve),Qe=(Zt="button",$t=_.fn[Zt],te="active",ee="btn",ie="focus",re='[data-toggle^="button"]',ne='[data-toggle="buttons"]',Ae="input",se=".active",oe=".btn",ae="click.bs.button.data-api",le="focus.bs.button.data-api blur.bs.button.data-api",ce=function(){function i(t){this._element=t}var t=i.prototype;return t.toggle=function(){var t=!0,e=!0,i=_(this._element).closest(ne)[0];if(i){var r=_(this._element).find(Ae)[0];if(r){if("radio"===r.type)if(r.checked&&_(this._element).hasClass(te))t=!1;else{var n=_(i).find(se)[0];n&&_(n).removeClass(te)}if(t){if(r.hasAttribute("disabled")||i.hasAttribute("disabled")||r.classList.contains("disabled")||i.classList.contains("disabled"))return;r.checked=!_(this._element).hasClass(te),_(r).trigger("change")}r.focus(),e=!1}}e&&this._element.setAttribute("aria-pressed",!_(this._element).hasClass(te)),t&&_(this._element).toggleClass(te)},t.dispose=function(){_.removeData(this._element,"bs.button"),this._element=null},i._jQueryInterface=function(e){return this.each(function(){var t=_(this).data("bs.button");t||(t=new i(this),_(this).data("bs.button",t)),"toggle"===e&&t[e]()})},ye(i,null,[{key:"VERSION",get:function(){return"4.0.0-beta.2"}}]),i}(),_(document).on(ae,re,function(t){t.preventDefault();var e=t.target;_(e).hasClass(ee)||(e=_(e).closest(oe)),ce._jQueryInterface.call(_(e),"toggle")}).on(le,re,function(t){var e=_(t.target).closest(oe)[0];_(e).toggleClass(ie,/^focus(in)?$/.test(t.type))}),_.fn[Zt]=ce._jQueryInterface,_.fn[Zt].Constructor=ce,_.fn[Zt].noConflict=function(){return _.fn[Zt]=$t,ce._jQueryInterface},ce),Fe=(Ot="carousel",It="."+(Ht="bs.carousel"),Dt=_.fn[Ot],kt={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0},Lt={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean"},Nt="next",Mt="prev",Pt="left",Rt="right",Kt={SLIDE:"slide"+It,SLID:"slid"+It,KEYDOWN:"keydown"+It,MOUSEENTER:"mouseenter"+It,MOUSELEAVE:"mouseleave"+It,TOUCHEND:"touchend"+It,LOAD_DATA_API:"load.bs.carousel.data-api",CLICK_DATA_API:"click.bs.carousel.data-api"},jt="carousel",zt="active",Xt="slide",Vt="carousel-item-right",Gt="carousel-item-left",Yt="carousel-item-next",Wt="carousel-item-prev",Jt={ACTIVE:".active",ACTIVE_ITEM:".active.carousel-item",ITEM:".carousel-item",NEXT_PREV:".carousel-item-next, .carousel-item-prev",INDICATORS:".carousel-indicators",DATA_SLIDE:"[data-slide], [data-slide-to]",DATA_RIDE:'[data-ride="carousel"]'},qt=function(){function A(t,e){this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this._config=this._getConfig(e),this._element=_(t)[0],this._indicatorsElement=_(this._element).find(Jt.INDICATORS)[0],this._addEventListeners()}var t=A.prototype;return t.next=function(){this._isSliding||this._slide(Nt)},t.nextWhenVisible=function(){!document.hidden&&_(this._element).is(":visible")&&"hidden"!==_(this._element).css("visibility")&&this.next()},t.prev=function(){this._isSliding||this._slide(Mt)},t.pause=function(t){t||(this._isPaused=!0),_(this._element).find(Jt.NEXT_PREV)[0]&&_e.supportsTransitionEnd()&&(_e.triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null},t.cycle=function(t){t||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))},t.to=function(t){var e=this;this._activeElement=_(this._element).find(Jt.ACTIVE_ITEM)[0];var i=this._getItemIndex(this._activeElement);if(!(t>this._items.length-1||t<0))if(this._isSliding)_(this._element).one(Kt.SLID,function(){return e.to(t)});else{if(i===t)return this.pause(),void this.cycle();var r=i<t?Nt:Mt;this._slide(r,this._items[t])}},t.dispose=function(){_(this._element).off(It),_.removeData(this._element,Ht),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null},t._getConfig=function(t){return t=_.extend({},kt,t),_e.typeCheckConfig(Ot,t,Lt),t},t._addEventListeners=function(){var e=this;this._config.keyboard&&_(this._element).on(Kt.KEYDOWN,function(t){return e._keydown(t)}),"hover"===this._config.pause&&(_(this._element).on(Kt.MOUSEENTER,function(t){return e.pause(t)}).on(Kt.MOUSELEAVE,function(t){return e.cycle(t)}),"ontouchstart"in document.documentElement&&_(this._element).on(Kt.TOUCHEND,function(){e.pause(),e.touchTimeout&&clearTimeout(e.touchTimeout),e.touchTimeout=setTimeout(function(t){return e.cycle(t)},500+e._config.interval)}))},t._keydown=function(t){if(!/input|textarea/i.test(t.target.tagName))switch(t.which){case 37:t.preventDefault(),this.prev();break;case 39:t.preventDefault(),this.next();break;default:return}},t._getItemIndex=function(t){return this._items=_.makeArray(_(t).parent().find(Jt.ITEM)),this._items.indexOf(t)},t._getItemByDirection=function(t,e){var i=t===Nt,r=t===Mt,n=this._getItemIndex(e),A=this._items.length-1;if((r&&0===n||i&&n===A)&&!this._config.wrap)return e;var s=(n+(t===Mt?-1:1))%this._items.length;return-1===s?this._items[this._items.length-1]:this._items[s]},t._triggerSlideEvent=function(t,e){var i=this._getItemIndex(t),r=this._getItemIndex(_(this._element).find(Jt.ACTIVE_ITEM)[0]),n=_.Event(Kt.SLIDE,{relatedTarget:t,direction:e,from:r,to:i});return _(this._element).trigger(n),n},t._setActiveIndicatorElement=function(t){if(this._indicatorsElement){_(this._indicatorsElement).find(Jt.ACTIVE).removeClass(zt);var e=this._indicatorsElement.children[this._getItemIndex(t)];e&&_(e).addClass(zt)}},t._slide=function(t,e){var i,r,n,A=this,s=_(this._element).find(Jt.ACTIVE_ITEM)[0],o=this._getItemIndex(s),a=e||s&&this._getItemByDirection(t,s),l=this._getItemIndex(a),c=Boolean(this._interval);if(t===Nt?(i=Gt,r=Yt,n=Pt):(i=Vt,r=Wt,n=Rt),a&&_(a).hasClass(zt))this._isSliding=!1;else if(!this._triggerSlideEvent(a,n).isDefaultPrevented()&&s&&a){this._isSliding=!0,c&&this.pause(),this._setActiveIndicatorElement(a);var h=_.Event(Kt.SLID,{relatedTarget:a,direction:n,from:o,to:l});_e.supportsTransitionEnd()&&_(this._element).hasClass(Xt)?(_(a).addClass(r),_e.reflow(a),_(s).addClass(i),_(a).addClass(i),_(s).one(_e.TRANSITION_END,function(){_(a).removeClass(i+" "+r).addClass(zt),_(s).removeClass(zt+" "+r+" "+i),A._isSliding=!1,setTimeout(function(){return _(A._element).trigger(h)},0)}).emulateTransitionEnd(600)):(_(s).removeClass(zt),_(a).addClass(zt),this._isSliding=!1,_(this._element).trigger(h)),c&&this.cycle()}},A._jQueryInterface=function(r){return this.each(function(){var t=_(this).data(Ht),e=_.extend({},kt,_(this).data());"object"==typeof r&&_.extend(e,r);var i="string"==typeof r?r:e.slide;if(t||(t=new A(this,e),_(this).data(Ht,t)),"number"==typeof r)t.to(r);else if("string"==typeof i){if(void 0===t[i])throw new Error('No method named "'+i+'"');t[i]()}else e.interval&&(t.pause(),t.cycle())})},A._dataApiClickHandler=function(t){var e=_e.getSelectorFromElement(this);if(e){var i=_(e)[0];if(i&&_(i).hasClass(jt)){var r=_.extend({},_(i).data(),_(this).data()),n=this.getAttribute("data-slide-to");n&&(r.interval=!1),A._jQueryInterface.call(_(i),r),n&&_(i).data(Ht).to(n),t.preventDefault()}}},ye(A,null,[{key:"VERSION",get:function(){return"4.0.0-beta.2"}},{key:"Default",get:function(){return kt}}]),A}(),_(document).on(Kt.CLICK_DATA_API,Jt.DATA_SLIDE,qt._dataApiClickHandler),_(window).on(Kt.LOAD_DATA_API,function(){_(Jt.DATA_RIDE).each(function(){var t=_(this);qt._jQueryInterface.call(t,t.data())})}),_.fn[Ot]=qt._jQueryInterface,_.fn[Ot].Constructor=qt,_.fn[Ot].noConflict=function(){return _.fn[Ot]=Dt,qt._jQueryInterface},qt),Ue=(dt="collapse",gt="bs.collapse",pt=_.fn[dt],Bt={toggle:!0,parent:""},mt={toggle:"boolean",parent:"(string|element)"},vt="show.bs.collapse",wt="shown.bs.collapse",Ct="hide.bs.collapse",bt="hidden.bs.collapse",_t="click.bs.collapse.data-api",yt="show",Et="collapse",Qt="collapsing",Ft="collapsed",Ut="width",Tt="height",St={ACTIVES:".show, .collapsing",DATA_TOGGLE:'[data-toggle="collapse"]'},xt=function(){function o(t,e){this._isTransitioning=!1,this._element=t,this._config=this._getConfig(e),this._triggerArray=_.makeArray(_('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'));for(var i=_(St.DATA_TOGGLE),r=0;r<i.length;r++){var n=i[r],A=_e.getSelectorFromElement(n);null!==A&&0<_(A).filter(t).length&&this._triggerArray.push(n)}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}var t=o.prototype;return t.toggle=function(){_(this._element).hasClass(yt)?this.hide():this.show()},t.show=function(){var t,e,i=this;if(!this._isTransitioning&&!_(this._element).hasClass(yt)&&(this._parent&&((t=_.makeArray(_(this._parent).children().children(St.ACTIVES))).length||(t=null)),!(t&&(e=_(t).data(gt))&&e._isTransitioning))){var r=_.Event(vt);if(_(this._element).trigger(r),!r.isDefaultPrevented()){t&&(o._jQueryInterface.call(_(t),"hide"),e||_(t).data(gt,null));var n=this._getDimension();_(this._element).removeClass(Et).addClass(Qt),this._element.style[n]=0,this._triggerArray.length&&_(this._triggerArray).removeClass(Ft).attr("aria-expanded",!0),this.setTransitioning(!0);var A=function(){_(i._element).removeClass(Qt).addClass(Et).addClass(yt),i._element.style[n]="",i.setTransitioning(!1),_(i._element).trigger(wt)};if(_e.supportsTransitionEnd()){var s="scroll"+(n[0].toUpperCase()+n.slice(1));_(this._element).one(_e.TRANSITION_END,A).emulateTransitionEnd(600),this._element.style[n]=this._element[s]+"px"}else A()}}},t.hide=function(){var t=this;if(!this._isTransitioning&&_(this._element).hasClass(yt)){var e=_.Event(Ct);if(_(this._element).trigger(e),!e.isDefaultPrevented()){var i=this._getDimension();if(this._element.style[i]=this._element.getBoundingClientRect()[i]+"px",_e.reflow(this._element),_(this._element).addClass(Qt).removeClass(Et).removeClass(yt),this._triggerArray.length)for(var r=0;r<this._triggerArray.length;r++){var n=this._triggerArray[r],A=_e.getSelectorFromElement(n);null!==A&&(_(A).hasClass(yt)||_(n).addClass(Ft).attr("aria-expanded",!1))}this.setTransitioning(!0);var s=function(){t.setTransitioning(!1),_(t._element).removeClass(Qt).addClass(Et).trigger(bt)};this._element.style[i]="",_e.supportsTransitionEnd()?_(this._element).one(_e.TRANSITION_END,s).emulateTransitionEnd(600):s()}}},t.setTransitioning=function(t){this._isTransitioning=t},t.dispose=function(){_.removeData(this._element,gt),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null},t._getConfig=function(t){return(t=_.extend({},Bt,t)).toggle=Boolean(t.toggle),_e.typeCheckConfig(dt,t,mt),t},t._getDimension=function(){return _(this._element).hasClass(Ut)?Ut:Tt},t._getParent=function(){var i=this,t=null;_e.isElement(this._config.parent)?(t=this._config.parent,void 0!==this._config.parent.jquery&&(t=this._config.parent[0])):t=_(this._config.parent)[0];var e='[data-toggle="collapse"][data-parent="'+this._config.parent+'"]';return _(t).find(e).each(function(t,e){i._addAriaAndCollapsedClass(o._getTargetFromElement(e),[e])}),t},t._addAriaAndCollapsedClass=function(t,e){if(t){var i=_(t).hasClass(yt);e.length&&_(e).toggleClass(Ft,!i).attr("aria-expanded",i)}},o._getTargetFromElement=function(t){var e=_e.getSelectorFromElement(t);return e?_(e)[0]:null},o._jQueryInterface=function(r){return this.each(function(){var t=_(this),e=t.data(gt),i=_.extend({},Bt,t.data(),"object"==typeof r&&r);if(!e&&i.toggle&&/show|hide/.test(r)&&(i.toggle=!1),e||(e=new o(this,i),t.data(gt,e)),"string"==typeof r){if(void 0===e[r])throw new Error('No method named "'+r+'"');e[r]()}})},ye(o,null,[{key:"VERSION",get:function(){return"4.0.0-beta.2"}},{key:"Default",get:function(){return Bt}}]),o}(),_(document).on(_t,St.DATA_TOGGLE,function(t){"A"===t.currentTarget.tagName&&t.preventDefault();var i=_(this),e=_e.getSelectorFromElement(this);_(e).each(function(){var t=_(this),e=t.data(gt)?"toggle":i.data();xt._jQueryInterface.call(t,e)})}),_.fn[dt]=xt._jQueryInterface,_.fn[dt].Constructor=xt,_.fn[dt].noConflict=function(){return _.fn[dt]=pt,xt._jQueryInterface},xt),Te=function(){if(void 0===y)throw new Error("Bootstrap dropdown require Popper.js (https://popper.js.org)");var e="dropdown",l="bs.dropdown",i="."+l,t=_.fn[e],s=new RegExp("38|40|27"),c={HIDE:"hide"+i,HIDDEN:"hidden"+i,SHOW:"show"+i,SHOWN:"shown"+i,CLICK:"click"+i,CLICK_DATA_API:"click.bs.dropdown.data-api",KEYDOWN_DATA_API:"keydown.bs.dropdown.data-api",KEYUP_DATA_API:"keyup.bs.dropdown.data-api"},o="disabled",h="show",A="dropup",u="dropdown-menu-right",f="dropdown-menu-left",d='[data-toggle="dropdown"]',r=".dropdown form",n=".dropdown-menu",g=".navbar-nav",p=".dropdown-menu .dropdown-item:not(.disabled)",B="top-start",m="top-end",v="bottom-start",w="bottom-end",C={offset:0,flip:!0},b={offset:"(number|string|function)",flip:"boolean"},a=function(){function a(t,e){this._element=t,this._popper=null,this._config=this._getConfig(e),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners()}var t=a.prototype;return t.toggle=function(){if(!this._element.disabled&&!_(this._element).hasClass(o)){var t=a._getParentFromElement(this._element),e=_(this._menu).hasClass(h);if(a._clearMenus(),!e){var i={relatedTarget:this._element},r=_.Event(c.SHOW,i);if(_(t).trigger(r),!r.isDefaultPrevented()){var n=this._element;_(t).hasClass(A)&&(_(this._menu).hasClass(f)||_(this._menu).hasClass(u))&&(n=t),this._popper=new y(n,this._menu,this._getPopperConfig()),"ontouchstart"in document.documentElement&&!_(t).closest(g).length&&_("body").children().on("mouseover",null,_.noop),this._element.focus(),this._element.setAttribute("aria-expanded",!0),_(this._menu).toggleClass(h),_(t).toggleClass(h).trigger(_.Event(c.SHOWN,i))}}}},t.dispose=function(){_.removeData(this._element,l),_(this._element).off(i),this._element=null,(this._menu=null)!==this._popper&&this._popper.destroy(),this._popper=null},t.update=function(){this._inNavbar=this._detectNavbar(),null!==this._popper&&this._popper.scheduleUpdate()},t._addEventListeners=function(){var e=this;_(this._element).on(c.CLICK,function(t){t.preventDefault(),t.stopPropagation(),e.toggle()})},t._getConfig=function(t){return t=_.extend({},this.constructor.Default,_(this._element).data(),t),_e.typeCheckConfig(e,t,this.constructor.DefaultType),t},t._getMenuElement=function(){if(!this._menu){var t=a._getParentFromElement(this._element);this._menu=_(t).find(n)[0]}return this._menu},t._getPlacement=function(){var t=_(this._element).parent(),e=v;return t.hasClass(A)?(e=B,_(this._menu).hasClass(u)&&(e=m)):_(this._menu).hasClass(u)&&(e=w),e},t._detectNavbar=function(){return 0<_(this._element).closest(".navbar").length},t._getPopperConfig=function(){var e=this,t={};"function"==typeof this._config.offset?t.fn=function(t){return t.offsets=_.extend({},t.offsets,e._config.offset(t.offsets)||{}),t}:t.offset=this._config.offset;var i={placement:this._getPlacement(),modifiers:{offset:t,flip:{enabled:this._config.flip}}};return this._inNavbar&&(i.modifiers.applyStyle={enabled:!this._inNavbar}),i},a._jQueryInterface=function(e){return this.each(function(){var t=_(this).data(l);if(t||(t=new a(this,"object"==typeof e?e:null),_(this).data(l,t)),"string"==typeof e){if(void 0===t[e])throw new Error('No method named "'+e+'"');t[e]()}})},a._clearMenus=function(t){if(!t||3!==t.which&&("keyup"!==t.type||9===t.which))for(var e=_.makeArray(_(d)),i=0;i<e.length;i++){var r=a._getParentFromElement(e[i]),n=_(e[i]).data(l),A={relatedTarget:e[i]};if(n){var s=n._menu;if(_(r).hasClass(h)&&!(t&&("click"===t.type&&/input|textarea/i.test(t.target.tagName)||"keyup"===t.type&&9===t.which)&&_.contains(r,t.target))){var o=_.Event(c.HIDE,A);_(r).trigger(o),o.isDefaultPrevented()||("ontouchstart"in document.documentElement&&_("body").children().off("mouseover",null,_.noop),e[i].setAttribute("aria-expanded","false"),_(s).removeClass(h),_(r).removeClass(h).trigger(_.Event(c.HIDDEN,A)))}}}},a._getParentFromElement=function(t){var e,i=_e.getSelectorFromElement(t);return i&&(e=_(i)[0]),e||t.parentNode},a._dataApiKeydownHandler=function(t){if(!(!s.test(t.which)||/button/i.test(t.target.tagName)&&32===t.which||/input|textarea/i.test(t.target.tagName)||(t.preventDefault(),t.stopPropagation(),this.disabled||_(this).hasClass(o)))){var e=a._getParentFromElement(this),i=_(e).hasClass(h);if((i||27===t.which&&32===t.which)&&(!i||27!==t.which&&32!==t.which)){var r=_(e).find(p).get();if(r.length){var n=r.indexOf(t.target);38===t.which&&0<n&&n--,40===t.which&&n<r.length-1&&n++,n<0&&(n=0),r[n].focus()}}else{if(27===t.which){var A=_(e).find(d)[0];_(A).trigger("focus")}_(this).trigger("click")}}},ye(a,null,[{key:"VERSION",get:function(){return"4.0.0-beta.2"}},{key:"Default",get:function(){return C}},{key:"DefaultType",get:function(){return b}}]),a}();return _(document).on(c.KEYDOWN_DATA_API,d,a._dataApiKeydownHandler).on(c.KEYDOWN_DATA_API,n,a._dataApiKeydownHandler).on(c.CLICK_DATA_API+" "+c.KEYUP_DATA_API,a._clearMenus).on(c.CLICK_DATA_API,d,function(t){t.preventDefault(),t.stopPropagation(),a._jQueryInterface.call(_(this),"toggle")}).on(c.CLICK_DATA_API,r,function(t){t.stopPropagation()}),_.fn[e]=a._jQueryInterface,_.fn[e].Constructor=a,_.fn[e].noConflict=function(){return _.fn[e]=t,a._jQueryInterface},a}(),Se=(V="modal",G=_.fn[V],Y={backdrop:!0,keyboard:!0,focus:!0,show:!0},W={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},J="hide.bs.modal",q="hidden.bs.modal",Z="show.bs.modal",$="shown.bs.modal",tt="focusin.bs.modal",et="resize.bs.modal",it="click.dismiss.bs.modal",rt="keydown.dismiss.bs.modal",nt="mouseup.dismiss.bs.modal",At="mousedown.dismiss.bs.modal",st="click.bs.modal.data-api",ot="modal-scrollbar-measure",at="modal-backdrop",lt="modal-open",ct="fade",ht="show",ut={DIALOG:".modal-dialog",DATA_TOGGLE:'[data-toggle="modal"]',DATA_DISMISS:'[data-dismiss="modal"]',FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"},ft=function(){function n(t,e){this._config=this._getConfig(e),this._element=t,this._dialog=_(t).find(ut.DIALOG)[0],this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._originalBodyPadding=0,this._scrollbarWidth=0}var t=n.prototype;return t.toggle=function(t){return this._isShown?this.hide():this.show(t)},t.show=function(t){var e=this;if(!this._isTransitioning&&!this._isShown){_e.supportsTransitionEnd()&&_(this._element).hasClass(ct)&&(this._isTransitioning=!0);var i=_.Event(Z,{relatedTarget:t});_(this._element).trigger(i),this._isShown||i.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),_(document.body).addClass(lt),this._setEscapeEvent(),this._setResizeEvent(),_(this._element).on(it,ut.DATA_DISMISS,function(t){return e.hide(t)}),_(this._dialog).on(At,function(){_(e._element).one(nt,function(t){_(t.target).is(e._element)&&(e._ignoreBackdropClick=!0)})}),this._showBackdrop(function(){return e._showElement(t)}))}},t.hide=function(t){var e=this;if(t&&t.preventDefault(),!this._isTransitioning&&this._isShown){var i=_.Event(J);if(_(this._element).trigger(i),this._isShown&&!i.isDefaultPrevented()){this._isShown=!1;var r=_e.supportsTransitionEnd()&&_(this._element).hasClass(ct);r&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),_(document).off(tt),_(this._element).removeClass(ht),_(this._element).off(it),_(this._dialog).off(At),r?_(this._element).one(_e.TRANSITION_END,function(t){return e._hideModal(t)}).emulateTransitionEnd(300):this._hideModal()}}},t.dispose=function(){_.removeData(this._element,"bs.modal"),_(window,document,this._element,this._backdrop).off(".bs.modal"),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._scrollbarWidth=null},t.handleUpdate=function(){this._adjustDialog()},t._getConfig=function(t){return t=_.extend({},Y,t),_e.typeCheckConfig(V,t,W),t},t._showElement=function(t){var e=this,i=_e.supportsTransitionEnd()&&_(this._element).hasClass(ct);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.scrollTop=0,i&&_e.reflow(this._element),_(this._element).addClass(ht),this._config.focus&&this._enforceFocus();var r=_.Event($,{relatedTarget:t}),n=function(){e._config.focus&&e._element.focus(),e._isTransitioning=!1,_(e._element).trigger(r)};i?_(this._dialog).one(_e.TRANSITION_END,n).emulateTransitionEnd(300):n()},t._enforceFocus=function(){var e=this;_(document).off(tt).on(tt,function(t){document===t.target||e._element===t.target||_(e._element).has(t.target).length||e._element.focus()})},t._setEscapeEvent=function(){var e=this;this._isShown&&this._config.keyboard?_(this._element).on(rt,function(t){27===t.which&&(t.preventDefault(),e.hide())}):this._isShown||_(this._element).off(rt)},t._setResizeEvent=function(){var e=this;this._isShown?_(window).on(et,function(t){return e.handleUpdate(t)}):_(window).off(et)},t._hideModal=function(){var t=this;this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._isTransitioning=!1,this._showBackdrop(function(){_(document.body).removeClass(lt),t._resetAdjustments(),t._resetScrollbar(),_(t._element).trigger(q)})},t._removeBackdrop=function(){this._backdrop&&(_(this._backdrop).remove(),this._backdrop=null)},t._showBackdrop=function(t){var e=this,i=_(this._element).hasClass(ct)?ct:"";if(this._isShown&&this._config.backdrop){var r=_e.supportsTransitionEnd()&&i;if(this._backdrop=document.createElement("div"),this._backdrop.className=at,i&&_(this._backdrop).addClass(i),_(this._backdrop).appendTo(document.body),_(this._element).on(it,function(t){e._ignoreBackdropClick?e._ignoreBackdropClick=!1:t.target===t.currentTarget&&("static"===e._config.backdrop?e._element.focus():e.hide())}),r&&_e.reflow(this._backdrop),_(this._backdrop).addClass(ht),!t)return;if(!r)return void t();_(this._backdrop).one(_e.TRANSITION_END,t).emulateTransitionEnd(150)}else if(!this._isShown&&this._backdrop){_(this._backdrop).removeClass(ht);var n=function(){e._removeBackdrop(),t&&t()};_e.supportsTransitionEnd()&&_(this._element).hasClass(ct)?_(this._backdrop).one(_e.TRANSITION_END,n).emulateTransitionEnd(150):n()}else t&&t()},t._adjustDialog=function(){var t=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&t&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!t&&(this._element.style.paddingRight=this._scrollbarWidth+"px")},t._resetAdjustments=function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""},t._checkScrollbar=function(){var t=document.body.getBoundingClientRect();this._isBodyOverflowing=t.left+t.right<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()},t._setScrollbar=function(){var n=this;if(this._isBodyOverflowing){_(ut.FIXED_CONTENT).each(function(t,e){var i=_(e)[0].style.paddingRight,r=_(e).css("padding-right");_(e).data("padding-right",i).css("padding-right",parseFloat(r)+n._scrollbarWidth+"px")}),_(ut.STICKY_CONTENT).each(function(t,e){var i=_(e)[0].style.marginRight,r=_(e).css("margin-right");_(e).data("margin-right",i).css("margin-right",parseFloat(r)-n._scrollbarWidth+"px")}),_(ut.NAVBAR_TOGGLER).each(function(t,e){var i=_(e)[0].style.marginRight,r=_(e).css("margin-right");_(e).data("margin-right",i).css("margin-right",parseFloat(r)+n._scrollbarWidth+"px")});var t=document.body.style.paddingRight,e=_("body").css("padding-right");_("body").data("padding-right",t).css("padding-right",parseFloat(e)+this._scrollbarWidth+"px")}},t._resetScrollbar=function(){_(ut.FIXED_CONTENT).each(function(t,e){var i=_(e).data("padding-right");void 0!==i&&_(e).css("padding-right",i).removeData("padding-right")}),_(ut.STICKY_CONTENT+", "+ut.NAVBAR_TOGGLER).each(function(t,e){var i=_(e).data("margin-right");void 0!==i&&_(e).css("margin-right",i).removeData("margin-right")});var t=_("body").data("padding-right");void 0!==t&&_("body").css("padding-right",t).removeData("padding-right")},t._getScrollbarWidth=function(){var t=document.createElement("div");t.className=ot,document.body.appendChild(t);var e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e},n._jQueryInterface=function(i,r){return this.each(function(){var t=_(this).data("bs.modal"),e=_.extend({},n.Default,_(this).data(),"object"==typeof i&&i);if(t||(t=new n(this,e),_(this).data("bs.modal",t)),"string"==typeof i){if(void 0===t[i])throw new Error('No method named "'+i+'"');t[i](r)}else e.show&&t.show(r)})},ye(n,null,[{key:"VERSION",get:function(){return"4.0.0-beta.2"}},{key:"Default",get:function(){return Y}}]),n}(),_(document).on(st,ut.DATA_TOGGLE,function(t){var e,i=this,r=_e.getSelectorFromElement(this);r&&(e=_(r)[0]);var n=_(e).data("bs.modal")?"toggle":_.extend({},_(e).data(),_(this).data());"A"!==this.tagName&&"AREA"!==this.tagName||t.preventDefault();var A=_(e).one(Z,function(t){t.isDefaultPrevented()||A.one(q,function(){_(i).is(":visible")&&i.focus()})});ft._jQueryInterface.call(_(e),n,this)}),_.fn[V]=ft._jQueryInterface,_.fn[V].Constructor=ft,_.fn[V].noConflict=function(){return _.fn[V]=G,ft._jQueryInterface},ft),xe=function(){if(void 0===y)throw new Error("Bootstrap tooltips require Popper.js (https://popper.js.org)");var e="tooltip",i=".bs.tooltip",t=_.fn[e],r=new RegExp("(^|\\s)bs-tooltip\\S+","g"),n={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)"},A={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},s={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:0,container:!1,fallbackPlacement:"flip"},o="show",c="out",a={HIDE:"hide"+i,HIDDEN:"hidden"+i,SHOW:"show"+i,SHOWN:"shown"+i,INSERTED:"inserted"+i,CLICK:"click"+i,FOCUSIN:"focusin"+i,FOCUSOUT:"focusout"+i,MOUSEENTER:"mouseenter"+i,MOUSELEAVE:"mouseleave"+i},h="fade",u="show",f=".tooltip-inner",d=".arrow",g="hover",p="focus",B="click",m="manual",l=function(){function l(t,e){this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this.element=t,this.config=this._getConfig(e),this.tip=null,this._setListeners()}var t=l.prototype;return t.enable=function(){this._isEnabled=!0},t.disable=function(){this._isEnabled=!1},t.toggleEnabled=function(){this._isEnabled=!this._isEnabled},t.toggle=function(t){if(this._isEnabled)if(t){var e=this.constructor.DATA_KEY,i=_(t.currentTarget).data(e);i||(i=new this.constructor(t.currentTarget,this._getDelegateConfig()),_(t.currentTarget).data(e,i)),i._activeTrigger.click=!i._activeTrigger.click,i._isWithActiveTrigger()?i._enter(null,i):i._leave(null,i)}else{if(_(this.getTipElement()).hasClass(u))return void this._leave(null,this);this._enter(null,this)}},t.dispose=function(){clearTimeout(this._timeout),_.removeData(this.element,this.constructor.DATA_KEY),_(this.element).off(this.constructor.EVENT_KEY),_(this.element).closest(".modal").off("hide.bs.modal"),this.tip&&_(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,(this._activeTrigger=null)!==this._popper&&this._popper.destroy(),this._popper=null,this.element=null,this.config=null,this.tip=null},t.show=function(){var e=this;if("none"===_(this.element).css("display"))throw new Error("Please use show on visible elements");var t=_.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){_(this.element).trigger(t);var i=_.contains(this.element.ownerDocument.documentElement,this.element);if(t.isDefaultPrevented()||!i)return;var r=this.getTipElement(),n=_e.getUID(this.constructor.NAME);r.setAttribute("id",n),this.element.setAttribute("aria-describedby",n),this.setContent(),this.config.animation&&_(r).addClass(h);var A="function"==typeof this.config.placement?this.config.placement.call(this,r,this.element):this.config.placement,s=this._getAttachment(A);this.addAttachmentClass(s);var o=!1===this.config.container?document.body:_(this.config.container);_(r).data(this.constructor.DATA_KEY,this),_.contains(this.element.ownerDocument.documentElement,this.tip)||_(r).appendTo(o),_(this.element).trigger(this.constructor.Event.INSERTED),this._popper=new y(this.element,r,{placement:s,modifiers:{offset:{offset:this.config.offset},flip:{behavior:this.config.fallbackPlacement},arrow:{element:d}},onCreate:function(t){t.originalPlacement!==t.placement&&e._handlePopperPlacementChange(t)},onUpdate:function(t){e._handlePopperPlacementChange(t)}}),_(r).addClass(u),"ontouchstart"in document.documentElement&&_("body").children().on("mouseover",null,_.noop);var a=function(){e.config.animation&&e._fixTransition();var t=e._hoverState;e._hoverState=null,_(e.element).trigger(e.constructor.Event.SHOWN),t===c&&e._leave(null,e)};_e.supportsTransitionEnd()&&_(this.tip).hasClass(h)?_(this.tip).one(_e.TRANSITION_END,a).emulateTransitionEnd(l._TRANSITION_DURATION):a()}},t.hide=function(t){var e=this,i=this.getTipElement(),r=_.Event(this.constructor.Event.HIDE),n=function(){e._hoverState!==o&&i.parentNode&&i.parentNode.removeChild(i),e._cleanTipClass(),e.element.removeAttribute("aria-describedby"),_(e.element).trigger(e.constructor.Event.HIDDEN),null!==e._popper&&e._popper.destroy(),t&&t()};_(this.element).trigger(r),r.isDefaultPrevented()||(_(i).removeClass(u),"ontouchstart"in document.documentElement&&_("body").children().off("mouseover",null,_.noop),this._activeTrigger[B]=!1,this._activeTrigger[p]=!1,this._activeTrigger[g]=!1,_e.supportsTransitionEnd()&&_(this.tip).hasClass(h)?_(i).one(_e.TRANSITION_END,n).emulateTransitionEnd(150):n(),this._hoverState="")},t.update=function(){null!==this._popper&&this._popper.scheduleUpdate()},t.isWithContent=function(){return Boolean(this.getTitle())},t.addAttachmentClass=function(t){_(this.getTipElement()).addClass("bs-tooltip-"+t)},t.getTipElement=function(){return this.tip=this.tip||_(this.config.template)[0],this.tip},t.setContent=function(){var t=_(this.getTipElement());this.setElementContent(t.find(f),this.getTitle()),t.removeClass(h+" "+u)},t.setElementContent=function(t,e){var i=this.config.html;"object"==typeof e&&(e.nodeType||e.jquery)?i?_(e).parent().is(t)||t.empty().append(e):t.text(_(e).text()):t[i?"html":"text"](e)},t.getTitle=function(){var t=this.element.getAttribute("data-original-title");return t||(t="function"==typeof this.config.title?this.config.title.call(this.element):this.config.title),t},t._getAttachment=function(t){return A[t.toUpperCase()]},t._setListeners=function(){var r=this;this.config.trigger.split(" ").forEach(function(t){if("click"===t)_(r.element).on(r.constructor.Event.CLICK,r.config.selector,function(t){return r.toggle(t)});else if(t!==m){var e=t===g?r.constructor.Event.MOUSEENTER:r.constructor.Event.FOCUSIN,i=t===g?r.constructor.Event.MOUSELEAVE:r.constructor.Event.FOCUSOUT;_(r.element).on(e,r.config.selector,function(t){return r._enter(t)}).on(i,r.config.selector,function(t){return r._leave(t)})}_(r.element).closest(".modal").on("hide.bs.modal",function(){return r.hide()})}),this.config.selector?this.config=_.extend({},this.config,{trigger:"manual",selector:""}):this._fixTitle()},t._fixTitle=function(){var t=typeof this.element.getAttribute("data-original-title");(this.element.getAttribute("title")||"string"!==t)&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))},t._enter=function(t,e){var i=this.constructor.DATA_KEY;(e=e||_(t.currentTarget).data(i))||(e=new this.constructor(t.currentTarget,this._getDelegateConfig()),_(t.currentTarget).data(i,e)),t&&(e._activeTrigger["focusin"===t.type?p:g]=!0),_(e.getTipElement()).hasClass(u)||e._hoverState===o?e._hoverState=o:(clearTimeout(e._timeout),e._hoverState=o,e.config.delay&&e.config.delay.show?e._timeout=setTimeout(function(){e._hoverState===o&&e.show()},e.config.delay.show):e.show())},t._leave=function(t,e){var i=this.constructor.DATA_KEY;(e=e||_(t.currentTarget).data(i))||(e=new this.constructor(t.currentTarget,this._getDelegateConfig()),_(t.currentTarget).data(i,e)),t&&(e._activeTrigger["focusout"===t.type?p:g]=!1),e._isWithActiveTrigger()||(clearTimeout(e._timeout),e._hoverState=c,e.config.delay&&e.config.delay.hide?e._timeout=setTimeout(function(){e._hoverState===c&&e.hide()},e.config.delay.hide):e.hide())},t._isWithActiveTrigger=function(){for(var t in this._activeTrigger)if(this._activeTrigger[t])return!0;return!1},t._getConfig=function(t){return"number"==typeof(t=_.extend({},this.constructor.Default,_(this.element).data(),t)).delay&&(t.delay={show:t.delay,hide:t.delay}),"number"==typeof t.title&&(t.title=t.title.toString()),"number"==typeof t.content&&(t.content=t.content.toString()),_e.typeCheckConfig(e,t,this.constructor.DefaultType),t},t._getDelegateConfig=function(){var t={};if(this.config)for(var e in this.config)this.constructor.Default[e]!==this.config[e]&&(t[e]=this.config[e]);return t},t._cleanTipClass=function(){var t=_(this.getTipElement()),e=t.attr("class").match(r);null!==e&&0<e.length&&t.removeClass(e.join(""))},t._handlePopperPlacementChange=function(t){this._cleanTipClass(),this.addAttachmentClass(this._getAttachment(t.placement))},t._fixTransition=function(){var t=this.getTipElement(),e=this.config.animation;null===t.getAttribute("x-placement")&&(_(t).removeClass(h),this.config.animation=!1,this.hide(),this.show(),this.config.animation=e)},l._jQueryInterface=function(i){return this.each(function(){var t=_(this).data("bs.tooltip"),e="object"==typeof i&&i;if((t||!/dispose|hide/.test(i))&&(t||(t=new l(this,e),_(this).data("bs.tooltip",t)),"string"==typeof i)){if(void 0===t[i])throw new Error('No method named "'+i+'"');t[i]()}})},ye(l,null,[{key:"VERSION",get:function(){return"4.0.0-beta.2"}},{key:"Default",get:function(){return s}},{key:"NAME",get:function(){return e}},{key:"DATA_KEY",get:function(){return"bs.tooltip"}},{key:"Event",get:function(){return a}},{key:"EVENT_KEY",get:function(){return i}},{key:"DefaultType",get:function(){return n}}]),l}();return _.fn[e]=l._jQueryInterface,_.fn[e].Constructor=l,_.fn[e].noConflict=function(){return _.fn[e]=t,l._jQueryInterface},l}(),Oe=(I="popover",D=".bs.popover",k=_.fn[I],L=new RegExp("(^|\\s)bs-popover\\S+","g"),N=_.extend({},xe.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),M=_.extend({},xe.DefaultType,{content:"(string|element|function)"}),P="fade",K=".popover-header",j=".popover-body",z={HIDE:"hide"+D,HIDDEN:"hidden"+D,SHOW:(R="show")+D,SHOWN:"shown"+D,INSERTED:"inserted"+D,CLICK:"click"+D,FOCUSIN:"focusin"+D,FOCUSOUT:"focusout"+D,MOUSEENTER:"mouseenter"+D,MOUSELEAVE:"mouseleave"+D},X=function(t){function r(){return t.apply(this,arguments)||this}var e,i;i=t,(e=r).prototype=Object.create(i.prototype),(e.prototype.constructor=e).__proto__=i;var n=r.prototype;return n.isWithContent=function(){return this.getTitle()||this._getContent()},n.addAttachmentClass=function(t){_(this.getTipElement()).addClass("bs-popover-"+t)},n.getTipElement=function(){return this.tip=this.tip||_(this.config.template)[0],this.tip},n.setContent=function(){var t=_(this.getTipElement());this.setElementContent(t.find(K),this.getTitle()),this.setElementContent(t.find(j),this._getContent()),t.removeClass(P+" "+R)},n._getContent=function(){return this.element.getAttribute("data-content")||("function"==typeof this.config.content?this.config.content.call(this.element):this.config.content)},n._cleanTipClass=function(){var t=_(this.getTipElement()),e=t.attr("class").match(L);null!==e&&0<e.length&&t.removeClass(e.join(""))},r._jQueryInterface=function(i){return this.each(function(){var t=_(this).data("bs.popover"),e="object"==typeof i?i:null;if((t||!/destroy|hide/.test(i))&&(t||(t=new r(this,e),_(this).data("bs.popover",t)),"string"==typeof i)){if(void 0===t[i])throw new Error('No method named "'+i+'"');t[i]()}})},ye(r,null,[{key:"VERSION",get:function(){return"4.0.0-beta.2"}},{key:"Default",get:function(){return N}},{key:"NAME",get:function(){return I}},{key:"DATA_KEY",get:function(){return"bs.popover"}},{key:"Event",get:function(){return z}},{key:"EVENT_KEY",get:function(){return D}},{key:"DefaultType",get:function(){return M}}]),r}(xe),_.fn[I]=X._jQueryInterface,_.fn[I].Constructor=X,_.fn[I].noConflict=function(){return _.fn[I]=k,X._jQueryInterface},X),He=(C="scrollspy",b=_.fn[C],E={offset:10,method:"auto",target:""},Q={offset:"number",method:"string",target:"(string|element)"},F={ACTIVATE:"activate.bs.scrollspy",SCROLL:"scroll.bs.scrollspy",LOAD_DATA_API:"load.bs.scrollspy.data-api"},U="dropdown-item",T="active",S={DATA_SPY:'[data-spy="scroll"]',ACTIVE:".active",NAV_LIST_GROUP:".nav, .list-group",NAV_LINKS:".nav-link",NAV_ITEMS:".nav-item",LIST_ITEMS:".list-group-item",DROPDOWN:".dropdown",DROPDOWN_ITEMS:".dropdown-item",DROPDOWN_TOGGLE:".dropdown-toggle"},x="offset",O="position",H=function(){function i(t,e){var i=this;this._element=t,this._scrollElement="BODY"===t.tagName?window:t,this._config=this._getConfig(e),this._selector=this._config.target+" "+S.NAV_LINKS+","+this._config.target+" "+S.LIST_ITEMS+","+this._config.target+" "+S.DROPDOWN_ITEMS,this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,_(this._scrollElement).on(F.SCROLL,function(t){return i._process(t)}),this.refresh(),this._process()}var t=i.prototype;return t.refresh=function(){var e=this,t=this._scrollElement!==this._scrollElement.window?O:x,n="auto"===this._config.method?t:this._config.method,A=n===O?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),_.makeArray(_(this._selector)).map(function(t){var e,i=_e.getSelectorFromElement(t);if(i&&(e=_(i)[0]),e){var r=e.getBoundingClientRect();if(r.width||r.height)return[_(e)[n]().top+A,i]}return null}).filter(function(t){return t}).sort(function(t,e){return t[0]-e[0]}).forEach(function(t){e._offsets.push(t[0]),e._targets.push(t[1])})},t.dispose=function(){_.removeData(this._element,"bs.scrollspy"),_(this._scrollElement).off(".bs.scrollspy"),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null},t._getConfig=function(t){if("string"!=typeof(t=_.extend({},E,t)).target){var e=_(t.target).attr("id");e||(e=_e.getUID(C),_(t.target).attr("id",e)),t.target="#"+e}return _e.typeCheckConfig(C,t,Q),t},t._getScrollTop=function(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop},t._getScrollHeight=function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},t._getOffsetHeight=function(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height},t._process=function(){var t=this._getScrollTop()+this._config.offset,e=this._getScrollHeight(),i=this._config.offset+e-this._getOffsetHeight();if(this._scrollHeight!==e&&this.refresh(),i<=t){var r=this._targets[this._targets.length-1];this._activeTarget!==r&&this._activate(r)}else{if(this._activeTarget&&t<this._offsets[0]&&0<this._offsets[0])return this._activeTarget=null,void this._clear();for(var n=this._offsets.length;n--;)this._activeTarget!==this._targets[n]&&t>=this._offsets[n]&&(void 0===this._offsets[n+1]||t<this._offsets[n+1])&&this._activate(this._targets[n])}},t._activate=function(e){this._activeTarget=e,this._clear();var t=this._selector.split(",");t=t.map(function(t){return t+'[data-target="'+e+'"],'+t+'[href="'+e+'"]'});var i=_(t.join(","));i.hasClass(U)?(i.closest(S.DROPDOWN).find(S.DROPDOWN_TOGGLE).addClass(T),i.addClass(T)):(i.addClass(T),i.parents(S.NAV_LIST_GROUP).prev(S.NAV_LINKS+", "+S.LIST_ITEMS).addClass(T),i.parents(S.NAV_LIST_GROUP).prev(S.NAV_ITEMS).children(S.NAV_LINKS).addClass(T)),_(this._scrollElement).trigger(F.ACTIVATE,{relatedTarget:e})},t._clear=function(){_(this._selector).filter(S.ACTIVE).removeClass(T)},i._jQueryInterface=function(e){return this.each(function(){var t=_(this).data("bs.scrollspy");if(t||(t=new i(this,"object"==typeof e&&e),_(this).data("bs.scrollspy",t)),"string"==typeof e){if(void 0===t[e])throw new Error('No method named "'+e+'"');t[e]()}})},ye(i,null,[{key:"VERSION",get:function(){return"4.0.0-beta.2"}},{key:"Default",get:function(){return E}}]),i}(),_(window).on(F.LOAD_DATA_API,function(){for(var t=_.makeArray(_(S.DATA_SPY)),e=t.length;e--;){var i=_(t[e]);H._jQueryInterface.call(i,i.data())}}),_.fn[C]=H._jQueryInterface,_.fn[C].Constructor=H,_.fn[C].noConflict=function(){return _.fn[C]=b,H._jQueryInterface},H),Ie=(e=_.fn.tab,l="hide.bs.tab",c="hidden.bs.tab",h="show.bs.tab",u="shown.bs.tab",i="click.bs.tab.data-api",s="dropdown-menu",f="active",d="disabled",o="fade",a="show",g=".dropdown",p=".nav, .list-group",B=".active",m="> li > .active",n='[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',v=".dropdown-toggle",w="> .dropdown-menu .active",A=function(){function r(t){this._element=t}var t=r.prototype;return t.show=function(){var i=this;if(!(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&_(this._element).hasClass(f)||_(this._element).hasClass(d))){var t,r,e=_(this._element).closest(p)[0],n=_e.getSelectorFromElement(this._element);if(e){var A="UL"===e.nodeName?m:B;r=(r=_.makeArray(_(e).find(A)))[r.length-1]}var s=_.Event(l,{relatedTarget:this._element}),o=_.Event(h,{relatedTarget:r});if(r&&_(r).trigger(s),_(this._element).trigger(o),!o.isDefaultPrevented()&&!s.isDefaultPrevented()){n&&(t=_(n)[0]),this._activate(this._element,e);var a=function(){var t=_.Event(c,{relatedTarget:i._element}),e=_.Event(u,{relatedTarget:r});_(r).trigger(t),_(i._element).trigger(e)};t?this._activate(t,t.parentNode,a):a()}}},t.dispose=function(){_.removeData(this._element,"bs.tab"),this._element=null},t._activate=function(t,e,i){var r=this,n=("UL"===e.nodeName?_(e).find(m):_(e).children(B))[0],A=i&&_e.supportsTransitionEnd()&&n&&_(n).hasClass(o),s=function(){return r._transitionComplete(t,n,A,i)};n&&A?_(n).one(_e.TRANSITION_END,s).emulateTransitionEnd(150):s(),n&&_(n).removeClass(a)},t._transitionComplete=function(t,e,i,r){if(e){_(e).removeClass(f);var n=_(e.parentNode).find(w)[0];n&&_(n).removeClass(f),"tab"===e.getAttribute("role")&&e.setAttribute("aria-selected",!1)}if(_(t).addClass(f),"tab"===t.getAttribute("role")&&t.setAttribute("aria-selected",!0),i?(_e.reflow(t),_(t).addClass(a)):_(t).removeClass(o),t.parentNode&&_(t.parentNode).hasClass(s)){var A=_(t).closest(g)[0];A&&_(A).find(v).addClass(f),t.setAttribute("aria-expanded",!0)}r&&r()},r._jQueryInterface=function(i){return this.each(function(){var t=_(this),e=t.data("bs.tab");if(e||(e=new r(this),t.data("bs.tab",e)),"string"==typeof i){if(void 0===e[i])throw new Error('No method named "'+i+'"');e[i]()}})},ye(r,null,[{key:"VERSION",get:function(){return"4.0.0-beta.2"}}]),r}(),_(document).on(i,n,function(t){t.preventDefault(),A._jQueryInterface.call(_(this),"show")}),_.fn.tab=A._jQueryInterface,_.fn.tab.Constructor=A,_.fn.tab.noConflict=function(){return _.fn.tab=e,A._jQueryInterface},A);return function(){if(void 0===_)throw new Error("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript.");var t=_.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1===t[0]&&9===t[1]&&t[2]<1||4<=t[0])throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")}(),t.Util=_e,t.Alert=Ee,t.Button=Qe,t.Carousel=Fe,t.Collapse=Ue,t.Dropdown=Te,t.Modal=Se,t.Popover=Oe,t.Scrollspy=He,t.Tab=Ie,t.Tooltip=xe,t}({},$,Popper),Canvas2Image=function(){var t,e,A=(t=document.createElement("canvas"),{canvas:!!(e=t.getContext("2d")),imageData:!!e.getImageData,dataURL:!!t.toDataURL,btoa:!!window.btoa}),s="image/octet-stream";function o(t,e,i){var r=t.width,n=t.height;null==e&&(e=r),null==i&&(i=n);var A=document.createElement("canvas"),s=A.getContext("2d");return A.width=e,A.height=i,s.drawImage(t,0,0,r,n,0,0,e,i),A}function a(t,e,i,r){return(t=o(t,i,r)).toDataURL(e)}function l(t){document.location.href=t}function c(t){var e=document.createElement("img");return e.src=t,e}function h(t){return"image/"+(t=t.toLowerCase().replace(/jpg/i,"jpeg")).match(/png|jpeg|bmp|gif/)[0]}function m(t){if(!window.btoa)throw"btoa undefined";var e="";if("string"==typeof t)e=t;else for(var i=0;i<t.length;i++)e+=String.fromCharCode(t[i]);return btoa(e)}function u(t){var e=t.width,i=t.height;return t.getContext("2d").getImageData(0,0,e,i)}function f(t,e){return"data:"+e+";base64,"+t}var d=function(t){var e=t.width,i=t.height,r=e*i*3,n=r+54,A=[66,77,255&n,n>>8&255,n>>16&255,n>>24&255,0,0,0,0,54,0,0,0],s=[40,0,0,0,255&e,e>>8&255,e>>16&255,e>>24&255,255&i,i>>8&255,i>>16&255,i>>24&255,1,0,24,0,0,0,0,0,255&r,r>>8&255,r>>16&255,r>>24&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],o=(4-3*e%4)%4,a=t.data,l="",c=e<<2,h=i,u=String.fromCharCode;do{for(var f=c*(h-1),d="",g=0;g<e;g++){var p=g<<2;d+=u(a[f+p+2])+u(a[f+p+1])+u(a[f+p])}for(var B=0;B<o;B++)d+=String.fromCharCode(0);l+=d}while(--h);return m(A.concat(s))+m(l)},r=function(t,e,i,r){if(A.canvas&&A.dataURL)if("string"==typeof t&&(t=document.getElementById(t)),null==r&&(r="png"),r=h(r),/bmp/.test(r)){var n=u(o(t,e,i));l(f(d(n),s))}else{l(a(t,r,e,i).replace(r,s))}},n=function(t,e,i,r){if(A.canvas&&A.dataURL){if("string"==typeof t&&(t=document.getElementById(t)),null==r&&(r="png"),r=h(r),/bmp/.test(r)){var n=u(o(t,e,i));return c(f(d(n),"image/bmp"))}return c(a(t,r,e,i))}};return{saveAsImage:r,saveAsPNG:function(t,e,i){return r(t,e,i,"png")},saveAsJPEG:function(t,e,i){return r(t,e,i,"jpeg")},saveAsGIF:function(t,e,i){return r(t,e,i,"gif")},saveAsBMP:function(t,e,i){return r(t,e,i,"bmp")},convertToImage:n,convertToPNG:function(t,e,i){return n(t,e,i,"png")},convertToJPEG:function(t,e,i){return n(t,e,i,"jpeg")},convertToGIF:function(t,e,i){return n(t,e,i,"gif")},convertToBMP:function(t,e,i){return n(t,e,i,"bmp")}}}();$("#retrobtn").click(function(){$("#screenshot_fronte").hide(),$("#screenshot_retro").show(),1==$("#frontebtn").hasClass("active")&&($("#frontebtn").removeClass("active"),$("#retrobtn").addClass("active")),position="Rcanvas"}),$("#frontebtn").click(function(){$("#screenshot_retro").hide(),$("#screenshot_fronte").show(),1==$("#retrobtn").hasClass("active")&&($("#retrobtn").removeClass("active"),$("#frontebtn").addClass("active")),position="Fcanvas"}),$(document).on("click","#delete-item",function(){(fronte.getActiveObject()||retro.getActiveObject())&&(fronte.remove(fronte.getActiveObject()),retro.remove(retro.getActiveObject()))}),$(document).ready(function(){$(".nero").click(function(){$(".tee-background").removeClass("whitetee"),$(".tee-background").addClass("blacktee"),$(".nero").addClass("active")})}),$(document).ready(function(){$(".bianco").click(function(){$(".tee-background").addClass("whitetee"),$(".tee-background").removeClass("blacktee"),$(".bianco").addClass("active")})}),Dropzone.autoDiscover=!1;var fronte=new fabric.Canvas("Fcanvas"),retro=new fabric.Canvas("Rcanvas"),mySide=new fabric.Canvas,imgUpload=new Dropzone("#img-upload",{url:"uploader/upload.php",dictDefaultMessage:"Clicca qua per caricare la tua immagine"});imgUpload.on("success",function(){$("#upl-info").removeClass("alert-info"),$("#upl-info").addClass("alert-success"),$("#upl-info").html("File has been uploaded successfully. Click to upload another.")});var reader=new FileReader;function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function __guard__(t,e){return null!=t?e(t):void 0}function __guardMethod__(t,e,i){return null!=t&&"function"==typeof t[e]?i(t,e):void 0}reader.onload=function(t){var e=t.target.result;fabric.Image.fromURL(e,function(t){var e=300/t.width;t.set({scaleX:e,scaleY:e}),(mySide="Rcanvas"==position?retro:fronte).add(t).renderAll(),mySide.setActiveObject(t)})},imgUpload.on("addedfile",function(t){reader.readAsDataURL(t)}),$("#convert").click(function(){var e=document.getElementById("screenshot_fronte"),i=document.getElementById("screenshot_retro"),r=jQuery(e).css("display"),n=jQuery(i).css("display");jQuery(e).css("display","block"),jQuery(i).css("display","none"),html2canvas(e).then(function(t){jQuery("#FrontplaceHolder").html(t),jQuery(e).css("display","none"),jQuery(i).css("display","block"),html2canvas(i).then(function(t){jQuery("#RetroplaceHolder").html(t),jQuery(e).css("display",r),jQuery(i).css("display",n)})})}),fronte.setBackgroundImage("img/grid.png",fronte.renderAll.bind(fronte)),retro.setBackgroundImage("img/grid.png",retro.renderAll.bind(retro));var _createClass=function(){function r(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}}(),Emitter=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"on",value:function(t,e){return this._callbacks=this._callbacks||{},this._callbacks[t]||(this._callbacks[t]=[]),this._callbacks[t].push(e),this}},{key:"emit",value:function(t){this._callbacks=this._callbacks||{};var e=this._callbacks[t];if(e){for(var i=arguments.length,r=Array(1<i?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];for(var A=0,s=s=e;;){if(A>=s.length)break;s[A++].apply(this,r)}}return this}},{key:"off",value:function(t,e){if(!this._callbacks||0===arguments.length)return this._callbacks={},this;var i=this._callbacks[t];if(!i)return this;if(1===arguments.length)return delete this._callbacks[t],this;for(var r=0;r<i.length;r++)if(i[r]===e){i.splice(r,1);break}return this}}]),t}(),Dropzone=function(t){function w(t,e){_classCallCheck(this,w);var i,r=_possibleConstructorReturn(this,(w.__proto__||Object.getPrototypeOf(w)).call(this)),n=void 0;if(r.element=t,r.version=w.version,r.defaultOptions.previewTemplate=r.defaultOptions.previewTemplate.replace(/\n*/g,""),r.clickableElements=[],r.listeners=[],r.files=[],"string"==typeof r.element&&(r.element=document.querySelector(r.element)),!r.element||null==r.element.nodeType)throw new Error("Invalid dropzone element.");if(r.element.dropzone)throw new Error("Dropzone already attached.");w.instances.push(r),r.element.dropzone=r;var A,s=null!=(i=w.optionsForElement(r.element))?i:{};if(r.options=w.extend({},r.defaultOptions,s,null!=e?e:{}),r.options.forceFallback||!w.isBrowserSupported())return A=r.options.fallback.call(r),_possibleConstructorReturn(r,A);if(null==r.options.url&&(r.options.url=r.element.getAttribute("action")),!r.options.url)throw new Error("No URL provided.");if(r.options.acceptedFiles&&r.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");if(r.options.uploadMultiple&&r.options.chunking)throw new Error("You cannot set both: uploadMultiple and chunking.");return r.options.acceptedMimeTypes&&(r.options.acceptedFiles=r.options.acceptedMimeTypes,delete r.options.acceptedMimeTypes),null!=r.options.renameFilename&&(r.options.renameFile=function(t){return r.options.renameFilename.call(r,t.name,t)}),r.options.method=r.options.method.toUpperCase(),(n=r.getExistingFallback())&&n.parentNode&&n.parentNode.removeChild(n),!1!==r.options.previewsContainer&&(r.options.previewsContainer?r.previewsContainer=w.getElement(r.options.previewsContainer,"previewsContainer"):r.previewsContainer=r.element),r.options.clickable&&(!0===r.options.clickable?r.clickableElements=[r.element]:r.clickableElements=w.getElements(r.options.clickable,"clickable")),r.init(),r}return _inherits(w,Emitter),_createClass(w,null,[{key:"initClass",value:function(){this.prototype.Emitter=Emitter,this.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],this.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,timeout:3e4,parallelUploads:2,uploadMultiple:!1,chunking:!1,forceChunking:!1,chunkSize:2e6,parallelChunkUploads:!1,retryChunks:!1,retryChunksLimit:3,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:"crop",resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:.8,resizeMethod:"contain",filesizeBase:1e3,maxFiles:null,headers:null,clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,renameFile:null,forceFallback:!1,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",dictFileSizeUnits:{tb:"TB",gb:"GB",mb:"MB",kb:"KB",b:"b"},init:function(){},params:function(t,e,i){if(i)return{dzuuid:i.file.upload.uuid,dzchunkindex:i.index,dztotalfilesize:i.file.size,dzchunksize:this.options.chunkSize,dztotalchunkcount:i.file.upload.totalChunkCount,dzchunkbyteoffset:i.index*this.options.chunkSize}},accept:function(t,e){return e()},chunksUploaded:function(t,e){e()},fallback:function(){var t=void 0;this.element.className=this.element.className+" dz-browser-not-supported";for(var e=0,i=i=this.element.getElementsByTagName("div");;){if(e>=i.length)break;var r=i[e++];if(/(^| )dz-message($| )/.test(r.className)){(t=r).className="dz-message";break}}t||(t=w.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(t));var n=t.getElementsByTagName("span")[0];return n&&(null!=n.textContent?n.textContent=this.options.dictFallbackMessage:null!=n.innerText&&(n.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(t,e,i,r){var n={srcX:0,srcY:0,srcWidth:t.width,srcHeight:t.height},A=t.width/t.height;null==e&&null==i?(e=n.srcWidth,i=n.srcHeight):null==e?e=i*A:null==i&&(i=e/A);var s=(e=Math.min(e,n.srcWidth))/(i=Math.min(i,n.srcHeight));if(n.srcWidth>e||n.srcHeight>i)if("crop"===r)s<A?(n.srcHeight=t.height,n.srcWidth=n.srcHeight*s):(n.srcWidth=t.width,n.srcHeight=n.srcWidth/s);else{if("contain"!==r)throw new Error("Unknown resizeMethod '"+r+"'");s<A?i=e/A:e=i*A}return n.srcX=(t.width-n.srcWidth)/2,n.srcY=(t.height-n.srcHeight)/2,n.trgWidth=e,n.trgHeight=i,n},transformFile:function(t,e){return(this.options.resizeWidth||this.options.resizeHeight)&&t.type.match(/image.*/)?this.resizeImage(t,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,e):e(t)},previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>',drop:function(t){return this.element.classList.remove("dz-drag-hover")},dragstart:function(t){},dragend:function(t){return this.element.classList.remove("dz-drag-hover")},dragenter:function(t){return this.element.classList.add("dz-drag-hover")},dragover:function(t){return this.element.classList.add("dz-drag-hover")},dragleave:function(t){return this.element.classList.remove("dz-drag-hover")},paste:function(t){},reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(e){var i=this;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){e.previewElement=w.createElement(this.options.previewTemplate.trim()),e.previewTemplate=e.previewElement,this.previewsContainer.appendChild(e.previewElement);for(var t=0,r=r=e.previewElement.querySelectorAll("[data-dz-name]");;){if(t>=r.length)break;var n=r[t++];n.textContent=e.name}for(var A=0,s=s=e.previewElement.querySelectorAll("[data-dz-size]");!(A>=s.length);)(n=s[A++]).innerHTML=this.filesize(e.size);this.options.addRemoveLinks&&(e._removeLink=w.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),e.previewElement.appendChild(e._removeLink));for(var o=function(t){return t.preventDefault(),t.stopPropagation(),e.status===w.UPLOADING?w.confirm(i.options.dictCancelUploadConfirmation,function(){return i.removeFile(e)}):i.options.dictRemoveFileConfirmation?w.confirm(i.options.dictRemoveFileConfirmation,function(){return i.removeFile(e)}):i.removeFile(e)},a=0,l=l=e.previewElement.querySelectorAll("[data-dz-remove]");;){if(a>=l.length)break;l[a++].addEventListener("click",o)}}},removedfile:function(t){return null!=t.previewElement&&null!=t.previewElement.parentNode&&t.previewElement.parentNode.removeChild(t.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(t,e){if(t.previewElement){t.previewElement.classList.remove("dz-file-preview");for(var i=0,r=r=t.previewElement.querySelectorAll("[data-dz-thumbnail]");;){if(i>=r.length)break;var n=r[i++];n.alt=t.name,n.src=e}return setTimeout(function(){return t.previewElement.classList.add("dz-image-preview")},1)}},error:function(t,e){if(t.previewElement){t.previewElement.classList.add("dz-error"),"String"!=typeof e&&e.error&&(e=e.error);for(var i=0,r=r=t.previewElement.querySelectorAll("[data-dz-errormessage]");;){if(i>=r.length)break;r[i++].textContent=e}}},errormultiple:function(){},processing:function(t){if(t.previewElement&&(t.previewElement.classList.add("dz-processing"),t._removeLink))return t._removeLink.textContent=this.options.dictCancelUpload},processingmultiple:function(){},uploadprogress:function(t,e,i){if(t.previewElement)for(var r=0,n=n=t.previewElement.querySelectorAll("[data-dz-uploadprogress]");;){if(r>=n.length)break;var A=n[r++];"PROGRESS"===A.nodeName?A.value=e:A.style.width=e+"%"}},totaluploadprogress:function(){},sending:function(){},sendingmultiple:function(){},success:function(t){if(t.previewElement)return t.previewElement.classList.add("dz-success")},successmultiple:function(){},canceled:function(t){return this.emit("error",t,"Upload canceled.")},canceledmultiple:function(){},complete:function(t){if(t._removeLink&&(t._removeLink.textContent=this.options.dictRemoveFile),t.previewElement)return t.previewElement.classList.add("dz-complete")},completemultiple:function(){},maxfilesexceeded:function(){},maxfilesreached:function(){},queuecomplete:function(){},addedfiles:function(){}},this.prototype._thumbnailQueue=[],this.prototype._processingThumbnail=!1}},{key:"extend",value:function(t){for(var e=arguments.length,i=Array(1<e?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];for(var n=0,A=A=i;;){if(n>=A.length)break;var s=A[n++];for(var o in s){var a=s[o];t[o]=a}}return t}}]),_createClass(w,[{key:"getAcceptedFiles",value:function(){return this.files.filter(function(t){return t.accepted}).map(function(t){return t})}},{key:"getRejectedFiles",value:function(){return this.files.filter(function(t){return!t.accepted}).map(function(t){return t})}},{key:"getFilesWithStatus",value:function(e){return this.files.filter(function(t){return t.status===e}).map(function(t){return t})}},{key:"getQueuedFiles",value:function(){return this.getFilesWithStatus(w.QUEUED)}},{key:"getUploadingFiles",value:function(){return this.getFilesWithStatus(w.UPLOADING)}},{key:"getAddedFiles",value:function(){return this.getFilesWithStatus(w.ADDED)}},{key:"getActiveFiles",value:function(){return this.files.filter(function(t){return t.status===w.UPLOADING||t.status===w.QUEUED}).map(function(t){return t})}},{key:"init",value:function(){var A=this;"form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(w.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length&&function n(){return A.hiddenFileInput&&A.hiddenFileInput.parentNode.removeChild(A.hiddenFileInput),A.hiddenFileInput=document.createElement("input"),A.hiddenFileInput.setAttribute("type","file"),(null===A.options.maxFiles||1<A.options.maxFiles)&&A.hiddenFileInput.setAttribute("multiple","multiple"),A.hiddenFileInput.className="dz-hidden-input",null!==A.options.acceptedFiles&&A.hiddenFileInput.setAttribute("accept",A.options.acceptedFiles),null!==A.options.capture&&A.hiddenFileInput.setAttribute("capture",A.options.capture),A.hiddenFileInput.style.visibility="hidden",A.hiddenFileInput.style.position="absolute",A.hiddenFileInput.style.top="0",A.hiddenFileInput.style.left="0",A.hiddenFileInput.style.height="0",A.hiddenFileInput.style.width="0",document.querySelector(A.options.hiddenInputContainer).appendChild(A.hiddenFileInput),A.hiddenFileInput.addEventListener("change",function(){var t=A.hiddenFileInput.files;if(t.length)for(var e=0,i=i=t;;){if(e>=i.length)break;var r=i[e++];A.addFile(r)}return A.emit("addedfiles",t),n()})}(),this.URL=null!==window.URL?window.URL:window.webkitURL;for(var t=0,e=e=this.events;;){if(t>=e.length)break;var i=e[t++];this.on(i,this.options[i])}this.on("uploadprogress",function(){return A.updateTotalUploadProgress()}),this.on("removedfile",function(){return A.updateTotalUploadProgress()}),this.on("canceled",function(t){return A.emit("complete",t)}),this.on("complete",function(t){if(0===A.getAddedFiles().length&&0===A.getUploadingFiles().length&&0===A.getQueuedFiles().length)return setTimeout(function(){return A.emit("queuecomplete")},0)});var r=function(t){return t.stopPropagation(),t.preventDefault?t.preventDefault():t.returnValue=!1};return this.listeners=[{element:this.element,events:{dragstart:function(t){return A.emit("dragstart",t)},dragenter:function(t){return r(t),A.emit("dragenter",t)},dragover:function(t){var e=void 0;try{e=t.dataTransfer.effectAllowed}catch(t){}return t.dataTransfer.dropEffect="move"===e||"linkMove"===e?"move":"copy",r(t),A.emit("dragover",t)},dragleave:function(t){return A.emit("dragleave",t)},drop:function(t){return r(t),A.drop(t)},dragend:function(t){return A.emit("dragend",t)}}}],this.clickableElements.forEach(function(e){return A.listeners.push({element:e,events:{click:function(t){return(e!==A.element||t.target===A.element||w.elementInside(t.target,A.element.querySelector(".dz-message")))&&A.hiddenFileInput.click(),!0}}})}),this.enable(),this.options.init.call(this)}},{key:"destroy",value:function(){return this.disable(),this.removeAllFiles(!0),(null!=this.hiddenFileInput?this.hiddenFileInput.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,w.instances.splice(w.instances.indexOf(this),1)}},{key:"updateTotalUploadProgress",value:function(){var t=void 0,e=0,i=0;if(this.getActiveFiles().length){for(var r=0,n=n=this.getActiveFiles();;){if(r>=n.length)break;var A=n[r++];e+=A.upload.bytesSent,i+=A.upload.total}t=100*e/i}else t=100;return this.emit("totaluploadprogress",t,i,e)}},{key:"_getParamName",value:function(t){return"function"==typeof this.options.paramName?this.options.paramName(t):this.options.paramName+(this.options.uploadMultiple?"["+t+"]":"")}},{key:"_renameFile",value:function(t){return"function"!=typeof this.options.renameFile?t.name:this.options.renameFile(t)}},{key:"getFallbackForm",value:function(){var t,e=void 0;if(t=this.getExistingFallback())return t;var i='<div class="dz-fallback">';this.options.dictFallbackText&&(i+="<p>"+this.options.dictFallbackText+"</p>"),i+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>';var r=w.createElement(i);return"FORM"!==this.element.tagName?(e=w.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>')).appendChild(r):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=e?e:r}},{key:"getExistingFallback",value:function(){for(var t=["div","form"],e=0;e<t.length;e++){var i,r=t[e];if(i=function(t){for(var e=0,i=i=t;;){if(e>=i.length)break;var r=i[e++];if(/(^| )fallback($| )/.test(r.className))return r}}(this.element.getElementsByTagName(r)))return i}}},{key:"setupEventListeners",value:function(){return this.listeners.map(function(r){return function(){var t=[];for(var e in r.events){var i=r.events[e];t.push(r.element.addEventListener(e,i,!1))}return t}()})}},{key:"removeEventListeners",value:function(){return this.listeners.map(function(r){return function(){var t=[];for(var e in r.events){var i=r.events[e];t.push(r.element.removeEventListener(e,i,!1))}return t}()})}},{key:"disable",value:function(){var e=this;return this.clickableElements.forEach(function(t){return t.classList.remove("dz-clickable")}),this.removeEventListeners(),this.files.map(function(t){return e.cancelUpload(t)})}},{key:"enable",value:function(){return this.clickableElements.forEach(function(t){return t.classList.add("dz-clickable")}),this.setupEventListeners()}},{key:"filesize",value:function(t){var e=0,i="b";if(0<t){for(var r=["tb","gb","mb","kb","b"],n=0;n<r.length;n++){var A=r[n];if(t>=Math.pow(this.options.filesizeBase,4-n)/10){e=t/Math.pow(this.options.filesizeBase,4-n),i=A;break}}e=Math.round(10*e)/10}return"<strong>"+e+"</strong> "+this.options.dictFileSizeUnits[i]}},{key:"_updateMaxFilesReachedClass",value:function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")}},{key:"drop",value:function(t){if(t.dataTransfer){this.emit("drop",t);var e=t.dataTransfer.files;if(this.emit("addedfiles",e),e.length){var i=t.dataTransfer.items;i&&i.length&&null!=i[0].webkitGetAsEntry?this._addFilesFromItems(i):this.handleFiles(e)}}}},{key:"paste",value:function(t){if(null!=__guard__(null!=t?t.clipboardData:void 0,function(t){return t.items})){this.emit("paste",t);var e=t.clipboardData.items;return e.length?this._addFilesFromItems(e):void 0}}},{key:"handleFiles",value:function(t){var e=this;return t.map(function(t){return e.addFile(t)})}},{key:"_addFilesFromItems",value:function(A){var s=this;return function(){for(var t=[],e=0,i=i=A;;){if(e>=i.length)break;var r,n=i[e++];null!=n.webkitGetAsEntry&&(r=n.webkitGetAsEntry())?r.isFile?t.push(s.addFile(n.getAsFile())):r.isDirectory?t.push(s._addFilesFromDirectory(r,r.name)):t.push(void 0):null==n.getAsFile||null!=n.kind&&"file"!==n.kind?t.push(void 0):t.push(s.addFile(n.getAsFile()))}return t}()}},{key:"_addFilesFromDirectory",value:function(t,A){var s=this,e=t.createReader(),i=function(e){return __guardMethod__(console,"log",function(t){return t.log(e)})};return function n(){return e.readEntries(function(t){if(0<t.length){for(var e=0,i=i=t;;){if(e>=i.length)break;var r=i[e++];r.isFile?r.file(function(t){if(!s.options.ignoreHiddenFiles||"."!==t.name.substring(0,1))return t.fullPath=A+"/"+t.name,s.addFile(t)}):r.isDirectory&&s._addFilesFromDirectory(r,A+"/"+r.name)}n()}return null},i)}()}},{key:"accept",value:function(t,e){return t.size>1024*this.options.maxFilesize*1024?e(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(t.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):w.isValidFile(t,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(e(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",t)):this.options.accept.call(this,t,e):e(this.options.dictInvalidFileType)}},{key:"addFile",value:function(e){var i=this;return e.upload={uuid:w.uuidv4(),progress:0,total:e.size,bytesSent:0,filename:this._renameFile(e),chunked:this.options.chunking&&(this.options.forceChunking||e.size>this.options.chunkSize),totalChunkCount:Math.ceil(e.size/this.options.chunkSize)},this.files.push(e),e.status=w.ADDED,this.emit("addedfile",e),this._enqueueThumbnail(e),this.accept(e,function(t){return t?(e.accepted=!1,i._errorProcessing([e],t)):(e.accepted=!0,i.options.autoQueue&&i.enqueueFile(e)),i._updateMaxFilesReachedClass()})}},{key:"enqueueFiles",value:function(t){for(var e=0,i=i=t;;){if(e>=i.length)break;var r=i[e++];this.enqueueFile(r)}return null}},{key:"enqueueFile",value:function(t){var e=this;if(t.status!==w.ADDED||!0!==t.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(t.status=w.QUEUED,this.options.autoProcessQueue)return setTimeout(function(){return e.processQueue()},0)}},{key:"_enqueueThumbnail",value:function(t){var e=this;if(this.options.createImageThumbnails&&t.type.match(/image.*/)&&t.size<=1024*this.options.maxThumbnailFilesize*1024)return this._thumbnailQueue.push(t),setTimeout(function(){return e._processThumbnailQueue()},0)}},{key:"_processThumbnailQueue",value:function(){var e=this;if(!this._processingThumbnail&&0!==this._thumbnailQueue.length){this._processingThumbnail=!0;var i=this._thumbnailQueue.shift();return this.createThumbnail(i,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,!0,function(t){return e.emit("thumbnail",i,t),e._processingThumbnail=!1,e._processThumbnailQueue()})}}},{key:"removeFile",value:function(t){if(t.status===w.UPLOADING&&this.cancelUpload(t),this.files=without(this.files,t),this.emit("removedfile",t),0===this.files.length)return this.emit("reset")}},{key:"removeAllFiles",value:function(t){null==t&&(t=!1);for(var e=0,i=i=this.files.slice();;){if(e>=i.length)break;var r=i[e++];(r.status!==w.UPLOADING||t)&&this.removeFile(r)}return null}},{key:"resizeImage",value:function(n,t,e,i,A){var s=this;return this.createThumbnail(n,t,e,i,!1,function(t,e){if(null===e)return A(n);var i=s.options.resizeMimeType;null==i&&(i=n.type);var r=e.toDataURL(i,s.options.resizeQuality);return"image/jpeg"!==i&&"image/jpg"!==i||(r=ExifRestore.restore(n.dataURL,r)),A(w.dataURItoBlob(r))})}},{key:"createThumbnail",value:function(t,e,i,r,n,A){var s=this,o=new FileReader;return o.onload=function(){return t.dataURL=o.result,"image/svg+xml"===t.type?void(null!=A&&A(o.result)):s.createThumbnailFromUrl(t,e,i,r,n,A)},o.readAsDataURL(t)}},{key:"createThumbnailFromUrl",value:function(A,s,o,a,e,l,t){var c=this,h=document.createElement("img");return t&&(h.crossOrigin=t),h.onload=function(){var t=function(t){return t(1)};return"undefined"!=typeof EXIF&&null!==EXIF&&e&&(t=function(t){return EXIF.getData(h,function(){return t(EXIF.getTag(this,"Orientation"))})}),t(function(t){A.width=h.width,A.height=h.height;var e=c.options.resize.call(c,A,s,o,a),i=document.createElement("canvas"),r=i.getContext("2d");switch(i.width=e.trgWidth,i.height=e.trgHeight,4<t&&(i.width=e.trgHeight,i.height=e.trgWidth),t){case 2:r.translate(i.width,0),r.scale(-1,1);break;case 3:r.translate(i.width,i.height),r.rotate(Math.PI);break;case 4:r.translate(0,i.height),r.scale(1,-1);break;case 5:r.rotate(.5*Math.PI),r.scale(1,-1);break;case 6:r.rotate(.5*Math.PI),r.translate(0,-i.height);break;case 7:r.rotate(.5*Math.PI),r.translate(i.width,-i.height),r.scale(-1,1);break;case 8:r.rotate(-.5*Math.PI),r.translate(-i.width,0)}drawImageIOSFix(r,h,null!=e.srcX?e.srcX:0,null!=e.srcY?e.srcY:0,e.srcWidth,e.srcHeight,null!=e.trgX?e.trgX:0,null!=e.trgY?e.trgY:0,e.trgWidth,e.trgHeight);var n=i.toDataURL("image/png");if(null!=l)return l(n,i)})},null!=l&&(h.onerror=l),h.src=A.dataURL}},{key:"processQueue",value:function(){var t=this.options.parallelUploads,e=this.getUploadingFiles().length,i=e;if(!(t<=e)){var r=this.getQueuedFiles();if(0<r.length){if(this.options.uploadMultiple)return this.processFiles(r.slice(0,t-e));for(;i<t;){if(!r.length)return;this.processFile(r.shift()),i++}}}}},{key:"processFile",value:function(t){return this.processFiles([t])}},{key:"processFiles",value:function(t){for(var e=0,i=i=t;;){if(e>=i.length)break;var r=i[e++];r.processing=!0,r.status=w.UPLOADING,this.emit("processing",r)}return this.options.uploadMultiple&&this.emit("processingmultiple",t),this.uploadFiles(t)}},{key:"_getFilesWithXhr",value:function(e){return this.files.filter(function(t){return t.xhr===e}).map(function(t){return t})}},{key:"cancelUpload",value:function(t){if(t.status===w.UPLOADING){for(var e=this._getFilesWithXhr(t.xhr),i=0,r=r=e;;){if(i>=r.length)break;r[i++].status=w.CANCELED}void 0!==t.xhr&&t.xhr.abort();for(var n=0,A=A=e;;){if(n>=A.length)break;var s=A[n++];this.emit("canceled",s)}this.options.uploadMultiple&&this.emit("canceledmultiple",e)}else t.status!==w.ADDED&&t.status!==w.QUEUED||(t.status=w.CANCELED,this.emit("canceled",t),this.options.uploadMultiple&&this.emit("canceledmultiple",[t]));if(this.options.autoProcessQueue)return this.processQueue()}},{key:"resolveOption",value:function(t){if("function"==typeof t){for(var e=arguments.length,i=Array(1<e?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];return t.apply(this,i)}return t}},{key:"uploadFile",value:function(t){return this.uploadFiles([t])}},{key:"uploadFiles",value:function(o){var a=this;this._transformFiles(o,function(t){if(o[0].upload.chunked){var n=o[0],A=t[0];n.upload.chunks=[];var r=function(){for(var t=0;void 0!==n.upload.chunks[t];)t++;if(!(t>=n.upload.totalChunkCount)){0;var e=t*a.options.chunkSize,i=Math.min(e+a.options.chunkSize,n.size),r={name:a._getParamName(0),data:A.webkitSlice?A.webkitSlice(e,i):A.slice(e,i),filename:n.upload.filename,chunkIndex:t};n.upload.chunks[t]={file:n,index:t,dataBlock:r,status:w.UPLOADING,progress:0,retries:0},a._uploadData(o,[r])}};if(n.upload.finishedChunkUpload=function(t){var e=!0;t.status=w.SUCCESS,t.dataBlock=null;for(var i=0;i<n.upload.totalChunkCount;i++){if(void 0===n.upload.chunks[i])return r();n.upload.chunks[i].status!==w.SUCCESS&&(e=!1)}e&&a.options.chunksUploaded(n,function(){a._finished(o,"",null)})},a.options.parallelChunkUploads)for(var e=0;e<n.upload.totalChunkCount;e++)r();else r()}else{for(var i=[],s=0;s<o.length;s++)i[s]={name:a._getParamName(s),data:t[s],filename:o[s].upload.filename};a._uploadData(o,i)}})}},{key:"_getChunk",value:function(t,e){for(var i=0;i<t.upload.totalChunkCount;i++)if(void 0!==t.upload.chunks[i]&&t.upload.chunks[i].xhr===e)return t.upload.chunks[i]}},{key:"_uploadData",value:function(e,t){for(var i=this,r=new XMLHttpRequest,n=0,A=A=e;;){if(n>=A.length)break;A[n++].xhr=r}e[0].upload.chunked&&(e[0].upload.chunks[t[0].chunkIndex].xhr=r);var s=this.resolveOption(this.options.method,e),o=this.resolveOption(this.options.url,e);r.open(s,o,!0),r.timeout=this.resolveOption(this.options.timeout,e),r.withCredentials=!!this.options.withCredentials,r.onload=function(t){i._finishedUploading(e,r,t)},r.onerror=function(){i._handleUploadError(e,r)},(null!=r.upload?r.upload:r).onprogress=function(t){return i._updateFilesUploadProgress(e,r,t)};var a={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};for(var l in this.options.headers&&w.extend(a,this.options.headers),a){var c=a[l];c&&r.setRequestHeader(l,c)}var h=new FormData;if(this.options.params){var u=this.options.params;for(var f in"function"==typeof u&&(u=u.call(this,e,r,e[0].upload.chunked?this._getChunk(e[0],r):null)),u){var d=u[f];h.append(f,d)}}for(var g=0,p=p=e;;){if(g>=p.length)break;var B=p[g++];this.emit("sending",B,r,h)}this.options.uploadMultiple&&this.emit("sendingmultiple",e,r,h),this._addFormElementData(h);for(var m=0;m<t.length;m++){var v=t[m];h.append(v.name,v.data,v.filename)}this.submitRequest(r,h,e)}},{key:"_transformFiles",value:function(i,r){for(var t=this,n=[],A=0,e=0;e<i.length;e++)!function(e){t.options.transformFile.call(t,i[e],function(t){n[e]=t,++A===i.length&&r(n)})}(e)}},{key:"_addFormElementData",value:function(t){if("FORM"===this.element.tagName)for(var e=0,i=i=this.element.querySelectorAll("input, textarea, select, button");;){if(e>=i.length)break;var r=i[e++],n=r.getAttribute("name"),A=r.getAttribute("type");if(A&&(A=A.toLowerCase()),null!=n)if("SELECT"===r.tagName&&r.hasAttribute("multiple"))for(var s=0,o=o=r.options;;){if(s>=o.length)break;var a=o[s++];a.selected&&t.append(n,a.value)}else(!A||"checkbox"!==A&&"radio"!==A||r.checked)&&t.append(n,r.value)}}},{key:"_updateFilesUploadProgress",value:function(t,e,i){var r=void 0;if(void 0!==i){if(r=100*i.loaded/i.total,t[0].upload.chunked){var n=t[0],A=this._getChunk(n,e);A.progress=r,A.total=i.total,A.bytesSent=i.loaded,n.upload.progress=0,n.upload.total=0;for(var s=n.upload.bytesSent=0;s<n.upload.totalChunkCount;s++)void 0!==n.upload.chunks[s]&&void 0!==n.upload.chunks[s].progress&&(n.upload.progress+=n.upload.chunks[s].progress,n.upload.total+=n.upload.chunks[s].total,n.upload.bytesSent+=n.upload.chunks[s].bytesSent);n.upload.progress=n.upload.progress/n.upload.totalChunkCount}else for(var o=0,a=a=t;;){if(o>=a.length)break;var l=a[o++];l.upload.progress=r,l.upload.total=i.total,l.upload.bytesSent=i.loaded}for(var c=0,h=h=t;;){if(c>=h.length)break;var u=h[c++];this.emit("uploadprogress",u,u.upload.progress,u.upload.bytesSent)}}else{var f=!0;r=100;for(var d=0,g=g=t;;){if(d>=g.length)break;var p=g[d++];100===p.upload.progress&&p.upload.bytesSent===p.upload.total||(f=!1),p.upload.progress=r,p.upload.bytesSent=p.upload.total}if(f)return;for(var B=0,m=m=t;;){if(B>=m.length)break;var v=m[B++];this.emit("uploadprogress",v,r,v.upload.bytesSent)}}}},{key:"_finishedUploading",value:function(t,e,i){var r=void 0;if(t[0].status!==w.CANCELED&&4===e.readyState){if("arraybuffer"!==e.responseType&&"blob"!==e.responseType&&(r=e.responseText,e.getResponseHeader("content-type")&&~e.getResponseHeader("content-type").indexOf("application/json")))try{r=JSON.parse(r)}catch(t){i=t,r="Invalid JSON response from server."}this._updateFilesUploadProgress(t),200<=e.status&&e.status<300?t[0].upload.chunked?t[0].upload.finishedChunkUpload(this._getChunk(t[0],e)):this._finished(t,r,i):this._handleUploadError(t,e,r)}}},{key:"_handleUploadError",value:function(t,e,i){if(t[0].status!==w.CANCELED){if(t[0].upload.chunked&&this.options.retryChunks){var r=this._getChunk(t[0],e);if(r.retries++<this.options.retryChunksLimit)return void this._uploadData(t,[r.dataBlock]);console.warn("Retried this chunk too often. Giving up.")}for(var n=0,A=A=t;!(n>=A.length);)A[n++],this._errorProcessing(t,i||this.options.dictResponseError.replace("{{statusCode}}",e.status),e)}}},{key:"submitRequest",value:function(t,e,i){t.send(e)}},{key:"_finished",value:function(t,e,i){for(var r=0,n=n=t;;){if(r>=n.length)break;var A=n[r++];A.status=w.SUCCESS,this.emit("success",A,e,i),this.emit("complete",A)}if(this.options.uploadMultiple&&(this.emit("successmultiple",t,e,i),this.emit("completemultiple",t)),this.options.autoProcessQueue)return this.processQueue()}},{key:"_errorProcessing",value:function(t,e,i){for(var r=0,n=n=t;;){if(r>=n.length)break;var A=n[r++];A.status=w.ERROR,this.emit("error",A,e,i),this.emit("complete",A)}if(this.options.uploadMultiple&&(this.emit("errormultiple",t,e,i),this.emit("completemultiple",t)),this.options.autoProcessQueue)return this.processQueue()}}],[{key:"uuidv4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})}}]),w}();Dropzone.initClass(),Dropzone.version="5.2.0",Dropzone.options={},Dropzone.optionsForElement=function(t){return t.getAttribute("id")?Dropzone.options[camelize(t.getAttribute("id"))]:void 0},Dropzone.instances=[],Dropzone.forElement=function(t){if("string"==typeof t&&(t=document.querySelector(t)),null==(null!=t?t.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return t.dropzone},Dropzone.autoDiscover=!0,Dropzone.discover=function(){var A=void 0;if(document.querySelectorAll)A=document.querySelectorAll(".dropzone");else{A=[];var t=function(n){return function(){for(var t=[],e=0,i=i=n;;){if(e>=i.length)break;var r=i[e++];/(^| )dropzone($| )/.test(r.className)?t.push(A.push(r)):t.push(void 0)}return t}()};t(document.getElementsByTagName("div")),t(document.getElementsByTagName("form"))}return function(){for(var t=[],e=0,i=i=A;;){if(e>=i.length)break;var r=i[e++];!1!==Dropzone.optionsForElement(r)?t.push(new Dropzone(r)):t.push(void 0)}return t}()},Dropzone.blacklistedBrowsers=[/opera.*(Macintosh|Windows Phone).*version\/12/i],Dropzone.isBrowserSupported=function(){var t=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(var e=0,i=i=Dropzone.blacklistedBrowsers;;){if(e>=i.length)break;i[e++].test(navigator.userAgent)&&(t=!1)}else t=!1;else t=!1;return t},Dropzone.dataURItoBlob=function(t){for(var e=atob(t.split(",")[1]),i=t.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(e.length),n=new Uint8Array(r),A=0,s=e.length,o=0<=s;o?A<=s:s<=A;o?A++:A--)n[A]=e.charCodeAt(A);return new Blob([r],{type:i})};var without=function(t,e){return t.filter(function(t){return t!==e}).map(function(t){return t})},camelize=function(t){return t.replace(/[\-_](\w)/g,function(t){return t.charAt(1).toUpperCase()})};Dropzone.createElement=function(t){var e=document.createElement("div");return e.innerHTML=t,e.childNodes[0]},Dropzone.elementInside=function(t,e){if(t===e)return!0;for(;t=t.parentNode;)if(t===e)return!0;return!1},Dropzone.getElement=function(t,e){var i=void 0;if("string"==typeof t?i=document.querySelector(t):null!=t.nodeType&&(i=t),null==i)throw new Error("Invalid `"+e+"` option provided. Please provide a CSS selector or a plain HTML element.");return i},Dropzone.getElements=function(t,e){var i=void 0,r=void 0;if(t instanceof Array){r=[];try{for(var n=0,A=A=t;!(n>=A.length);)i=A[n++],r.push(this.getElement(i,e))}catch(t){r=null}}else if("string"==typeof t){r=[];for(var s=0,o=o=document.querySelectorAll(t);!(s>=o.length);)i=o[s++],r.push(i)}else null!=t.nodeType&&(r=[t]);if(null==r||!r.length)throw new Error("Invalid `"+e+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return r},Dropzone.confirm=function(t,e,i){return window.confirm(t)?e():null!=i?i():void 0},Dropzone.isValidFile=function(t,e){if(!e)return!0;e=e.split(",");for(var i=t.type,r=i.replace(/\/.*$/,""),n=0,A=A=e;;){if(n>=A.length)break;var s=A[n++];if("."===(s=s.trim()).charAt(0)){if(-1!==t.name.toLowerCase().indexOf(s.toLowerCase(),t.name.length-s.length))return!0}else if(/\/\*$/.test(s)){if(r===s.replace(/\/.*$/,""))return!0}else if(i===s)return!0}return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(t){return this.each(function(){return new Dropzone(this,t)})}),"undefined"!=typeof module&&null!==module?module.exports=Dropzone:window.Dropzone=Dropzone,Dropzone.ADDED="added",Dropzone.QUEUED="queued",Dropzone.ACCEPTED=Dropzone.QUEUED,Dropzone.UPLOADING="uploading",Dropzone.PROCESSING=Dropzone.UPLOADING,Dropzone.CANCELED="canceled",Dropzone.ERROR="error",Dropzone.SUCCESS="success";var detectVerticalSquash=function(t){var e=(t.naturalWidth,t.naturalHeight),i=document.createElement("canvas");i.width=1,i.height=e;var r=i.getContext("2d");r.drawImage(t,0,0);for(var n=r.getImageData(1,0,1,e).data,A=0,s=e,o=e;A<o;)0===n[4*(o-1)+3]?s=o:A=o,o=s+A>>1;var a=o/e;return 0===a?1:a},drawImageIOSFix=function(t,e,i,r,n,A,s,o,a,l){var c=detectVerticalSquash(e);return t.drawImage(e,i,r,n,A,s,o,a,l/c)},ExifRestore=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"initClass",value:function(){this.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}},{key:"encode64",value:function(t){for(var e="",i=void 0,r=void 0,n="",A=void 0,s=void 0,o=void 0,a="",l=0;A=(i=t[l++])>>2,s=(3&i)<<4|(r=t[l++])>>4,o=(15&r)<<2|(n=t[l++])>>6,a=63&n,isNaN(r)?o=a=64:isNaN(n)&&(a=64),e=e+this.KEY_STR.charAt(A)+this.KEY_STR.charAt(s)+this.KEY_STR.charAt(o)+this.KEY_STR.charAt(a),i=r=n="",A=s=o=a="",l<t.length;);return e}},{key:"restore",value:function(t,e){if(!t.match("data:image/jpeg;base64,"))return e;var i=this.decode64(t.replace("data:image/jpeg;base64,","")),r=this.slice2Segments(i),n=this.exifManipulation(e,r);return"data:image/jpeg;base64,"+this.encode64(n)}},{key:"exifManipulation",value:function(t,e){var i=this.getExifArray(e),r=this.insertExif(t,i);return new Uint8Array(r)}},{key:"getExifArray",value:function(t){for(var e=void 0,i=0;i<t.length;){if(255===(e=t[i])[0]&225===e[1])return e;i++}return[]}},{key:"insertExif",value:function(t,e){var i=t.replace("data:image/jpeg;base64,",""),r=this.decode64(i),n=r.indexOf(255,3),A=r.slice(0,n),s=r.slice(n),o=A;return(o=o.concat(e)).concat(s)}},{key:"slice2Segments",value:function(t){for(var e=0,i=[];;){if(255===t[e]&218===t[e+1])break;if(255===t[e]&216===t[e+1])e+=2;else{var r=e+(256*t[e+2]+t[e+3])+2,n=t.slice(e,r);i.push(n),e=r}if(e>t.length)break}return i}},{key:"decode64",value:function(t){var e=void 0,i=void 0,r="",n=void 0,A=void 0,s="",o=0,a=[];for(/[^A-Za-z0-9\+\/\=]/g.exec(t)&&console.warn("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");e=this.KEY_STR.indexOf(t.charAt(o++))<<2|(n=this.KEY_STR.indexOf(t.charAt(o++)))>>4,i=(15&n)<<4|(A=this.KEY_STR.indexOf(t.charAt(o++)))>>2,r=(3&A)<<6|(s=this.KEY_STR.indexOf(t.charAt(o++))),a.push(e),64!==A&&a.push(i),64!==s&&a.push(r),e=i=r="",n=A=s="",o<t.length;);return a}}]),t}();ExifRestore.initClass();var contentLoaded=function(i,r){var n=!1,t=!0,A=i.document,s=A.documentElement,e=A.addEventListener?"addEventListener":"attachEvent",o=A.addEventListener?"removeEventListener":"detachEvent",a=A.addEventListener?"":"on",l=function t(e){if("readystatechange"!==e.type||"complete"===A.readyState)return("load"===e.type?i:A)[o](a+e.type,t,!1),!n&&(n=!0)?r.call(i,e.type||e):void 0};if("complete"!==A.readyState){if(A.createEventObject&&s.doScroll){try{t=!i.frameElement}catch(i){}t&&function e(){try{s.doScroll("left")}catch(t){return void setTimeout(e,50)}return l("poll")}()}return A[e](a+"DOMContentLoaded",l,!1),A[e](a+"readystatechange",l,!1),i[e](a+"load",l,!1)}};Dropzone._autoDiscoverFunction=function(){if(Dropzone.autoDiscover)return Dropzone.discover()},contentLoaded(window,Dropzone._autoDiscoverFunction);var fabric=fabric||{version:"2.0.0-rc.3"};function resizeCanvasIfNeeded(t){var e=t.targetCanvas,i=e.width,r=e.height,n=t.destinationWidth,A=t.destinationHeight;(i!==n||r!==A)&&(e.width=n,e.height=A)}function copyGLTo2DDrawImage(t,e){var i=t.canvas,r=e.targetCanvas,n=r.getContext("2d");n.translate(0,r.height),n.scale(1,-1);var A=i.height-r.height;n.drawImage(i,0,A,r.width,r.height,0,0,r.width,r.height)}function copyGLTo2DPutImageData(t,e){var i=e.targetCanvas.getContext("2d"),r=e.destinationWidth,n=e.destinationHeight,A=r*n*4,s=new Uint8Array(this.imageBuffer,0,A),o=new Uint8ClampedArray(this.imageBuffer,0,A);t.readPixels(0,0,r,n,t.RGBA,t.UNSIGNED_BYTE,s);var a=new ImageData(o,r,n);i.putImageData(a,0,0)}function Addtext(){var t=new fabric.IText("Aggiungi il testo qua",{fontSize:16,left:20,top:20});(mySide="Rcanvas"==position?retro:fronte).add(t).setActiveObject(t)}function setStyle(t,e,i){if(t.setSelectionStyles&&t.isEditing){var r={};r[e]=i,t.setSelectionStyles(r).setCoords()}else t[e]=i;mySide.renderAll()}function getStyle(t,e){return t.getSelectionStyles&&t.isEditing?t.getSelectionStyles()[e]:t[e]}function addHandler(t,e,i){document.getElementById(t)[i||"onclick"]=function(){(obj=mySide.getActiveObject())&&(e.call(this,obj),mySide.renderAll())}}"undefined"!=typeof exports&&(exports.fabric=fabric),"undefined"!=typeof document&&"undefined"!=typeof window?(fabric.document=document,fabric.window=window):(fabric.document=require("jsdom").jsdom(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]}}),fabric.jsdomImplForWrapper=require("jsdom/lib/jsdom/living/generated/utils").implForWrapper,fabric.window=fabric.document.defaultView,DOMParser=require("xmldom").DOMParser),fabric.isTouchSupported="ontouchstart"in fabric.window,fabric.isLikelyNode="undefined"!=typeof Buffer&&"undefined"==typeof window,fabric.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","instantiated_by_use"],fabric.DPI=96,fabric.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?)",fabric.fontPaths={},fabric.iMatrix=[1,0,0,1,0,0],fabric.canvasModule="canvas",fabric.perfLimitSizeTotal=2097152,fabric.maxCacheSideLimit=4096,fabric.minCacheSideLimit=256,fabric.charWidthsCache={},fabric.textureSize=2048,fabric.enableGLFiltering=!0,fabric.devicePixelRatio=fabric.window.devicePixelRatio||fabric.window.webkitDevicePixelRatio||fabric.window.mozDevicePixelRatio||1,fabric.browserShadowBlurConstant=1,fabric.initFilterBackend=function(){return fabric.enableGLFiltering&&fabric.isWebglSupported&&fabric.isWebglSupported(fabric.textureSize)?(console.log("max texture size: "+fabric.maxTextureSize),new fabric.WebglFilterBackend({tileSize:fabric.textureSize})):fabric.Canvas2dFilterBackend?new fabric.Canvas2dFilterBackend:void 0},"undefined"!=typeof document&&"undefined"!=typeof window&&(window.fabric=fabric),function(){function r(t,e){if(this.__eventListeners[t]){var i=this.__eventListeners[t];e?i[i.indexOf(e)]=!1:fabric.util.array.fill(i,!1)}}function t(t,e){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var i in t)this.on(i,t[i]);else this.__eventListeners[t]||(this.__eventListeners[t]=[]),this.__eventListeners[t].push(e);return this}function e(t,e){if(this.__eventListeners){if(0===arguments.length)for(t in this.__eventListeners)r.call(this,t);else if(1===arguments.length&&"object"==typeof t)for(var i in t)r.call(this,i,t[i]);else r.call(this,t,e);return this}}function i(t,e){if(this.__eventListeners){var i=this.__eventListeners[t];if(i){for(var r=0,n=i.length;r<n;r++)i[r]&&i[r].call(this,e||{});return this.__eventListeners[t]=i.filter(function(t){return!1!==t}),this}}}fabric.Observable={observe:t,stopObserving:e,fire:i,on:t,off:e,trigger:i}}(),fabric.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var t=0,e=arguments.length;t<e;t++)this._onObjectAdded(arguments[t]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(t,e,i){var r=this.getObjects();return i?r[e]=t:r.splice(e,0,t),this._onObjectAdded&&this._onObjectAdded(t),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var t,e=this.getObjects(),i=!1,r=0,n=arguments.length;r<n;r++)-1!==(t=e.indexOf(arguments[r]))&&(i=!0,e.splice(t,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[r]));return this.renderOnAddRemove&&i&&this.requestRenderAll(),this},forEachObject:function(t,e){for(var i=this.getObjects(),r=0,n=i.length;r<n;r++)t.call(e,i[r],r,i);return this},getObjects:function(e){return void 0===e?this._objects:this._objects.filter(function(t){return t.type===e})},item:function(t){return this.getObjects()[t]},isEmpty:function(){return 0===this.getObjects().length},size:function(){return this.getObjects().length},contains:function(t){return-1<this.getObjects().indexOf(t)},complexity:function(){return this.getObjects().reduce(function(t,e){return t+(e.complexity?e.complexity():0)},0)}},fabric.CommonMethods={_setOptions:function(t){for(var e in t)this.set(e,t[e])},_initGradient:function(t,e){!t||!t.colorStops||t instanceof fabric.Gradient||this.set(e,new fabric.Gradient(t))},_initPattern:function(t,e,i){!t||!t.source||t instanceof fabric.Pattern?i&&i():this.set(e,new fabric.Pattern(t,i))},_initClipping:function(t){if(t.clipTo&&"string"==typeof t.clipTo){var e=fabric.util.getFunctionBody(t.clipTo);void 0!==e&&(this.clipTo=new Function("ctx",e))}},_setObject:function(t){for(var e in t)this._set(e,t[e])},set:function(t,e){return"object"==typeof t?this._setObject(t):"function"==typeof e&&"clipTo"!==t?this._set(t,e(this.get(t))):this._set(t,e),this},_set:function(t,e){this[t]=e},toggle:function(t){var e=this.get(t);return"boolean"==typeof e&&this.set(t,!e),this},get:function(t){return this[t]}},function(A){var f=Math.sqrt,d=Math.atan2,s=Math.pow,o=Math.abs,a=Math.PI/180;fabric.util={removeFromArray:function(t,e){var i=t.indexOf(e);return-1!==i&&t.splice(i,1),t},getRandomInt:function(t,e){return Math.floor(Math.random()*(e-t+1))+t},degreesToRadians:function(t){return t*a},radiansToDegrees:function(t){return t/a},rotatePoint:function(t,e,i){t.subtractEquals(e);var r=fabric.util.rotateVector(t,i);return new fabric.Point(r.x,r.y).addEquals(e)},rotateVector:function(t,e){var i=Math.sin(e),r=Math.cos(e);return{x:t.x*r-t.y*i,y:t.x*i+t.y*r}},transformPoint:function(t,e,i){return i?new fabric.Point(e[0]*t.x+e[2]*t.y,e[1]*t.x+e[3]*t.y):new fabric.Point(e[0]*t.x+e[2]*t.y+e[4],e[1]*t.x+e[3]*t.y+e[5])},makeBoundingBoxFromPoints:function(t){var e=[t[0].x,t[1].x,t[2].x,t[3].x],i=fabric.util.array.min(e),r=fabric.util.array.max(e)-i,n=[t[0].y,t[1].y,t[2].y,t[3].y],A=fabric.util.array.min(n);return{left:i,top:A,width:r,height:fabric.util.array.max(n)-A}},invertTransform:function(t){var e=1/(t[0]*t[3]-t[1]*t[2]),i=[e*t[3],-e*t[1],-e*t[2],e*t[0]],r=fabric.util.transformPoint({x:t[4],y:t[5]},i,!0);return i[4]=-r.x,i[5]=-r.y,i},toFixed:function(t,e){return parseFloat(Number(t).toFixed(e))},parseUnit:function(t,e){var i=/\D{0,2}$/.exec(t),r=parseFloat(t);switch(e||(e=fabric.Text.DEFAULT_SVG_FONT_SIZE),i[0]){case"mm":return r*fabric.DPI/25.4;case"cm":return r*fabric.DPI/2.54;case"in":return r*fabric.DPI;case"pt":return r*fabric.DPI/72;case"pc":return r*fabric.DPI/72*12;case"em":return r*e;default:return r}},falseFunction:function(){return!1},getKlass:function(t,e){return t=fabric.util.string.camelize(t.charAt(0).toUpperCase()+t.slice(1)),fabric.util.resolveNamespace(e)[t]},getSvgAttributes:function(t){var e=["instantiated_by_use","style","id","class"];switch(t){case"linearGradient":e=e.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":e=e.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":e=e.concat(["offset","stop-color","stop-opacity"])}return e},resolveNamespace:function(t){if(!t)return fabric;var e,i=t.split("."),r=i.length,n=A||fabric.window;for(e=0;e<r;++e)n=n[i[e]];return n},loadImage:function(t,e,i,r){if(t){var n=fabric.util.createImage(),A=function(){e&&e.call(i,n),n=n.onload=n.onerror=null};n.onload=A,n.onerror=function(){fabric.log("Error loading "+n.src),e&&e.call(i,null,!0),n=n.onload=n.onerror=null},0!==t.indexOf("data")&&r&&(n.crossOrigin=r),"data:image/svg"===t.substring(0,14)&&(n.onload=null,fabric.util.loadImageInDom(n,A)),n.src=t}else e&&e.call(i,t)},loadImageInDom:function(t,e){var i=fabric.document.createElement("div");i.style.width=i.style.height="1px",i.style.left=i.style.top="-100%",i.style.position="absolute",i.appendChild(t),fabric.document.querySelector("body").appendChild(i),t.onload=function(){e(),i.parentNode.removeChild(i),i=null}},enlivenObjects:function(t,e,n,A){function s(){++i===r&&e&&e(o)}var o=[],i=0,r=(t=t||[]).length;return r?void t.forEach(function(i,r){i&&i.type?fabric.util.getKlass(i.type,n).fromObject(i,function(t,e){e||(o[r]=t),A&&A(i,t,e),s()}):s()}):void(e&&e(o))},enlivenPatterns:function(t,e){function i(){++n===A&&e&&e(r)}var r=[],n=0,A=(t=t||[]).length;return A?void t.forEach(function(t,e){t&&t.source?new fabric.Pattern(t,function(t){r[e]=t,i()}):(r[e]=t,i())}):void(e&&e(r))},groupSVGElements:function(t,e,i){var r;return 1===t.length?t[0]:(e&&(e.width&&e.height?e.centerPoint={x:e.width/2,y:e.height/2}:(delete e.width,delete e.height)),r=new fabric.Group(t,e),void 0!==i&&(r.sourcePath=i),r)},populateWithProperties:function(t,e,i){if(i&&"[object Array]"===Object.prototype.toString.call(i))for(var r=0,n=i.length;r<n;r++)i[r]in t&&(e[i[r]]=t[i[r]])},drawDashedLine:function(t,e,i,r,n,A){var s=r-e,o=n-i,a=f(s*s+o*o),l=d(o,s),c=A.length,h=0,u=!0;for(t.save(),t.translate(e,i),t.moveTo(0,0),t.rotate(l),e=0;e<a;)a<(e+=A[h++%c])&&(e=a),t[u?"lineTo":"moveTo"](e,0),u=!u;t.restore()},createCanvasElement:function(){return fabric.document.createElement("canvas")},createImage:function(){return fabric.document.createElement("img")},clipContext:function(t,e){e.save(),e.beginPath(),t.clipTo(e),e.clip()},multiplyTransformMatrices:function(t,e,i){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],i?0:t[0]*e[4]+t[2]*e[5]+t[4],i?0:t[1]*e[4]+t[3]*e[5]+t[5]]},qrDecompose:function(t){var e=d(t[1],t[0]),i=s(t[0],2)+s(t[1],2),r=f(i),n=(t[0]*t[3]-t[2]*t[1])/r,A=d(t[0]*t[2]+t[1]*t[3],i);return{angle:e/a,scaleX:r,scaleY:n,skewX:A/a,skewY:0,translateX:t[4],translateY:t[5]}},customTransformMatrix:function(t,e,i){var r=[1,0,o(Math.tan(i*a)),1],n=[o(t),0,0,o(e)];return fabric.util.multiplyTransformMatrices(n,r,!0)},resetObjectTransform:function(t){t.scaleX=1,t.scaleY=1,t.skewX=0,t.skewY=0,t.flipX=!1,t.flipY=!1,t.rotate(0)},getFunctionBody:function(t){return(String(t).match(/function[^{]*\{([\s\S]*)\}/)||{})[1]},isTransparent:function(t,e,i,r){0<r&&(r<e?e-=r:e=0,r<i?i-=r:i=0);var n,A=!0,s=t.getImageData(e,i,2*r||1,2*r||1),o=s.data.length;for(n=3;n<o&&!1!==(A=s.data[n]<=0);n+=4);return s=null,A},parsePreserveAspectRatioAttribute:function(t){var e,i="meet",r=t.split(" ");return r&&r.length&&("meet"!==(i=r.pop())&&"slice"!==i?(e=i,i="meet"):r.length&&(e=r.pop())),{meetOrSlice:i,alignX:"none"!==e?e.slice(1,4):"none",alignY:"none"!==e?e.slice(5,8):"none"}},clearFabricFontCache:function(t){t?fabric.charWidthsCache[t]&&delete fabric.charWidthsCache[t]:fabric.charWidthsCache={}},limitDimsByArea:function(t,e){var i=Math.sqrt(e*t),r=Math.floor(e/i);return{x:Math.floor(i),y:r}},capValue:function(t,e,i){return Math.max(t,Math.min(e,i))},findScaleToFit:function(t,e){return Math.min(e.width/t.width,e.height/t.height)},findScaleToCover:function(t,e){return Math.max(e.width/t.width,e.height/t.height)}}}("undefined"!=typeof exports?exports:this),function(){function p(t,e,i,r,n,A,s){var o=N.call(arguments);if(L[o])return L[o];var a=Math.PI,l=s*a/180,c=Math.sin(l),h=Math.cos(l),u=0,f=0,d=-h*t*.5-c*e*.5,g=-h*e*.5+c*t*.5,p=(i=Math.abs(i))*i,B=(r=Math.abs(r))*r,m=g*g,v=d*d,w=p*B-p*m-B*v,C=0;if(w<0){var b=Math.sqrt(1-w/(p*B));i*=b,r*=b}else C=(n===A?-1:1)*Math.sqrt(w/(p*m+B*v));var _=C*i*g/r,y=-C*r*d/i,E=h*_-c*y+.5*t,Q=c*_+h*y+.5*e,F=k(1,0,(d-_)/i,(g-y)/r),U=k((d-_)/i,(g-y)/r,(-d-_)/i,(-g-y)/r);0===A&&0<U?U-=2*a:1===A&&U<0&&(U+=2*a);for(var T=Math.ceil(Math.abs(U/a*2)),S=[],x=U/T,O=8/3*Math.sin(x/4)*Math.sin(x/4)/Math.sin(x/2),H=F+x,I=0;I<T;I++)S[I]=D(F,H,h,c,i,r,E,Q,O,u,f),u=S[I][4],f=S[I][5],F=H,H+=x;return L[o]=S}function D(t,e,i,r,n,A,s,o,a,l,c){var h=N.call(arguments);if(b[h])return b[h];var u=Math.cos(t),f=Math.sin(t),d=Math.cos(e),g=Math.sin(e),p=i*n*d-r*A*g+s,B=r*n*d+i*A*g+o,m=l+a*(-i*n*f-r*A*u),v=c+a*(-r*n*f+i*A*u),w=p+a*(i*n*g+r*A*d),C=B+a*(r*n*g-i*A*d);return b[h]=[m,v,w,C,p,B],b[h]}function k(t,e,i,r){var n=Math.atan2(e,t),A=Math.atan2(r,i);return n<=A?A-n:2*Math.PI-(n-A)}function B(t,e,i,r,n,A,s,o){var a=N.call(arguments);if(S[a])return S[a];var l,c,h,u,f,d,g,p,B=Math.sqrt,m=Math.min,v=Math.max,w=Math.abs,C=[],b=[[],[]];c=6*t-12*i+6*n,l=-3*t+9*i-9*n+3*s,h=3*i-3*t;for(var _=0;_<2;++_)if(0<_&&(c=6*e-12*r+6*A,l=-3*e+9*r-9*A+3*o,h=3*r-3*e),w(l)<1e-12){if(w(c)<1e-12)continue;0<(u=-h/c)&&u<1&&C.push(u)}else(g=c*c-4*h*l)<0||(0<(f=(-c+(p=B(g)))/(2*l))&&f<1&&C.push(f),0<(d=(-c-p)/(2*l))&&d<1&&C.push(d));for(var y,E,Q,F=C.length,U=F;F--;)y=(Q=1-(u=C[F]))*Q*Q*t+3*Q*Q*u*i+3*Q*u*u*n+u*u*u*s,b[0][F]=y,E=Q*Q*Q*e+3*Q*Q*u*r+3*Q*u*u*A+u*u*u*o,b[1][F]=E;b[0][U]=t,b[1][U]=e,b[0][U+1]=s,b[1][U+1]=o;var T=[{x:m.apply(null,b[0]),y:m.apply(null,b[1])},{x:v.apply(null,b[0]),y:v.apply(null,b[1])}];return S[a]=T}var L={},b={},S={},N=Array.prototype.join;fabric.util.drawArc=function(t,e,i,r){for(var n=r[0],A=r[1],s=r[2],o=r[3],a=r[4],l=[[],[],[],[]],c=p(r[5]-e,r[6]-i,n,A,o,a,s),h=0,u=c.length;h<u;h++)l[h][0]=c[h][0]+e,l[h][1]=c[h][1]+i,l[h][2]=c[h][2]+e,l[h][3]=c[h][3]+i,l[h][4]=c[h][4]+e,l[h][5]=c[h][5]+i,t.bezierCurveTo.apply(t,l[h])},fabric.util.getBoundsOfArc=function(t,e,i,r,n,A,s,o,a){for(var l,c=0,h=0,u=[],f=p(o-t,a-e,i,r,A,s,n),d=0,g=f.length;d<g;d++)l=B(c,h,f[d][0],f[d][1],f[d][2],f[d][3],f[d][4],f[d][5]),u.push({x:l[0].x+t,y:l[0].y+e}),u.push({x:l[1].x+t,y:l[1].y+e}),c=f[d][4],h=f[d][5];return u},fabric.util.getBoundsOfCurve=B}(),function(){function i(t,e,i){if(t&&0!==t.length){var r=t.length-1,n=e?t[r][e]:t[r];if(e)for(;r--;)i(t[r][e],n)&&(n=t[r][e]);else for(;r--;)i(t[r],n)&&(n=t[r]);return n}}var s=Array.prototype.slice;fabric.util.array={fill:function(t,e){for(var i=t.length;i--;)t[i]=e;return t},invoke:function(t,e){for(var i=s.call(arguments,2),r=[],n=0,A=t.length;n<A;n++)r[n]=i.length?t[n][e].apply(t[n],i):t[n][e].call(t[n]);return r},min:function(t,e){return i(t,e,function(t,e){return t<e})},max:function(t,e){return i(t,e,function(t,e){return e<=t})}}}(),function(){function s(t,e,i){if(i)if(!fabric.isLikelyNode&&e instanceof Element)t=e;else if(e instanceof Array){t=[];for(var r=0,n=e.length;r<n;r++)t[r]=s({},e[r],i)}else if(e&&"object"==typeof e)for(var A in e)e.hasOwnProperty(A)&&(t[A]=s({},e[A],i));else t=e;else for(var A in e)t[A]=e[A];return t}fabric.util.object={extend:s,clone:function(t,e){return s({},t,e)}},fabric.util.object.extend(fabric.util,fabric.Observable)}(),function(){function n(t,e){var i=t.charCodeAt(e);if(isNaN(i))return"";if(i<55296||57343<i)return t.charAt(e);if(55296<=i&&i<=56319){if(t.length<=e+1)throw"High surrogate without following low surrogate";var r=t.charCodeAt(e+1);if(r<56320||57343<r)throw"High surrogate without following low surrogate";return t.charAt(e)+t.charAt(e+1)}if(0===e)throw"Low surrogate without preceding high surrogate";var n=t.charCodeAt(e-1);if(n<55296||56319<n)throw"Low surrogate without preceding high surrogate";return!1}fabric.util.string={camelize:function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},capitalize:function(t,e){return t.charAt(0).toUpperCase()+(e?t.slice(1):t.slice(1).toLowerCase())},escapeXml:function(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},graphemeSplit:function(t){var e,i=0,r=[];for(i=0;i<t.length;i++)!1!==(e=n(t,i))&&r.push(e);return r}}}(),function(){function A(){}function s(t){for(var e=null,i=this;i.constructor.superclass;){var r=i.constructor.superclass.prototype[t];if(i[t]!==r){e=r;break}i=i.constructor.superclass.prototype}return e?1<arguments.length?e.apply(this,o.call(arguments,1)):e.call(this):console.log("tried to callSuper "+t+", method not found in prototype chain",this)}var o=Array.prototype.slice,a=function(){},i=function(){for(var t in{toString:1})if("toString"===t)return!1;return!0}(),l=function(t,r,n){for(var e in r)t.prototype[e]=e in t.prototype&&"function"==typeof t.prototype[e]&&-1<(r[e]+"").indexOf("callSuper")?function(i){return function(){var t=this.constructor.superclass;this.constructor.superclass=n;var e=r[i].apply(this,arguments);return this.constructor.superclass=t,"initialize"!==i?e:void 0}}(e):r[e],i&&(r.toString!==Object.prototype.toString&&(t.prototype.toString=r.toString),r.valueOf!==Object.prototype.valueOf&&(t.prototype.valueOf=r.valueOf))};fabric.util.createClass=function(){function t(){this.initialize.apply(this,arguments)}var e=null,i=o.call(arguments,0);"function"==typeof i[0]&&(e=i.shift()),t.superclass=e,t.subclasses=[],e&&(A.prototype=e.prototype,t.prototype=new A,e.subclasses.push(t));for(var r=0,n=i.length;r<n;r++)l(t,i[r],e);return t.prototype.initialize||(t.prototype.initialize=a),(t.prototype.constructor=t).prototype.callSuper=s,t}}(),function(){function t(t){var e,i,r=Array.prototype.slice.call(arguments,1),n=r.length;for(i=0;i<n;i++)if(e=typeof t[r[i]],!/^(?:function|object|unknown)$/.test(e))return!1;return!0}function A(t,e){return{handler:e,wrappedHandler:(i=t,r=e,function(t){r.call(n(i),t||fabric.window.event)})};var i,r}function e(t,e,i){var r="touchend"===t.type?"changedTouches":"touches";return t[r]&&t[r][0]&&t[r][0][e]-(t[r][0][e]-t[r][0][i])||t[i]}var n,s,i,r,o="unknown",a=(i=0,function(t){return t.__uniqueID||(t.__uniqueID="uniqueID__"+i++)});r={},n=function(t){return r[t]},s=function(t,e){r[t]=e};var l,c,h=t(fabric.document.documentElement,"addEventListener","removeEventListener")&&t(fabric.window,"addEventListener","removeEventListener"),u=t(fabric.document.documentElement,"attachEvent","detachEvent")&&t(fabric.window,"attachEvent","detachEvent"),f={},d={};h?(l=function(t,e,i,r){t&&t.addEventListener(e,i,!u&&r)},c=function(t,e,i,r){t&&t.removeEventListener(e,i,!u&&r)}):u?(l=function(t,e,i){if(t){var r=a(t);s(r,t),f[r]||(f[r]={}),f[r][e]||(f[r][e]=[]);var n=A(r,i);f[r][e].push(n),t.attachEvent("on"+e,n.wrappedHandler)}},c=function(t,e,i){if(t){var r,n=a(t);if(f[n]&&f[n][e])for(var A=0,s=f[n][e].length;A<s;A++)(r=f[n][e][A])&&r.handler===i&&(t.detachEvent("on"+e,r.wrappedHandler),f[n][e][A]=null)}}):(l=function(t,e,i){if(t){var r=a(t);if(d[r]||(d[r]={}),!d[r][e]){d[r][e]=[];var n=t["on"+e];n&&d[r][e].push(n),t["on"+e]=(A=r,s=e,function(t){if(d[A]&&d[A][s])for(var e=d[A][s],i=0,r=e.length;i<r;i++)e[i].call(this,t||fabric.window.event)})}d[r][e].push(i)}var A,s},c=function(t,e,i){if(t){var r=a(t);if(d[r]&&d[r][e])for(var n=d[r][e],A=0,s=n.length;A<s;A++)n[A]===i&&n.splice(A,1)}}),fabric.util.addListener=l,fabric.util.removeListener=c;var g=function(t){return t.clientX},p=function(t){return t.clientY};fabric.isTouchSupported&&(g=function(t){return e(t,"pageX","clientX")},p=function(t){return e(t,"pageY","clientY")}),fabric.util.getPointer=function(t){t||(t=fabric.window.event);var e=t.target||(typeof t.srcElement!==o?t.srcElement:null),i=fabric.util.getScrollLeftTop(e);return{x:g(t)+i.left,y:p(t)+i.top}}}(),function(){var t=fabric.document.createElement("div"),e="string"==typeof t.style.opacity,i="string"==typeof t.style.filter,r=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,n=function(t){return t};e?n=function(t,e){return t.style.opacity=e,t}:i&&(n=function(t,e){var i=t.style;return t.currentStyle&&!t.currentStyle.hasLayout&&(i.zoom=1),r.test(i.filter)?(e=.9999<=e?"":"alpha(opacity="+100*e+")",i.filter=i.filter.replace(r,e)):i.filter+=" alpha(opacity="+100*e+")",t}),fabric.util.setStyle=function(t,e){var i=t.style;if(!i)return t;if("string"==typeof e)return t.style.cssText+=";"+e,-1<e.indexOf("opacity")?n(t,e.match(/opacity:\s*(\d?\.?\d*)/)[1]):t;for(var r in e)"opacity"===r?n(t,e[r]):i["float"===r||"cssFloat"===r?void 0===i.styleFloat?"cssFloat":"styleFloat":r]=e[r];return t}}(),function(){function r(t,e){var i=fabric.document.createElement(t);for(var r in e)"class"===r?i.className=e[r]:"for"===r?i.htmlFor=e[r]:i.setAttribute(r,e[r]);return i}function a(t){for(var e=0,i=0,r=fabric.document.documentElement,n=fabric.document.body||{scrollLeft:0,scrollTop:0};t&&(t.parentNode||t.host)&&((t=t.parentNode||t.host)===fabric.document?(e=n.scrollLeft||r.scrollLeft||0,i=n.scrollTop||r.scrollTop||0):(e+=t.scrollLeft||0,i+=t.scrollTop||0),1!==t.nodeType||"fixed"!==fabric.util.getElementStyle(t,"position")););return{left:e,top:i}}var t,l,e,i,n=Array.prototype.slice,A=function(t){return n.call(t,0)};try{t=A(fabric.document.childNodes)instanceof Array}catch(t){}t||(A=function(t){for(var e=new Array(t.length),i=t.length;i--;)e[i]=t[i];return e}),l=fabric.document.defaultView&&fabric.document.defaultView.getComputedStyle?function(t,e){var i=fabric.document.defaultView.getComputedStyle(t,null);return i?i[e]:void 0}:function(t,e){var i=t.style[e];return!i&&t.currentStyle&&(i=t.currentStyle[e]),i},e=fabric.document.documentElement.style,i="userSelect"in e?"userSelect":"MozUserSelect"in e?"MozUserSelect":"WebkitUserSelect"in e?"WebkitUserSelect":"KhtmlUserSelect"in e?"KhtmlUserSelect":"",fabric.util.makeElementUnselectable=function(t){return void 0!==t.onselectstart&&(t.onselectstart=fabric.util.falseFunction),i?t.style[i]="none":"string"==typeof t.unselectable&&(t.unselectable="on"),t},fabric.util.makeElementSelectable=function(t){return void 0!==t.onselectstart&&(t.onselectstart=null),i?t.style[i]="":"string"==typeof t.unselectable&&(t.unselectable=""),t},fabric.util.getScript=function(t,e){var i=fabric.document.getElementsByTagName("head")[0],r=fabric.document.createElement("script"),n=!0;r.onload=r.onreadystatechange=function(t){if(n){if("string"==typeof this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState)return;n=!1,e(t||fabric.window.event),r=r.onload=r.onreadystatechange=null}},r.src=t,i.appendChild(r)},fabric.util.getById=function(t){return"string"==typeof t?fabric.document.getElementById(t):t},fabric.util.toArray=A,fabric.util.makeElement=r,fabric.util.addClass=function(t,e){t&&-1===(" "+t.className+" ").indexOf(" "+e+" ")&&(t.className+=(t.className?" ":"")+e)},fabric.util.wrapElement=function(t,e,i){return"string"==typeof e&&(e=r(e,i)),t.parentNode&&t.parentNode.replaceChild(e,t),e.appendChild(t),e},fabric.util.getScrollLeftTop=a,fabric.util.getElementOffset=function(t){var e,i,r=t&&t.ownerDocument,n={left:0,top:0},A={left:0,top:0},s={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!r)return A;for(var o in s)A[s[o]]+=parseInt(l(t,o),10)||0;return e=r.documentElement,void 0!==t.getBoundingClientRect&&(n=t.getBoundingClientRect()),i=a(t),{left:n.left+i.left-(e.clientLeft||0)+A.left,top:n.top+i.top-(e.clientTop||0)+A.top}},fabric.util.getElementStyle=l}(),function(){function a(){}var l=function(){for(var t=[function(){return new ActiveXObject("Microsoft.XMLHTTP")},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml2.XMLHTTP.3.0")},function(){return new XMLHttpRequest}],e=t.length;e--;)try{if(t[e]())return t[e]}catch(t){}}();fabric.util.request=function(t,e){e||(e={});var i,r,n=e.method?e.method.toUpperCase():"GET",A=e.onComplete||function(){},s=l(),o=e.body||e.parameters;return s.onreadystatechange=function(){4===s.readyState&&(A(s),s.onreadystatechange=a)},"GET"===n&&(o=null,"string"==typeof e.parameters&&(i=t,r=e.parameters,t=i+(/\?/.test(i)?"&":"?")+r)),s.open(n,t,!0),("POST"===n||"PUT"===n)&&s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send(o),s}}(),fabric.log=function(){},fabric.warn=function(){},"undefined"!=typeof console&&["log","warn"].forEach(function(t){void 0!==console[t]&&"function"==typeof console[t].apply&&(fabric[t]=function(){return console[t].apply(console,arguments)})}),function(){function e(){return!1}function m(){return t.apply(fabric.window,arguments)}var t=fabric.window.requestAnimationFrame||fabric.window.webkitRequestAnimationFrame||fabric.window.mozRequestAnimationFrame||fabric.window.oRequestAnimationFrame||fabric.window.msRequestAnimationFrame||function(t){return fabric.window.setTimeout(t,1e3/60)},i=fabric.window.cancelAnimationFrame||fabric.window.clearTimeout;fabric.util.animate=function(B){m(function(t){B||(B={});var s,o=t||+new Date,a=B.duration||500,l=o+a,c=B.onChange||e,h=B.abort||e,u=B.onComplete||e,f=B.easing||function(t,e,i,r){return-i*Math.cos(t/r*(Math.PI/2))+i+e},d="startValue"in B?B.startValue:0,g="endValue"in B?B.endValue:100,p=B.byValue||g-d;B.onStart&&B.onStart(),function t(e){if(!h()){s=e||+new Date;var i=l<s?a:s-o,r=i/a,n=f(i,d,p,a),A=Math.abs((n-d)/p);return c(n,A,r),l<s?void(B.onComplete&&B.onComplete()):void m(t)}u(g,1,1)}(o)})},fabric.util.requestAnimFrame=m,fabric.util.cancelAnimFrame=function(){return i.apply(fabric.window,arguments)}}(),fabric.util.animateColor=function(t,e,i,l){var r=new fabric.Color(t).getSource(),n=new fabric.Color(e).getSource();l=l||{},fabric.util.animate(fabric.util.object.extend(l,{duration:i||500,startValue:r,endValue:n,byValue:n,easing:function(t,e,i,r){var n,A,s,o,a=l.colorEasing?l.colorEasing(t,r):1-Math.cos(t/r*(Math.PI/2));return n=e,A=i,s=a,o="rgba("+parseInt(n[0]+s*(A[0]-n[0]),10)+","+parseInt(n[1]+s*(A[1]-n[1]),10)+","+parseInt(n[2]+s*(A[2]-n[2]),10),(o+=","+(n&&A?parseFloat(n[3]+s*(A[3]-n[3])):1))+")"}}))},function(){function s(t,e,i,r){return t<Math.abs(e)?(t=e,r=i/4):r=0===e&&0===t?i/(2*Math.PI)*Math.asin(1):i/(2*Math.PI)*Math.asin(e/t),{a:t,c:e,p:i,s:r}}function o(t,e,i){return t.a*Math.pow(2,10*(e-=1))*Math.sin(2*(e*i-t.s)*Math.PI/t.p)}function n(t,e,i,r){return i-A(r-t,0,i,r)+e}function A(t,e,i,r){return(t/=r)<1/2.75?7.5625*i*t*t+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e}fabric.util.ease={easeInQuad:function(t,e,i,r){return i*(t/=r)*t+e},easeOutQuad:function(t,e,i,r){return-i*(t/=r)*(t-2)+e},easeInOutQuad:function(t,e,i,r){return(t/=r/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,i,r){return i*(t/=r)*t*t+e},easeOutCubic:function(t,e,i,r){return i*((t=t/r-1)*t*t+1)+e},easeInOutCubic:function(t,e,i,r){return(t/=r/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,i,r){return i*(t/=r)*t*t*t+e},easeOutQuart:function(t,e,i,r){return-i*((t=t/r-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,i,r){return(t/=r/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,i,r){return i*(t/=r)*t*t*t*t+e},easeOutQuint:function(t,e,i,r){return i*((t=t/r-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,i,r){return(t/=r/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,i,r){return-i*Math.cos(t/r*(Math.PI/2))+i+e},easeOutSine:function(t,e,i,r){return i*Math.sin(t/r*(Math.PI/2))+e},easeInOutSine:function(t,e,i,r){return-i/2*(Math.cos(Math.PI*t/r)-1)+e},easeInExpo:function(t,e,i,r){return 0===t?e:i*Math.pow(2,10*(t/r-1))+e},easeOutExpo:function(t,e,i,r){return t===r?e+i:i*(1-Math.pow(2,-10*t/r))+e},easeInOutExpo:function(t,e,i,r){return 0===t?e:t===r?e+i:(t/=r/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(2-Math.pow(2,-10*--t))+e},easeInCirc:function(t,e,i,r){return-i*(Math.sqrt(1-(t/=r)*t)-1)+e},easeOutCirc:function(t,e,i,r){return i*Math.sqrt(1-(t=t/r-1)*t)+e},easeInOutCirc:function(t,e,i,r){return(t/=r/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,i,r){var n=0;return 0===t?e:1==(t/=r)?e+i:(n||(n=.3*r),-o(s(i,i,n,1.70158),t,r)+e)},easeOutElastic:function(t,e,i,r){var n=0;if(0===t)return e;if(1==(t/=r))return e+i;n||(n=.3*r);var A=s(i,i,n,1.70158);return A.a*Math.pow(2,-10*t)*Math.sin(2*(t*r-A.s)*Math.PI/A.p)+A.c+e},easeInOutElastic:function(t,e,i,r){var n=0;if(0===t)return e;if(2==(t/=r/2))return e+i;n||(n=.3*r*1.5);var A=s(i,i,n,1.70158);return t<1?-.5*o(A,t,r)+e:A.a*Math.pow(2,-10*(t-=1))*Math.sin(2*(t*r-A.s)*Math.PI/A.p)*.5+A.c+e},easeInBack:function(t,e,i,r,n){return void 0===n&&(n=1.70158),i*(t/=r)*t*((n+1)*t-n)+e},easeOutBack:function(t,e,i,r,n){return void 0===n&&(n=1.70158),i*((t=t/r-1)*t*((n+1)*t+n)+1)+e},easeInOutBack:function(t,e,i,r,n){return void 0===n&&(n=1.70158),(t/=r/2)<1?i/2*t*t*((1+(n*=1.525))*t-n)+e:i/2*((t-=2)*t*((1+(n*=1.525))*t+n)+2)+e},easeInBounce:n,easeOutBounce:A,easeInOutBounce:function(t,e,i,r){return t<r/2?.5*n(2*t,0,i,r)+e:.5*A(2*t-r,0,i,r)+.5*i+e}}}(),function(t){"use strict";function f(t,e,i,r){var n,A="[object Array]"===Object.prototype.toString.call(e);if("fill"!==t&&"stroke"!==t||"none"!==e)if("strokeDashArray"===t)e="none"===e?null:e.replace(/,/g," ").split(/\s+/).map(function(t){return parseFloat(t)});else if("transformMatrix"===t)e=i&&i.transformMatrix?a(i.transformMatrix,C.parseTransformAttribute(e)):C.parseTransformAttribute(e);else if("visible"===t)e="none"!==e&&"hidden"!==e,i&&!1===i.visible&&(e=!1);else if("opacity"===t)e=parseFloat(e),i&&void 0!==i.opacity&&(e*=i.opacity);else if("textAnchor"===t)e="start"===e?"left":"end"===e?"right":"center";else if("paintFirst"===t){var s=e.indexOf("fill"),o=e.indexOf("stroke");e="fill";-1<s&&-1<o&&o<s?e="stroke":-1===s&&-1<o&&(e="stroke")}else n=A?e.map(w):w(e,r);else e="";return!A&&isNaN(n)?e:n}function e(t){return new RegExp("^("+t.join("|")+")\\b","i")}function g(t,e){var i,r,n,A,s=[];for(n=0,A=e.length;n<A;n++)i=e[n],r=t.getElementsByTagName(i),s=s.concat(Array.prototype.slice.call(r));return s}function d(t,e){var i,r,n=t.nodeName,A=t.getAttribute("class"),s=t.getAttribute("id");if(i=new RegExp("^"+n,"i"),e=e.replace(i,""),s&&e.length&&(i=new RegExp("#"+s+"(?![a-zA-Z\\-]+)","i"),e=e.replace(i,"")),A&&e.length)for(r=(A=A.split(" ")).length;r--;)i=new RegExp("\\."+A[r]+"(?![a-zA-Z\\-]+)","i"),e=e.replace(i,"");return 0===e.length}function p(t,e){var i;if(t.getElementById&&(i=t.getElementById(e)),i)return i;var r,n,A,s=t.getElementsByTagName("*");for(n=0,A=s.length;n<A;n++)if(e===(r=s[n]).getAttribute("id"))return r}function B(t){var e,i,r,n,A,s,o=t.getAttribute("viewBox"),a=1,l=1,c=t.getAttribute("width"),h=t.getAttribute("height"),u=t.getAttribute("x")||0,f=t.getAttribute("y")||0,d=t.getAttribute("preserveAspectRatio")||"",g=!o||!C.svgViewBoxElementsRegEx.test(t.nodeName)||!(o=o.match(y)),p=!c||!h||"100%"===c||"100%"===h,B=g&&p,m={},v="";if(m.width=0,m.height=0,m.toBeParsed=B)return m;if(g)return m.width=w(c),m.height=w(h),m;if(A=-parseFloat(o[1]),s=-parseFloat(o[2]),e=parseFloat(o[3]),i=parseFloat(o[4]),p?(m.width=e,m.height=i):(m.width=w(c),m.height=w(h),a=m.width/e,l=m.height/i),"none"!==(d=C.util.parsePreserveAspectRatioAttribute(d)).alignX&&(l=a=l<a?l:a),1===a&&1===l&&0===A&&0===s&&0===u&&0===f)return m;if((u||f)&&(v=" translate("+w(u)+" "+w(f)+") "),r=v+" matrix("+a+" 0 0 "+l+" "+A*a+" "+s*l+") ","svg"===t.nodeName){for(n=t.ownerDocument.createElement("g");t.firstChild;)n.appendChild(t.firstChild);t.appendChild(n)}else r=(n=t).getAttribute("transform")+r;return n.setAttribute("transform",r),m}var C=t.fabric||(t.fabric={}),m=C.util.object.extend,h=C.util.object.clone,v=C.util.toFixed,w=C.util.parseUnit,a=C.util.multiplyTransformMatrices,b={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity"},_={stroke:"strokeOpacity",fill:"fillOpacity"};C.svgValidTagNamesRegEx=e(["path","circle","polygon","polyline","ellipse","rect","line","image","text","linearGradient","radialGradient","stop"]),C.svgViewBoxElementsRegEx=e(["symbol","image","marker","pattern","view","svg"]),C.svgInvalidAncestorsRegEx=e(["pattern","defs","symbol","metadata","clipPath","mask","desc"]),C.svgValidParentsRegEx=e(["symbol","g","a","svg"]),C.cssRules={},C.gradientDefs={},C.parseTransformAttribute=function(){function m(t,e,i){t[i]=Math.tan(C.util.degreesToRadians(e[0]))}var v=[1,0,0,1,0,0],t=C.reNum,e="(?:\\s+,?\\s*|,\\s*)",w="(?:"+("(?:(matrix)\\s*\\(\\s*("+t+")"+e+"("+t+")"+e+"("+t+")"+e+"("+t+")"+e+"("+t+")"+e+"("+t+")\\s*\\))")+"|"+("(?:(translate)\\s*\\(\\s*("+t+")(?:"+e+"("+t+"))?\\s*\\))")+"|"+("(?:(scale)\\s*\\(\\s*("+t+")(?:"+e+"("+t+"))?\\s*\\))")+"|"+("(?:(rotate)\\s*\\(\\s*("+t+")(?:"+e+"("+t+")"+e+"("+t+"))?\\s*\\))")+"|"+("(?:(skewX)\\s*\\(\\s*("+t+")\\s*\\))")+"|"+("(?:(skewY)\\s*\\(\\s*("+t+")\\s*\\))")+")",i=new RegExp("^\\s*(?:"+("(?:"+w+"(?:"+e+"*"+w+")*)")+"?)\\s*$"),r=new RegExp(w,"g");return function(t){var p=v.concat(),B=[];if(!t||t&&!i.test(t))return p;t.replace(r,function(t){var e,i,r,n,A,s,o,a,l,c,h,u,f=new RegExp(w).exec(t).filter(function(t){return!!t}),d=f[1],g=f.slice(2).map(parseFloat);switch(d){case"translate":u=g,(h=p)[4]=u[0],2===u.length&&(h[5]=u[1]);break;case"rotate":g[0]=C.util.degreesToRadians(g[0]),A=p,s=g,o=Math.cos(s[0]),a=Math.sin(s[0]),c=l=0,3===s.length&&(l=s[1],c=s[2]),A[0]=o,A[1]=a,A[2]=-a,A[3]=o,A[4]=l-(o*l-a*c),A[5]=c-(a*l+o*c);break;case"scale":e=p,r=(i=g)[0],n=2===i.length?i[1]:i[0],e[0]=r,e[3]=n;break;case"skewX":m(p,g,2);break;case"skewY":m(p,g,1);break;case"matrix":p=g}B.push(p.concat()),p=v.concat()});for(var e=B[0];1<B.length;)B.shift(),e=C.util.multiplyTransformMatrices(e,B[0]);return e}}();var y=new RegExp("^\\s*("+C.reNum+"+)\\s*,?\\s*("+C.reNum+"+)\\s*,?\\s*("+C.reNum+"+)\\s*,?\\s*("+C.reNum+"+)\\s*$");C.parseSVGDocument=function(t,i,e,r){if(t){!function(t){for(var e=g(t,["use","svg:use"]),i=0;e.length&&i<e.length;){var r,n,A,s,o=e[i],a=o.getAttribute("xlink:href").substr(1),l=o.getAttribute("x")||0,c=o.getAttribute("y")||0,h=p(t,a).cloneNode(!0),u=(h.getAttribute("transform")||"")+" translate("+l+", "+c+")",f=e.length;if(B(h),/^svg$/i.test(h.nodeName)){var d=h.ownerDocument.createElement("g");for(n=0,s=(A=h.attributes).length;n<s;n++)r=A.item(n),d.setAttribute(r.nodeName,r.nodeValue);for(;h.firstChild;)d.appendChild(h.firstChild);h=d}for(n=0,s=(A=o.attributes).length;n<s;n++)"x"!==(r=A.item(n)).nodeName&&"y"!==r.nodeName&&"xlink:href"!==r.nodeName&&("transform"===r.nodeName?u=r.nodeValue+" "+u:h.setAttribute(r.nodeName,r.nodeValue));h.setAttribute("transform",u),h.setAttribute("instantiated_by_use","1"),h.removeAttribute("id"),o.parentNode.replaceChild(h,o),e.length===f&&i++}}(t);var n,A,s=C.Object.__uid++,o=B(t),a=C.util.toArray(t.getElementsByTagName("*"));if(o.crossOrigin=r&&r.crossOrigin,o.svgUid=s,0===a.length&&C.isLikelyNode){var l=[];for(n=0,A=(a=t.selectNodes('//*[name(.)!="svg"]')).length;n<A;n++)l[n]=a[n];a=l}var c=a.filter(function(t){return B(t),C.svgValidTagNamesRegEx.test(t.nodeName.replace("svg:",""))&&!function(t,e){for(;t&&(t=t.parentNode);)if(t.nodeName&&e.test(t.nodeName.replace("svg:",""))&&!t.getAttribute("instantiated_by_use"))return!0;return!1}(t,C.svgInvalidAncestorsRegEx)});if(!c||c&&!c.length)return void(i&&i([],{}));C.gradientDefs[s]=C.getGradientDefs(t),C.cssRules[s]=C.getCSSRules(t),C.parseElements(c,function(t,e){i&&i(t,o,e,a)},h(o),e,r)}};var l=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+C.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+C.reNum+"))?\\s+(.*)");m(C,{parseFontDeclaration:function(t,e){var i=t.match(l);if(i){var r=i[1],n=i[3],A=i[4],s=i[5],o=i[6];r&&(e.fontStyle=r),n&&(e.fontWeight=isNaN(parseFloat(n))?n:parseFloat(n)),A&&(e.fontSize=w(A)),o&&(e.fontFamily=o),s&&(e.lineHeight="normal"===s?1:s)}},getGradientDefs:function(t){var e,i,r,n=g(t,["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"]),A=0,s={},o={};for(A=n.length;A--;)r=(e=n[A]).getAttribute("xlink:href"),i=e.getAttribute("id"),r&&(o[i]=r.substr(1)),s[i]=e;for(i in o){var a=s[o[i]].cloneNode(!0);for(e=s[i];a.firstChild;)e.appendChild(a.firstChild)}return s},parseAttributes:function(i,t,e){if(i){var r,n,A={};void 0===e&&(e=i.getAttribute("svgUid")),i.parentNode&&C.svgValidParentsRegEx.test(i.parentNode.nodeName)&&(A=C.parseAttributes(i.parentNode,t,e)),n=A&&A.fontSize||i.getAttribute("font-size")||C.Text.DEFAULT_SVG_FONT_SIZE;var s=t.reduce(function(t,e){return(r=i.getAttribute(e))&&(t[e]=r),t},{});s=m(s,m(function(t,e){var i,r,n,A,s={};for(var o in C.cssRules[e])if(i=t,r=o.split(" "),A=n=void 0,A=!0,(n=d(i,r.pop()))&&r.length&&(A=function(t,e){for(var i,r=!0;t.parentNode&&1===t.parentNode.nodeType&&e.length;)r&&(i=e.pop()),t=t.parentNode,r=d(t,i);return 0===e.length}(i,r)),n&&A&&0===r.length)for(var a in C.cssRules[e][o])s[a]=C.cssRules[e][o][a];return s}(i,e),C.parseStyleAttribute(i)));var o,a,l={};for(var c in s)a=f(o=(u=c)in b?b[u]:u,s[c],A,n),l[o]=a;l&&l.font&&C.parseFontDeclaration(l.font,l);var h=m(A,l);return C.svgValidParentsRegEx.test(i.nodeName)?h:function(t){for(var e in _)if(void 0!==t[_[e]]&&""!==t[e]){if(void 0===t[e]){if(!C.Object.prototype[e])continue;t[e]=C.Object.prototype[e]}if(0!==t[e].indexOf("url(")){var i=new C.Color(t[e]);t[e]=i.setAlpha(v(i.getAlpha()*t[_[e]],2)).toRgba()}}return t}(h)}var u},parseElements:function(t,e,i,r,n){new C.ElementsParser(t,e,i,r,n).parse()},parseStyleAttribute:function(t){var i,r,n,e={},A=t.getAttribute("style");return A&&("string"==typeof A?(i=e,A.replace(/;\s*$/,"").split(";").forEach(function(t){var e=t.split(":");r=e[0].trim().toLowerCase(),n=e[1].trim(),i[r]=n})):function(t,e){var i,r;for(var n in t)void 0!==t[n]&&(i=n.toLowerCase(),r=t[n],e[i]=r)}(A,e)),e},parsePointsAttribute:function(t){if(!t)return null;var e,i,r=[];for(e=0,i=(t=(t=t.replace(/,/g," ").trim()).split(/\s+/)).length;e<i;e+=2)r.push({x:parseFloat(t[e]),y:parseFloat(t[e+1])});return r},getCSSRules:function(t){var o,a,e=t.getElementsByTagName("style"),l={};for(o=0,a=e.length;o<a;o++){var i=e[o].textContent||e[o].text;""!==(i=i.replace(/\/\*[\s\S]*?\*\//g,"")).trim()&&i.match(/[^{]*\{[\s\S]*?\}/g).map(function(t){return t.trim()}).forEach(function(t){var e=t.match(/([\s\S]*?)\s*\{([^}]*)\}/),i={},r=e[2].trim().replace(/;$/,"").split(/\s*;\s*/);for(o=0,a=r.length;o<a;o++){var n=r[o].split(/\s*:\s*/),A=n[0],s=n[1];i[A]=s}(t=e[1]).split(",").forEach(function(t){""!==(t=t.replace(/^svg/i,"").trim())&&(l[t]?C.util.object.extend(l[t],i):l[t]=C.util.object.clone(i))})})}return l},loadSVGFromURL:function(t,n,i,r){t=t.replace(/^\n\s*/,"").trim(),new C.util.request(t,{method:"get",onComplete:function(t){var e=t.responseXML;e&&!e.documentElement&&C.window.ActiveXObject&&t.responseText&&((e=new ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t.responseText.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,""))),e&&e.documentElement||n&&n(null),C.parseSVGDocument(e.documentElement,function(t,e,i,r){n&&n(t,e,i,r)},i,r)}})},loadSVGFromString:function(t,n,e,i){var r;if(t=t.trim(),"undefined"!=typeof DOMParser){var A=new DOMParser;A&&A.parseFromString&&(r=A.parseFromString(t,"text/xml"))}else C.window.ActiveXObject&&((r=new ActiveXObject("Microsoft.XMLDOM")).async="false",r.loadXML(t.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,"")));C.parseSVGDocument(r.documentElement,function(t,e,i,r){n(t,e,i,r)},e,i)}})}("undefined"!=typeof exports?exports:this),fabric.ElementsParser=function(t,e,i,r,n){this.elements=t,this.callback=e,this.options=i,this.reviver=r,this.svgUid=i&&i.svgUid||0,this.parsingOptions=n},fabric.ElementsParser.prototype.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},fabric.ElementsParser.prototype.createObjects=function(){for(var t=0,e=this.elements.length;t<e;t++)this.elements[t].setAttribute("svgUid",this.svgUid),function(t,e){setTimeout(function(){t.createObject(t.elements[e],e)},0)}(this,t)},fabric.ElementsParser.prototype.createObject=function(t,e){var i=fabric[fabric.util.string.capitalize(t.tagName.replace("svg:",""))];if(i&&i.fromElement)try{this._createObject(i,t,e)}catch(t){fabric.log(t)}else this.checkIfDone()},fabric.ElementsParser.prototype._createObject=function(t,e,i){t.fromElement(e,this.createCallback(i,e),this.options)},fabric.ElementsParser.prototype.createCallback=function(i,r){var n=this;return function(t){var e;n.resolveGradient(t,"fill"),n.resolveGradient(t,"stroke"),t instanceof fabric.Image&&(e=t.parsePreserveAspectRatioAttribute(r)),t._removeTransformMatrix(e),n.reviver&&n.reviver(r,t),n.instances[i]=t,n.checkIfDone()}},fabric.ElementsParser.prototype.resolveGradient=function(t,e){var i=t.get(e);if(/^url\(/.test(i)){var r=i.slice(5,i.length-1);fabric.gradientDefs[this.svgUid][r]&&t.set(e,fabric.Gradient.fromElement(fabric.gradientDefs[this.svgUid][r],t))}},fabric.ElementsParser.prototype.checkIfDone=function(){0==--this.numElements&&(this.instances=this.instances.filter(function(t){return null!=t}),this.callback(this.instances,this.elements))},function(t){"use strict";function i(t,e){this.x=t,this.y=e}var e=t.fabric||(t.fabric={});e.Point?e.warn("fabric.Point is already defined"):(e.Point=i).prototype={type:"point",constructor:i,add:function(t){return new i(this.x+t.x,this.y+t.y)},addEquals:function(t){return this.x+=t.x,this.y+=t.y,this},scalarAdd:function(t){return new i(this.x+t,this.y+t)},scalarAddEquals:function(t){return this.x+=t,this.y+=t,this},subtract:function(t){return new i(this.x-t.x,this.y-t.y)},subtractEquals:function(t){return this.x-=t.x,this.y-=t.y,this},scalarSubtract:function(t){return new i(this.x-t,this.y-t)},scalarSubtractEquals:function(t){return this.x-=t,this.y-=t,this},multiply:function(t){return new i(this.x*t,this.y*t)},multiplyEquals:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return new i(this.x/t,this.y/t)},divideEquals:function(t){return this.x/=t,this.y/=t,this},eq:function(t){return this.x===t.x&&this.y===t.y},lt:function(t){return this.x<t.x&&this.y<t.y},lte:function(t){return this.x<=t.x&&this.y<=t.y},gt:function(t){return this.x>t.x&&this.y>t.y},gte:function(t){return this.x>=t.x&&this.y>=t.y},lerp:function(t,e){return void 0===e&&(e=.5),e=Math.max(Math.min(1,e),0),new i(this.x+(t.x-this.x)*e,this.y+(t.y-this.y)*e)},distanceFrom:function(t){var e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)},midPointFrom:function(t){return this.lerp(t)},min:function(t){return new i(Math.min(this.x,t.x),Math.min(this.y,t.y))},max:function(t){return new i(Math.max(this.x,t.x),Math.max(this.y,t.y))},toString:function(){return this.x+","+this.y},setXY:function(t,e){return this.x=t,this.y=e,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setFromPoint:function(t){return this.x=t.x,this.y=t.y,this},swap:function(t){var e=this.x,i=this.y;this.x=t.x,this.y=t.y,t.x=e,t.y=i},clone:function(){return new i(this.x,this.y)}}}("undefined"!=typeof exports?exports:this),function(t){"use strict";function u(t){this.status=t,this.points=[]}var f=t.fabric||(t.fabric={});f.Intersection?f.warn("fabric.Intersection is already defined"):(f.Intersection=u,f.Intersection.prototype={constructor:u,appendPoint:function(t){return this.points.push(t),this},appendPoints:function(t){return this.points=this.points.concat(t),this}},f.Intersection.intersectLineLine=function(t,e,i,r){var n,A=(r.x-i.x)*(t.y-i.y)-(r.y-i.y)*(t.x-i.x),s=(e.x-t.x)*(t.y-i.y)-(e.y-t.y)*(t.x-i.x),o=(r.y-i.y)*(e.x-t.x)-(r.x-i.x)*(e.y-t.y);if(0!==o){var a=A/o,l=s/o;0<=a&&a<=1&&0<=l&&l<=1?(n=new u("Intersection")).appendPoint(new f.Point(t.x+a*(e.x-t.x),t.y+a*(e.y-t.y))):n=new u}else n=new u(0===A||0===s?"Coincident":"Parallel");return n},f.Intersection.intersectLinePolygon=function(t,e,i){var r,n,A,s,o=new u,a=i.length;for(s=0;s<a;s++)r=i[s],n=i[(s+1)%a],A=u.intersectLineLine(t,e,r,n),o.appendPoints(A.points);return 0<o.points.length&&(o.status="Intersection"),o},f.Intersection.intersectPolygonPolygon=function(t,e){var i,r=new u,n=t.length;for(i=0;i<n;i++){var A=t[i],s=t[(i+1)%n],o=u.intersectLinePolygon(A,s,e);r.appendPoints(o.points)}return 0<r.points.length&&(r.status="Intersection"),r},f.Intersection.intersectPolygonRectangle=function(t,e,i){var r=e.min(i),n=e.max(i),A=new f.Point(n.x,r.y),s=new f.Point(r.x,n.y),o=u.intersectLinePolygon(r,A,t),a=u.intersectLinePolygon(A,n,t),l=u.intersectLinePolygon(n,s,t),c=u.intersectLinePolygon(s,r,t),h=new u;return h.appendPoints(o.points),h.appendPoints(a.points),h.appendPoints(l.points),h.appendPoints(c.points),0<h.points.length&&(h.status="Intersection"),h})}("undefined"!=typeof exports?exports:this),function(t){"use strict";function c(t){t?this._tryParsingColor(t):this.setSource([0,0,0,1])}function h(t,e,i){return i<0&&(i+=1),1<i&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}var l=t.fabric||(t.fabric={});l.Color?l.warn("fabric.Color is already defined."):(l.Color=c,l.Color.prototype={_tryParsingColor:function(t){var e;t in c.colorNameMap&&(t=c.colorNameMap[t]),"transparent"===t&&(e=[255,255,255,0]),e||(e=c.sourceFromHex(t)),e||(e=c.sourceFromRgb(t)),e||(e=c.sourceFromHsl(t)),e||(e=[0,0,0,1]),e&&this.setSource(e)},_rgbToHsl:function(t,e,i){t/=255,e/=255,i/=255;var r,n,A,s=l.util.array.max([t,e,i]),o=l.util.array.min([t,e,i]);if(A=(s+o)/2,s===o)r=n=0;else{var a=s-o;switch(n=.5<A?a/(2-s-o):a/(s+o),s){case t:r=(e-i)/a+(e<i?6:0);break;case e:r=(i-t)/a+2;break;case i:r=(t-e)/a+4}r/=6}return[Math.round(360*r),Math.round(100*n),Math.round(100*A)]},getSource:function(){return this._source},setSource:function(t){this._source=t},toRgb:function(){var t=this.getSource();return"rgb("+t[0]+","+t[1]+","+t[2]+")"},toRgba:function(){var t=this.getSource();return"rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]+")"},toHsl:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsl("+e[0]+","+e[1]+"%,"+e[2]+"%)"},toHsla:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsla("+e[0]+","+e[1]+"%,"+e[2]+"%,"+t[3]+")"},toHex:function(){var t,e,i,r=this.getSource();return t=1===(t=r[0].toString(16)).length?"0"+t:t,e=1===(e=r[1].toString(16)).length?"0"+e:e,i=1===(i=r[2].toString(16)).length?"0"+i:i,t.toUpperCase()+e.toUpperCase()+i.toUpperCase()},toHexa:function(){var t;return t=1===(t=(t=255*this.getSource()[3]).toString(16)).length?"0"+t:t,this.toHex()+t.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(t){var e=this.getSource();return e[3]=t,this.setSource(e),this},toGrayscale:function(){var t=this.getSource(),e=parseInt((.3*t[0]+.59*t[1]+.11*t[2]).toFixed(0),10),i=t[3];return this.setSource([e,e,e,i]),this},toBlackWhite:function(t){var e=this.getSource(),i=(.3*e[0]+.59*e[1]+.11*e[2]).toFixed(0),r=e[3];return t=t||127,i=Number(i)<Number(t)?0:255,this.setSource([i,i,i,r]),this},overlayWith:function(t){t instanceof c||(t=new c(t));var e,i=[],r=this.getAlpha(),n=this.getSource(),A=t.getSource();for(e=0;e<3;e++)i.push(Math.round(.5*n[e]+.5*A[e]));return i[3]=r,this.setSource(i),this}},l.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/,l.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/,l.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,l.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},l.Color.fromRgb=function(t){return c.fromSource(c.sourceFromRgb(t))},l.Color.sourceFromRgb=function(t){var e=t.match(c.reRGBa);if(e){var i=parseInt(e[1],10)/(/%$/.test(e[1])?100:1)*(/%$/.test(e[1])?255:1),r=parseInt(e[2],10)/(/%$/.test(e[2])?100:1)*(/%$/.test(e[2])?255:1),n=parseInt(e[3],10)/(/%$/.test(e[3])?100:1)*(/%$/.test(e[3])?255:1);return[parseInt(i,10),parseInt(r,10),parseInt(n,10),e[4]?parseFloat(e[4]):1]}},l.Color.fromRgba=c.fromRgb,l.Color.fromHsl=function(t){return c.fromSource(c.sourceFromHsl(t))},l.Color.sourceFromHsl=function(t){var e=t.match(c.reHSLa);if(e){var i,r,n,A=(parseFloat(e[1])%360+360)%360/360,s=parseFloat(e[2])/(/%$/.test(e[2])?100:1),o=parseFloat(e[3])/(/%$/.test(e[3])?100:1);if(0===s)i=r=n=o;else{var a=o<=.5?o*(s+1):o+s-o*s,l=2*o-a;i=h(l,a,A+1/3),r=h(l,a,A),n=h(l,a,A-1/3)}return[Math.round(255*i),Math.round(255*r),Math.round(255*n),e[4]?parseFloat(e[4]):1]}},l.Color.fromHsla=c.fromHsl,l.Color.fromHex=function(t){return c.fromSource(c.sourceFromHex(t))},l.Color.sourceFromHex=function(t){if(t.match(c.reHex)){var e=t.slice(t.indexOf("#")+1),i=3===e.length||4===e.length,r=8===e.length||4===e.length,n=i?e.charAt(0)+e.charAt(0):e.substring(0,2),A=i?e.charAt(1)+e.charAt(1):e.substring(2,4),s=i?e.charAt(2)+e.charAt(2):e.substring(4,6),o=r?i?e.charAt(3)+e.charAt(3):e.substring(6,8):"FF";return[parseInt(n,16),parseInt(A,16),parseInt(s,16),parseFloat((parseInt(o,16)/255).toFixed(2))]}},l.Color.fromSource=function(t){var e=new c;return e.setSource(t),e})}("undefined"!=typeof exports?exports:this),function(){function f(t){var e,i,r,n,A=t.getAttribute("style"),s=t.getAttribute("offset")||0;if(s=(s=parseFloat(s)/(/%$/.test(s)?100:1))<0?0:1<s?1:s,A){var o=A.split(/\s*;\s*/);for(""===o[o.length-1]&&o.pop(),n=o.length;n--;){var a=o[n].split(/\s*:\s*/),l=a[0].trim(),c=a[1].trim();"stop-color"===l?e=c:"stop-opacity"===l&&(r=c)}}return e||(e=t.getAttribute("stop-color")||"rgb(0,0,0)"),r||(r=t.getAttribute("stop-opacity")),i=(e=new fabric.Color(e)).getAlpha(),r=isNaN(parseFloat(r))?1:parseFloat(r),r*=i,{offset:s,color:e.toRgb(),opacity:r}}function d(t,e,i){var r,n=0,A=1,s="";for(var o in e)"Infinity"===e[o]?e[o]=1:"-Infinity"===e[o]&&(e[o]=0),r=parseFloat(e[o],10),A="string"==typeof e[o]&&/^\d+%$/.test(e[o])?.01:1,"x1"===o||"x2"===o||"r2"===o?(A*="objectBoundingBox"===i?t.width:1,n="objectBoundingBox"===i&&t.left||0):("y1"===o||"y2"===o)&&(A*="objectBoundingBox"===i?t.height:1,n="objectBoundingBox"===i&&t.top||0),e[o]=r*A+n;if("ellipse"===t.type&&null!==e.r2&&"objectBoundingBox"===i&&t.rx!==t.ry){var a=t.ry/t.rx;s=" scale(1, "+a+")",e.y1&&(e.y1/=a),e.y2&&(e.y2/=a)}return s}var g=fabric.util.object.clone;fabric.Gradient=fabric.util.createClass({offsetX:0,offsetY:0,initialize:function(t){t||(t={});var e={};this.id=fabric.Object.__uid++,this.type=t.type||"linear",e={x1:t.coords.x1||0,y1:t.coords.y1||0,x2:t.coords.x2||0,y2:t.coords.y2||0},"radial"===this.type&&(e.r1=t.coords.r1||0,e.r2=t.coords.r2||0),this.coords=e,this.colorStops=t.colorStops.slice(),t.gradientTransform&&(this.gradientTransform=t.gradientTransform),this.offsetX=t.offsetX||this.offsetX,this.offsetY=t.offsetY||this.offsetY},addColorStop:function(t){for(var e in t){var i=new fabric.Color(t[e]);this.colorStops.push({offset:parseFloat(e),color:i.toRgb(),opacity:i.getAlpha()})}return this},toObject:function(t){var e={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return fabric.util.populateWithProperties(this,e,t),e},toSVG:function(t){var e,i,r,n,A=g(this.coords,!0),s=g(this.colorStops,!0),o=A.r1>A.r2,a=t.width/2,l=t.height/2;for(var c in s.sort(function(t,e){return t.offset-e.offset}),"path"===t.type&&(a-=t.pathOffset.x,l-=t.pathOffset.y),A)"x1"===c||"x2"===c?A[c]+=this.offsetX-a:("y1"===c||"y2"===c)&&(A[c]+=this.offsetY-l);if(n='id="SVGID_'+this.id+'" gradientUnits="userSpaceOnUse"',this.gradientTransform&&(n+=' gradientTransform="matrix('+this.gradientTransform.join(" ")+')" '),"linear"===this.type?r=["<linearGradient ",n,' x1="',A.x1,'" y1="',A.y1,'" x2="',A.x2,'" y2="',A.y2,'">\n']:"radial"===this.type&&(r=["<radialGradient ",n,' cx="',o?A.x1:A.x2,'" cy="',o?A.y1:A.y2,'" r="',o?A.r1:A.r2,'" fx="',o?A.x2:A.x1,'" fy="',o?A.y2:A.y1,'">\n']),"radial"===this.type){if(o)for((s=s.concat()).reverse(),e=0,i=s.length;e<i;e++)s[e].offset=1-s[e].offset;var h=Math.min(A.r1,A.r2);if(0<h){var u=h/Math.max(A.r1,A.r2);for(e=0,i=s.length;e<i;e++)s[e].offset+=u*(1-s[e].offset)}}for(e=0,i=s.length;e<i;e++){var f=s[e];r.push("<stop ",'offset="',100*f.offset+"%",'" style="stop-color:',f.color,null!==f.opacity?";stop-opacity: "+f.opacity:";",'"/>\n')}return r.push("linear"===this.type?"</linearGradient>\n":"</radialGradient>\n"),r.join("")},toLive:function(t){var e,i,r,n=fabric.util.object.clone(this.coords);if(this.type){for("linear"===this.type?e=t.createLinearGradient(n.x1,n.y1,n.x2,n.y2):"radial"===this.type&&(e=t.createRadialGradient(n.x1,n.y1,n.r1,n.x2,n.y2,n.r2)),i=0,r=this.colorStops.length;i<r;i++){var A=this.colorStops[i].color,s=this.colorStops[i].opacity,o=this.colorStops[i].offset;void 0!==s&&(A=new fabric.Color(A).setAlpha(s).toRgba()),e.addColorStop(o,A)}return e}}}),fabric.util.object.extend(fabric.Gradient,{fromElement:function(t,e){var i,r,n,A,s,o,a=t.getElementsByTagName("stop"),l=t.getAttribute("gradientUnits")||"objectBoundingBox",c=t.getAttribute("gradientTransform"),h=[];for("linear"===(i="linearGradient"===t.nodeName||"LINEARGRADIENT"===t.nodeName?"linear":"radial")?r={x1:(o=t).getAttribute("x1")||0,y1:o.getAttribute("y1")||0,x2:o.getAttribute("x2")||"100%",y2:o.getAttribute("y2")||0}:"radial"===i&&(r={x1:(s=t).getAttribute("fx")||s.getAttribute("cx")||"50%",y1:s.getAttribute("fy")||s.getAttribute("cy")||"50%",r1:0,x2:s.getAttribute("cx")||"50%",y2:s.getAttribute("cy")||"50%",r2:s.getAttribute("r")||"50%"}),A=a.length;A--;)h.push(f(a[A]));n=d(e,r,l);var u=new fabric.Gradient({type:i,coords:r,colorStops:h,offsetX:-e.left,offsetY:-e.top});return(c||""!==n)&&(u.gradientTransform=fabric.parseTransformAttribute((c||"")+n)),u},forObject:function(t,e){return e||(e={}),d(t,e.coords,"userSpaceOnUse"),new fabric.Gradient(e)}})}(),function(){"use strict";var n=fabric.util.toFixed;fabric.Pattern=fabric.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,initialize:function(t,e){if(t||(t={}),this.id=fabric.Object.__uid++,this.setOptions(t),!t.source||t.source&&"string"!=typeof t.source)e&&e(this);else if(void 0!==fabric.util.getFunctionBody(t.source))this.source=new Function(fabric.util.getFunctionBody(t.source)),e&&e(this);else{var i=this;this.source=fabric.util.createImage(),fabric.util.loadImage(t.source,function(t){i.source=t,e&&e(i)})}},toObject:function(t){var e,i,r=fabric.Object.NUM_FRACTION_DIGITS;return"function"==typeof this.source?e=String(this.source):"string"==typeof this.source.src?e=this.source.src:"object"==typeof this.source&&this.source.toDataURL&&(e=this.source.toDataURL()),i={type:"pattern",source:e,repeat:this.repeat,offsetX:n(this.offsetX,r),offsetY:n(this.offsetY,r)},fabric.util.populateWithProperties(this,i,t),i},toSVG:function(t){var e="function"==typeof this.source?this.source():this.source,i=e.width/t.width,r=e.height/t.height,n=this.offsetX/t.width,A=this.offsetY/t.height,s="";return("repeat-x"===this.repeat||"no-repeat"===this.repeat)&&(r=1),("repeat-y"===this.repeat||"no-repeat"===this.repeat)&&(i=1),e.src?s=e.src:e.toDataURL&&(s=e.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+n+'" y="'+A+'" width="'+i+'" height="'+r+'">\n<image x="0" y="0" width="'+e.width+'" height="'+e.height+'" xlink:href="'+s+'"></image>\n</pattern>\n'},setOptions:function(t){for(var e in t)this[e]=t[e]},toLive:function(t){var e="function"==typeof this.source?this.source():this.source;if(!e)return"";if(void 0!==e.src){if(!e.complete)return"";if(0===e.naturalWidth||0===e.naturalHeight)return""}return t.createPattern(e,this.repeat)}})}(),function(t){"use strict";var A=t.fabric||(t.fabric={}),s=A.util.toFixed;A.Shadow?A.warn("fabric.Shadow is already defined."):(A.Shadow=A.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,initialize:function(t){for(var e in"string"==typeof t&&(t=this._parseShadow(t)),t)this[e]=t[e];this.id=A.Object.__uid++},_parseShadow:function(t){var e=t.trim(),i=A.Shadow.reOffsetsAndBlur.exec(e)||[];return{color:(e.replace(A.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)").trim(),offsetX:parseInt(i[1],10)||0,offsetY:parseInt(i[2],10)||0,blur:parseInt(i[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(t){var e=40,i=40,r=A.Object.NUM_FRACTION_DIGITS,n=A.util.rotateVector({x:this.offsetX,y:this.offsetY},A.util.degreesToRadians(-t.angle));return t.width&&t.height&&(e=100*s((Math.abs(n.x)+this.blur)/t.width,r)+20,i=100*s((Math.abs(n.y)+this.blur)/t.height,r)+20),t.flipX&&(n.x*=-1),t.flipY&&(n.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+i+'%" height="'+(100+2*i)+'%" x="-'+e+'%" width="'+(100+2*e)+'%" >\n\t<feGaussianBlur in="SourceAlpha" stdDeviation="'+s(this.blur?this.blur/2:0,r)+'"></feGaussianBlur>\n\t<feOffset dx="'+s(n.x,r)+'" dy="'+s(n.y,r)+'" result="oBlur" ></feOffset>\n\t<feFlood flood-color="'+this.color+'"/>\n\t<feComposite in2="oBlur" operator="in" />\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke};var e={},i=A.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke"].forEach(function(t){this[t]!==i[t]&&(e[t]=this[t])},this),e}}),A.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:px)?(?:\s?|$))?(-?\d+(?:px)?(?:\s?|$))?(\d+(?:px)?)?(?:\s?|$)(?:$|\s)/)}("undefined"!=typeof exports?exports:this),function(){"use strict";if(fabric.StaticCanvas)fabric.warn("fabric.StaticCanvas is already defined.");else{var r=fabric.util.object.extend,t=fabric.util.getElementOffset,l=fabric.util.removeFromArray,o=fabric.util.toFixed,A=fabric.util.transformPoint,s=fabric.util.invertTransform,e=new Error("Could not initialize `canvas` element");fabric.StaticCanvas=fabric.util.createClass(fabric.CommonMethods,{initialize:function(t,e){e||(e={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(t,e)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,clipTo:null,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:fabric.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,onBeforeScaleRotate:function(){},enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,_initStatic:function(t,e){var i=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(t),this._initOptions(e),this._setImageSmoothing(),this.interactive||this._initRetinaScaling(),e.overlayImage&&this.setOverlayImage(e.overlayImage,i),e.backgroundImage&&this.setBackgroundImage(e.backgroundImage,i),e.backgroundColor&&this.setBackgroundColor(e.backgroundColor,i),e.overlayColor&&this.setOverlayColor(e.overlayColor,i),this.calcOffset()},_isRetinaScaling:function(){return 1!==fabric.devicePixelRatio&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?fabric.devicePixelRatio:1},_initRetinaScaling:function(){this._isRetinaScaling()&&(this.lowerCanvasEl.setAttribute("width",this.width*fabric.devicePixelRatio),this.lowerCanvasEl.setAttribute("height",this.height*fabric.devicePixelRatio),this.contextContainer.scale(fabric.devicePixelRatio,fabric.devicePixelRatio))},calcOffset:function(){return this._offset=t(this.lowerCanvasEl),this},setOverlayImage:function(t,e,i){return this.__setBgOverlayImage("overlayImage",t,e,i)},setBackgroundImage:function(t,e,i){return this.__setBgOverlayImage("backgroundImage",t,e,i)},setOverlayColor:function(t,e){return this.__setBgOverlayColor("overlayColor",t,e)},setBackgroundColor:function(t,e){return this.__setBgOverlayColor("backgroundColor",t,e)},_setImageSmoothing:function(){var t=this.getContext();t.imageSmoothingEnabled=t.imageSmoothingEnabled||t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled||t.oImageSmoothingEnabled,t.imageSmoothingEnabled=this.imageSmoothingEnabled},__setBgOverlayImage:function(e,t,i,r){return"string"==typeof t?fabric.util.loadImage(t,function(t){t&&(this[e]=new fabric.Image(t,r)),i&&i(t)},this,r&&r.crossOrigin):(r&&t.setOptions(r),this[e]=t,i&&i(t)),this},__setBgOverlayColor:function(t,e,i){return this[t]=e,this._initGradient(e,t),this._initPattern(e,t,i),this},_createCanvasElement:function(){var t=fabric.util.createCanvasElement();if(!t)throw e;if(t.style||(t.style={}),void 0===t.getContext)throw e;return t},_initOptions:function(t){this._setOptions(t),this.width=this.width||parseInt(this.lowerCanvasEl.width,10)||0,this.height=this.height||parseInt(this.lowerCanvasEl.height,10)||0,this.lowerCanvasEl.style&&(this.lowerCanvasEl.width=this.width,this.lowerCanvasEl.height=this.height,this.lowerCanvasEl.style.width=this.width+"px",this.lowerCanvasEl.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(t){this.lowerCanvasEl=t&&t.getContext?t:fabric.util.getById(t)||this._createCanvasElement(),fabric.util.addClass(this.lowerCanvasEl,"lower-canvas"),this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(t,e){return this.setDimensions({width:t},e)},setHeight:function(t,e){return this.setDimensions({height:t},e)},setDimensions:function(t,e){var i;for(var r in e=e||{},t)i=t[r],e.cssOnly||(this._setBackstoreDimension(r,t[r]),i+="px"),e.backstoreOnly||this._setCssDimension(r,i);return this._initRetinaScaling(),this._setImageSmoothing(),this.calcOffset(),e.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(t,e){return this.lowerCanvasEl[t]=e,this.upperCanvasEl&&(this.upperCanvasEl[t]=e),this.cacheCanvasEl&&(this.cacheCanvasEl[t]=e),this[t]=e,this},_setCssDimension:function(t,e){return this.lowerCanvasEl.style[t]=e,this.upperCanvasEl&&(this.upperCanvasEl.style[t]=e),this.wrapperEl&&(this.wrapperEl.style[t]=e),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(t){var e,i,r,n=this._activeObject;for(this.viewportTransform=t,i=0,r=this._objects.length;i<r;i++)(e=this._objects[i]).group||e.setCoords(!1,!0);return n&&"activeSelection"===n.type&&n.setCoords(!1,!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(t,e){var i=t,r=this.viewportTransform.slice(0);t=A(t,s(this.viewportTransform)),r[0]=e,r[3]=e;var n=A(t,r);return r[4]+=i.x-n.x,r[5]+=i.y-n.y,this.setViewportTransform(r)},setZoom:function(t){return this.zoomToPoint(new fabric.Point(0,0),t),this},absolutePan:function(t){var e=this.viewportTransform.slice(0);return e[4]=-t.x,e[5]=-t.y,this.setViewportTransform(e)},relativePan:function(t){return this.absolutePan(new fabric.Point(-t.x-this.viewportTransform[4],-t.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(t){this.stateful&&t.setupState(),t._set("canvas",this),t.setCoords(),this.fire("object:added",{target:t}),t.fire("added")},_onObjectRemoved:function(t){this.fire("object:removed",{target:t}),t.fire("removed"),delete t.canvas},clearContext:function(t){return t.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this._objects.length=0,this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var t=this.contextContainer;return this.renderCanvas(t,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=fabric.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var t={},e=this.width,i=this.height,r=s(this.viewportTransform);return t.tl=A({x:0,y:0},r),t.br=A({x:e,y:i},r),t.tr=new fabric.Point(t.br.x,t.tl.y),t.bl=new fabric.Point(t.tl.x,t.br.y),this.vptCoords=t},renderCanvas:function(t,e){var i=this.viewportTransform;this.isRendering&&(fabric.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.calcViewportBoundaries(),this.clearContext(t),this.fire("before:render"),this.clipTo&&fabric.util.clipContext(this,t),this._renderBackground(t),t.save(),t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),this._renderObjects(t,e),t.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(t),this.clipTo&&t.restore(),this._renderOverlay(t),this.controlsAboveOverlay&&this.interactive&&this.drawControls(t),this.fire("after:render")},_renderObjects:function(t,e){var i,r;for(i=0,r=e.length;i<r;++i)e[i]&&e[i].render(t)},_renderBackgroundOrOverlay:function(t,e){var i,r=this[e+"Color"];r&&(t.fillStyle=r.toLive?r.toLive(t,this):r,t.fillRect(r.offsetX||0,r.offsetY||0,this.width,this.height)),(r=this[e+"Image"])&&(this[e+"Vpt"]&&(i=this.viewportTransform,t.save(),t.transform(i[0],i[1],i[2],i[3],i[4],i[5])),r.render(t),this[e+"Vpt"]&&t.restore())},_renderBackground:function(t){this._renderBackgroundOrOverlay(t,"background")},_renderOverlay:function(t){this._renderBackgroundOrOverlay(t,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},centerObjectH:function(t){return this._centerObject(t,new fabric.Point(this.getCenter().left,t.getCenterPoint().y))},centerObjectV:function(t){return this._centerObject(t,new fabric.Point(t.getCenterPoint().x,this.getCenter().top))},centerObject:function(t){var e=this.getCenter();return this._centerObject(t,new fabric.Point(e.left,e.top))},viewportCenterObject:function(t){var e=this.getVpCenter();return this._centerObject(t,e)},viewportCenterObjectH:function(t){var e=this.getVpCenter();return this._centerObject(t,new fabric.Point(e.x,t.getCenterPoint().y)),this},viewportCenterObjectV:function(t){var e=this.getVpCenter();return this._centerObject(t,new fabric.Point(t.getCenterPoint().x,e.y))},getVpCenter:function(){var t=this.getCenter(),e=s(this.viewportTransform);return A({x:t.left,y:t.top},e)},_centerObject:function(t,e){return t.setPositionByOrigin(e,"center","center"),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(t){return this.toDatalessObject(t)},toObject:function(t){return this._toObjectMethod("toObject",t)},toDatalessObject:function(t){return this._toObjectMethod("toDatalessObject",t)},_toObjectMethod:function(t,e){var i={version:fabric.version,objects:this._toObjects(t,e)};return r(i,this.__serializeBgOverlay(t,e)),fabric.util.populateWithProperties(this,i,e),i},_toObjects:function(e,i){return this.getObjects().filter(function(t){return!t.excludeFromExport}).map(function(t){return this._toObject(t,e,i)},this)},_toObject:function(t,e,i){var r;this.includeDefaultValues||(r=t.includeDefaultValues,t.includeDefaultValues=!1);var n=t[e](i);return this.includeDefaultValues||(t.includeDefaultValues=r),n},__serializeBgOverlay:function(t,e){var i={},r=this.backgroundImage,n=this.overlayImage;return this.backgroundColor&&(i.background=this.backgroundColor.toObject?this.backgroundColor.toObject(e):this.backgroundColor),this.overlayColor&&(i.overlay=this.overlayColor.toObject?this.overlayColor.toObject(e):this.overlayColor),r&&!r.excludeFromExport&&(i.backgroundImage=this._toObject(r,t,e)),n&&!n.excludeFromExport&&(i.overlayImage=this._toObject(n,t,e)),i},svgViewportTransformation:!0,toSVG:function(t,e){t||(t={});var i=[];return this._setSVGPreamble(i,t),this._setSVGHeader(i,t),this._setSVGBgOverlayColor(i,"backgroundColor"),this._setSVGBgOverlayImage(i,"backgroundImage",e),this._setSVGObjects(i,e),this._setSVGBgOverlayColor(i,"overlayColor"),this._setSVGBgOverlayImage(i,"overlayImage",e),i.push("</svg>"),i.join("")},_setSVGPreamble:function(t,e){e.suppressPreamble||t.push('<?xml version="1.0" encoding="',e.encoding||"UTF-8",'" standalone="no" ?>\n','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(t,e){var i,r=e.width||this.width,n=e.height||this.height,A='viewBox="0 0 '+this.width+" "+this.height+'" ',s=fabric.Object.NUM_FRACTION_DIGITS;e.viewBox?A='viewBox="'+e.viewBox.x+" "+e.viewBox.y+" "+e.viewBox.width+" "+e.viewBox.height+'" ':this.svgViewportTransformation&&(i=this.viewportTransform,A='viewBox="'+o(-i[4]/i[0],s)+" "+o(-i[5]/i[3],s)+" "+o(this.width/i[0],s)+" "+o(this.height/i[3],s)+'" '),t.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',r,'" ','height="',n,'" ',A,'xml:space="preserve">\n',"<desc>Created with Fabric.js ",fabric.version,"</desc>\n","<defs>\n",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),"</defs>\n")},createSVGRefElementsMarkup:function(){var i=this;return["backgroundColor","overlayColor"].map(function(t){var e=i[t];return e&&e.toLive?e.toSVG(i,!1):void 0}).join("")},createSVGFontFacesMarkup:function(){var t,e,i,r,n,A,s,o,a="",l={},c=fabric.fontPaths,h=this.getObjects();for(s=0,o=h.length;s<o;s++)if(e=(t=h[s]).fontFamily,-1!==t.type.indexOf("text")&&!l[e]&&c[e]&&(l[e]=!0,t.styles))for(n in i=t.styles)for(A in r=i[n])!l[e=r[A].fontFamily]&&c[e]&&(l[e]=!0);for(var u in l)a+=["\t\t@font-face {\n","\t\t\tfont-family: '",u,"';\n","\t\t\tsrc: url('",c[u],"');\n","\t\t}\n"].join("");return a&&(a=['\t<style type="text/css">',"<![CDATA[\n",a,"]]>","</style>\n"].join("")),a},_setSVGObjects:function(t,e){var i,r,n,A=this.getObjects();for(r=0,n=A.length;r<n;r++)(i=A[r]).excludeFromExport||this._setSVGObject(t,i,e)},_setSVGObject:function(t,e,i){t.push(e.toSVG(i))},_setSVGBgOverlayImage:function(t,e,i){this[e]&&this[e].toSVG&&t.push(this[e].toSVG(i))},_setSVGBgOverlayColor:function(t,e){var i=this[e];if(i)if(i.toLive){var r=i.repeat;t.push('<rect transform="translate(',this.width/2,",",this.height/2,')"',' x="',i.offsetX-this.width/2,'" y="',i.offsetY-this.height/2,'" ','width="',"repeat-y"===r||"no-repeat"===r?i.source.width:this.width,'" height="',"repeat-x"===r||"no-repeat"===r?i.source.height:this.height,'" fill="url(#SVGID_'+i.id+')"',"></rect>\n")}else t.push('<rect x="0" y="0" ','width="',this.width,'" height="',this.height,'" fill="',this[e],'"',"></rect>\n")},sendToBack:function(t){if(!t)return this;var e,i,r,n=this._activeObject;if(t===n&&"activeSelection"===t.type)for(e=(r=n._objects).length;e--;)i=r[e],l(this._objects,i),this._objects.unshift(i);else l(this._objects,t),this._objects.unshift(t);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(t){if(!t)return this;var e,i,r,n=this._activeObject;if(t===n&&"activeSelection"===t.type)for(r=n._objects,e=0;e<r.length;e++)i=r[e],l(this._objects,i),this._objects.push(i);else l(this._objects,t),this._objects.push(t);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(t,e){if(!t)return this;var i,r,n,A,s,o=this._activeObject,a=0;if(t===o&&"activeSelection"===t.type)for(s=o._objects,i=0;i<s.length;i++)r=s[i],0+a<(n=this._objects.indexOf(r))&&(A=n-1,l(this._objects,r),this._objects.splice(A,0,r)),a++;else 0!==(n=this._objects.indexOf(t))&&(A=this._findNewLowerIndex(t,n,e),l(this._objects,t),this._objects.splice(A,0,t));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(t,e,i){var r,n;if(i)for(n=(r=e)-1;0<=n;--n){if(t.intersectsWithObject(this._objects[n])||t.isContainedWithinObject(this._objects[n])||this._objects[n].isContainedWithinObject(t)){r=n;break}}else r=e-1;return r},bringForward:function(t,e){if(!t)return this;var i,r,n,A,s,o=this._activeObject,a=0;if(t===o&&"activeSelection"===t.type)for(i=(s=o._objects).length;i--;)r=s[i],(n=this._objects.indexOf(r))<this._objects.length-1-a&&(A=n+1,l(this._objects,r),this._objects.splice(A,0,r)),a++;else(n=this._objects.indexOf(t))!==this._objects.length-1&&(A=this._findNewUpperIndex(t,n,e),l(this._objects,t),this._objects.splice(A,0,t));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(t,e,i){var r,n,A;if(i)for(n=(r=e)+1,A=this._objects.length;n<A;++n){if(t.intersectsWithObject(this._objects[n])||t.isContainedWithinObject(this._objects[n])||this._objects[n].isContainedWithinObject(t)){r=n;break}}else r=e+1;return r},moveTo:function(t,e){return l(this._objects,t),this._objects.splice(e,0,t),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this._objects.length=0,this.backgroundImage=null,this.overlayImage=null,this._iTextInstances=null,this.lowerCanvasEl=null,this.cacheCanvasEl=null,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this.getObjects().length+" }>"}}),r(fabric.StaticCanvas.prototype,fabric.Observable),r(fabric.StaticCanvas.prototype,fabric.Collection),r(fabric.StaticCanvas.prototype,fabric.DataURLExporter),r(fabric.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(t){var e=fabric.util.createCanvasElement();if(!e||!e.getContext)return null;var i=e.getContext("2d");if(!i)return null;switch(t){case"getImageData":return void 0!==i.getImageData;case"setLineDash":return void 0!==i.setLineDash;case"toDataURL":return void 0!==e.toDataURL;case"toDataURLWithQuality":try{return e.toDataURL("image/jpeg",0),!0}catch(t){}return!1;default:return null}}}),fabric.StaticCanvas.prototype.toJSON=fabric.StaticCanvas.prototype.toObject,fabric.isLikelyNode&&(fabric.StaticCanvas.prototype.createPNGStream=function(){var t=fabric.jsdomImplForWrapper(this.lowerCanvasEl);return t&&t.createPNGStream()},fabric.StaticCanvas.prototype.createJPEGStream=function(t){var e=fabric.jsdomImplForWrapper(this.lowerCanvasEl);return e&&e.createJPEGStream(t)})}}(),fabric.BaseBrush=fabric.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,setShadow:function(t){return this.shadow=new fabric.Shadow(t),this},_setBrushStyles:function(){var t=this.canvas.contextTop;t.strokeStyle=this.color,t.lineWidth=this.width,t.lineCap=this.strokeLineCap,t.miterLimit=this.strokeMiterLimit,t.lineJoin=this.strokeLineJoin,this.strokeDashArray&&fabric.StaticCanvas.supports("setLineDash")&&t.setLineDash(this.strokeDashArray)},_setShadow:function(){if(this.shadow){var t=this.canvas.contextTop,e=this.canvas.getZoom();t.shadowColor=this.shadow.color,t.shadowBlur=this.shadow.blur*e,t.shadowOffsetX=this.shadow.offsetX*e,t.shadowOffsetY=this.shadow.offsetY*e}},_resetShadow:function(){var t=this.canvas.contextTop;t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0}}),fabric.PencilBrush=fabric.util.createClass(fabric.BaseBrush,{initialize:function(t){this.canvas=t,this._points=[]},onMouseDown:function(t){this._prepareForDrawing(t),this._captureDrawingPath(t),this._render()},onMouseMove:function(t){this._captureDrawingPath(t),this.canvas.clearContext(this.canvas.contextTop),this._render()},onMouseUp:function(){this._finalizeAndAddPath()},_prepareForDrawing:function(t){var e=new fabric.Point(t.x,t.y);this._reset(),this._addPoint(e),this.canvas.contextTop.moveTo(e.x,e.y)},_addPoint:function(t){1<this._points.length&&t.eq(this._points[this._points.length-1])||this._points.push(t)},_reset:function(){this._points.length=0,this._setBrushStyles(),this._setShadow()},_captureDrawingPath:function(t){var e=new fabric.Point(t.x,t.y);this._addPoint(e)},_render:function(){var t,e,i=this.canvas.contextTop,r=this.canvas.viewportTransform,n=this._points[0],A=this._points[1];if(i.save(),i.transform(r[0],r[1],r[2],r[3],r[4],r[5]),i.beginPath(),2===this._points.length&&n.x===A.x&&n.y===A.y){var s=this.width/1e3;n=new fabric.Point(n.x,n.y),A=new fabric.Point(A.x,A.y),n.x-=s,A.x+=s}for(i.moveTo(n.x,n.y),t=1,e=this._points.length;t<e;t++){var o=n.midPointFrom(A);i.quadraticCurveTo(n.x,n.y,o.x,o.y),n=this._points[t],A=this._points[t+1]}i.lineTo(n.x,n.y),i.stroke(),i.restore()},convertPointsToSVGPath:function(t){var e,i=[],r=this.width/1e3,n=new fabric.Point(t[0].x,t[0].y),A=new fabric.Point(t[1].x,t[1].y),s=t.length,o=1,a=1,l=2<s;for(l&&(o=t[2].x<A.x?-1:t[2].x===A.x?0:1,a=t[2].y<A.y?-1:t[2].y===A.y?0:1),i.push("M ",n.x-o*r," ",n.y-a*r," "),e=1;e<s;e++){if(!n.eq(A)){var c=n.midPointFrom(A);i.push("Q ",n.x," ",n.y," ",c.x," ",c.y," ")}n=t[e],e+1<t.length&&(A=t[e+1])}return l&&(o=n.x>t[e-2].x?1:n.x===t[e-2].x?0:-1,a=n.y>t[e-2].y?1:n.y===t[e-2].y?0:-1),i.push("L ",n.x+o*r," ",n.y+a*r),i},createPath:function(t){var e=new fabric.Path(t,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray}),i=new fabric.Point(e.left+e.width/2,e.top+e.height/2);return i=e.translateToGivenOrigin(i,"center","center",e.originX,e.originY),e.top=i.y,e.left=i.x,this.shadow&&(this.shadow.affectStroke=!0,e.setShadow(this.shadow)),e},_finalizeAndAddPath:function(){this.canvas.contextTop.closePath();var t=this.convertPointsToSVGPath(this._points).join("");if("M 0 0 Q 0 0 0 0 L 0 0"!==t){var e=this.createPath(t);this.canvas.clearContext(this.canvas.contextTop),this.canvas.add(e),this.canvas.renderAll(),e.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:e})}else this.canvas.requestRenderAll()}}),fabric.CircleBrush=fabric.util.createClass(fabric.BaseBrush,{width:10,initialize:function(t){this.canvas=t,this.points=[]},drawDot:function(t){var e=this.addPoint(t),i=this.canvas.contextTop,r=this.canvas.viewportTransform;i.save(),i.transform(r[0],r[1],r[2],r[3],r[4],r[5]),i.fillStyle=e.fill,i.beginPath(),i.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),i.closePath(),i.fill(),i.restore()},onMouseDown:function(t){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(t)},onMouseMove:function(t){this.drawDot(t)},onMouseUp:function(){var t,e,i=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;var r=[];for(t=0,e=this.points.length;t<e;t++){var n=this.points[t],A=new fabric.Circle({radius:n.radius,left:n.x,top:n.y,originX:"center",originY:"center",fill:n.fill});this.shadow&&A.setShadow(this.shadow),r.push(A)}var s=new fabric.Group(r,{originX:"center",originY:"center"});s.canvas=this.canvas,this.canvas.add(s),this.canvas.fire("path:created",{path:s}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=i,this.canvas.requestRenderAll()},addPoint:function(t){var e=new fabric.Point(t.x,t.y),i=fabric.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,r=new fabric.Color(this.color).setAlpha(fabric.util.getRandomInt(0,100)/100).toRgba();return e.radius=i,e.fill=r,this.points.push(e),e}}),fabric.SprayBrush=fabric.util.createClass(fabric.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(t){this.canvas=t,this.sprayChunks=[]},onMouseDown:function(t){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(t),this.render()},onMouseMove:function(t){this.addSprayChunk(t),this.render()},onMouseUp:function(){var t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var e=[],i=0,r=this.sprayChunks.length;i<r;i++)for(var n=this.sprayChunks[i],A=0,s=n.length;A<s;A++){var o=new fabric.Rect({width:n[A].width,height:n[A].width,left:n[A].x+1,top:n[A].y+1,originX:"center",originY:"center",fill:this.color});this.shadow&&o.setShadow(this.shadow),e.push(o)}this.optimizeOverlapping&&(e=this._getOptimizedRects(e));var a=new fabric.Group(e,{originX:"center",originY:"center"});a.canvas=this.canvas,this.canvas.add(a),this.canvas.fire("path:created",{path:a}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.requestRenderAll()},_getOptimizedRects:function(t){var e,i,r,n={};for(i=0,r=t.length;i<r;i++)n[e=t[i].left+""+t[i].top]||(n[e]=t[i]);var A=[];for(e in n)A.push(n[e]);return A},render:function(){var t=this.canvas.contextTop;t.fillStyle=this.color;var e,i,r=this.canvas.viewportTransform;for(t.save(),t.transform(r[0],r[1],r[2],r[3],r[4],r[5]),e=0,i=this.sprayChunkPoints.length;e<i;e++){var n=this.sprayChunkPoints[e];void 0!==n.opacity&&(t.globalAlpha=n.opacity),t.fillRect(n.x,n.y,n.width,n.width)}t.restore()},addSprayChunk:function(t){this.sprayChunkPoints=[];var e,i,r,n,A=this.width/2;for(n=0;n<this.density;n++){e=fabric.util.getRandomInt(t.x-A,t.x+A),i=fabric.util.getRandomInt(t.y-A,t.y+A),r=this.dotWidthVariance?fabric.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;var s=new fabric.Point(e,i);s.width=r,this.randomOpacity&&(s.opacity=fabric.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(s)}this.sprayChunks.push(this.sprayChunkPoints)}}),fabric.PatternBrush=fabric.util.createClass(fabric.PencilBrush,{getPatternSrc:function(){var t=fabric.document.createElement("canvas"),e=t.getContext("2d");return t.width=t.height=25,e.fillStyle=this.color,e.beginPath(),e.arc(10,10,10,0,2*Math.PI,!1),e.closePath(),e.fill(),t},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(){return this.canvas.contextTop.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(){this.callSuper("_setBrushStyles"),this.canvas.contextTop.strokeStyle=this.getPattern()},createPath:function(t){var e=this.callSuper("createPath",t),i=e._getLeftTopCoords().scalarAdd(e.strokeWidth/2);return e.stroke=new fabric.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-i.x,offsetY:-i.y}),e}}),function(){var a=fabric.util.getPointer,s=fabric.util.degreesToRadians,h=fabric.util.radiansToDegrees,u=Math.atan2,l=Math.abs,c=fabric.StaticCanvas.supports("setLineDash");for(var t in fabric.Canvas=fabric.util.createClass(fabric.StaticCanvas,{initialize:function(t,e){e||(e={}),this.renderAndResetBound=this.renderAndReset.bind(this),this._initStatic(t,e),this._initInteractive(),this._createCacheCanvas()},uniScaleTransform:!1,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",rotationCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=fabric.PencilBrush&&new fabric.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var t,e,i,r=this.getActiveObjects();if(0<r.length&&!this.preserveObjectStacking){e=[],i=[];for(var n=0,A=this._objects.length;n<A;n++)t=this._objects[n],-1===r.indexOf(t)?e.push(t):i.push(t);1<r.length&&(this._activeObject._objects=i),e.push.apply(e,i)}else e=this._objects;return e},renderAll:function(){!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1);var t=this.contextContainer;return this.renderCanvas(t,this._chooseObjectsToRender()),this},renderTop:function(){var t=this.contextTop;return this.clearContext(t),this.selection&&this._groupSelector&&this._drawSelection(t),this.fire("after:render"),this.contextTopDirty=!0,this},_resetCurrentTransform:function(){var t=this._currentTransform;t.target.set({scaleX:t.original.scaleX,scaleY:t.original.scaleY,skewX:t.original.skewX,skewY:t.original.skewY,left:t.original.left,top:t.original.top}),this._shouldCenterTransform(t.target)?"rotate"===t.action?this._setOriginToCenter(t.target):("center"!==t.originX&&(t.mouseXSign="right"===t.originX?-1:1),"center"!==t.originY&&(t.mouseYSign="bottom"===t.originY?-1:1),t.originX="center",t.originY="center"):(t.originX=t.original.originX,t.originY=t.original.originY)},containsPoint:function(t,e,i){var r,n=i||this.getPointer(t,!0);return r=e.group&&e.group===this._activeObject&&"activeSelection"===e.group.type?this._normalizePointer(e.group,n):{x:n.x,y:n.y},e.containsPoint(r)||e._findTargetCorner(n)},_normalizePointer:function(t,e){var i=t.calcTransformMatrix(),r=fabric.util.invertTransform(i),n=this.restorePointerVpt(e);return fabric.util.transformPoint(n,r)},isTargetTransparent:function(t,e,i){var r=this.contextCache,n=t.selectionBackgroundColor,A=this.viewportTransform;return t.selectionBackgroundColor="",this.clearContext(r),r.save(),r.transform(A[0],A[1],A[2],A[3],A[4],A[5]),t.render(r),r.restore(),t===this._activeObject&&t._renderControls(r,{hasBorders:!1,transparentCorners:!1},{hasBorders:!1}),t.selectionBackgroundColor=n,fabric.util.isTransparent(r,e,i,this.targetFindTolerance)},_isSelectionKeyPressed:function(e){return"[object Array]"===Object.prototype.toString.call(this.selectionKey)?!!this.selectionKey.find(function(t){return!0===e[t]}):e[this.selectionKey]},_shouldClearSelection:function(t,e){var i=this.getActiveObjects(),r=this._activeObject;return!e||e&&r&&1<i.length&&-1===i.indexOf(e)&&r!==e&&!this._isSelectionKeyPressed(t)||e&&!e.evented||e&&!e.selectable&&r&&r!==e},_shouldCenterTransform:function(t){if(t){var e,i=this._currentTransform;return"scale"===i.action||"scaleX"===i.action||"scaleY"===i.action?e=this.centeredScaling||t.centeredScaling:"rotate"===i.action&&(e=this.centeredRotation||t.centeredRotation),e?!i.altKey:i.altKey}},_getOriginFromCorner:function(t,e){var i={x:t.originX,y:t.originY};return"ml"===e||"tl"===e||"bl"===e?i.x="right":("mr"===e||"tr"===e||"br"===e)&&(i.x="left"),"tl"===e||"mt"===e||"tr"===e?i.y="bottom":("bl"===e||"mb"===e||"br"===e)&&(i.y="top"),i},_getActionFromCorner:function(t,e,i){if(!e)return"drag";switch(e){case"mtr":return"rotate";case"ml":case"mr":return i[this.altActionKey]?"skewY":"scaleX";case"mt":case"mb":return i[this.altActionKey]?"skewX":"scaleY";default:return"scale"}},_setupCurrentTransform:function(t,e){if(e){var i=this.getPointer(t),r=e._findTargetCorner(this.getPointer(t,!0)),n=this._getActionFromCorner(e,r,t),A=this._getOriginFromCorner(e,r);this._currentTransform={target:e,action:n,corner:r,scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,offsetX:i.x-e.left,offsetY:i.y-e.top,originX:A.x,originY:A.y,ex:i.x,ey:i.y,lastX:i.x,lastY:i.y,left:e.left,top:e.top,theta:s(e.angle),width:e.width*e.scaleX,mouseXSign:1,mouseYSign:1,shiftKey:t.shiftKey,altKey:t[this.centeredKey]},this._currentTransform.original={left:e.left,top:e.top,scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,originX:A.x,originY:A.y},this._resetCurrentTransform()}},_translateObject:function(t,e){var i=this._currentTransform,r=i.target,n=t-i.offsetX,A=e-i.offsetY,s=!r.get("lockMovementX")&&r.left!==n,o=!r.get("lockMovementY")&&r.top!==A;return s&&r.set("left",n),o&&r.set("top",A),s||o},_changeSkewTransformOrigin:function(t,e,i){var r="originX",n={0:"center"},A=e.target.skewX,s="left",o="right",a="mt"===e.corner||"ml"===e.corner?1:-1,l=1;t=0<t?1:-1,"y"===i&&(A=e.target.skewY,s="top",o="bottom",r="originY"),n[-1]=s,n[1]=o,e.target.flipX&&(l*=-1),e.target.flipY&&(l*=-1),0===A?(e.skewSign=-a*t*l,e[r]=n[-t]):(A=0<A?1:-1,e.skewSign=A,e[r]=n[A*a*l])},_skewObject:function(t,e,i){var r,n=this._currentTransform,A=n.target,s=A.get("lockSkewingX"),o=A.get("lockSkewingY");if(s&&"x"===i||o&&"y"===i)return!1;var a,l,c=A.getCenterPoint(),h=A.toLocalPoint(new fabric.Point(t,e),"center","center")[i],u=A.toLocalPoint(new fabric.Point(n.lastX,n.lastY),"center","center")[i],f=A._getTransformedDimensions();return this._changeSkewTransformOrigin(h-u,n,i),a=A.toLocalPoint(new fabric.Point(t,e),n.originX,n.originY)[i],l=A.translateToOriginPoint(c,n.originX,n.originY),r=this._setObjectSkew(a,n,i,f),n.lastX=t,n.lastY=e,A.setPositionByOrigin(l,n.originX,n.originY),r},_setObjectSkew:function(t,e,i,r){var n,A,s,o,a,l,c,h,u,f,d=e.target,g=e.skewSign;return"x"===i?(o="y",a="Y",l="X",h=0,u=d.skewY):(o="x",a="X",l="Y",h=d.skewX,u=0),s=d._getTransformedDimensions(h,u),(c=2*Math.abs(t)-s[i])<=2?n=0:(n=g*Math.atan(c/d["scale"+l]/(s[o]/d["scale"+a])),n=fabric.util.radiansToDegrees(n)),f=d["skew"+l]!==n,d.set("skew"+l,n),0!==d["skew"+a]&&(A=d._getTransformedDimensions(),n=r[o]/A[o]*d["scale"+a],d.set("scale"+a,n)),f},_scaleObject:function(t,e,i){var r=this._currentTransform,n=r.target,A=n.get("lockScalingX"),s=n.get("lockScalingY"),o=n.get("lockScalingFlip");if(A&&s)return!1;var a,l=n.translateToOriginPoint(n.getCenterPoint(),r.originX,r.originY),c=n.toLocalPoint(new fabric.Point(t,e),r.originX,r.originY),h=n._getTransformedDimensions();return this._setLocalMouse(c,r),a=this._setObjectScale(c,r,A,s,i,o,h),n.setPositionByOrigin(l,r.originX,r.originY),a},_setObjectScale:function(t,e,i,r,n,A,s){var o,a,l,c,h=e.target,u=!1,f=!1,d=!1;return l=t.x*h.scaleX/s.x,c=t.y*h.scaleY/s.y,o=h.scaleX!==l,a=h.scaleY!==c,A&&l<=0&&l<h.scaleX&&(u=!0,t.x=0),A&&c<=0&&c<h.scaleY&&(f=!0,t.y=0),"equally"!==n||i||r?n?"x"!==n||h.get("lockUniScaling")?"y"!==n||h.get("lockUniScaling")||f||r||h.set("scaleY",c)&&(d=d||a):u||i||h.set("scaleX",l)&&(d=d||o):(u||i||h.set("scaleX",l)&&(d=d||o),f||r||h.set("scaleY",c)&&(d=d||a)):d=this._scaleObjectEqually(t,h,e,s),e.newScaleX=l,e.newScaleY=c,u||f||this._flipObject(e,n),d},_scaleObjectEqually:function(t,e,i,r){var n,A=t.y+t.x,s=r.y*i.original.scaleY/e.scaleY+r.x*i.original.scaleX/e.scaleX,o=t.x<0?-1:1,a=t.y<0?-1:1;return i.newScaleX=o*Math.abs(i.original.scaleX*A/s),i.newScaleY=a*Math.abs(i.original.scaleY*A/s),n=i.newScaleX!==e.scaleX||i.newScaleY!==e.scaleY,e.set("scaleX",i.newScaleX),e.set("scaleY",i.newScaleY),n},_flipObject:function(t,e){t.newScaleX<0&&"y"!==e&&("left"===t.originX?t.originX="right":"right"===t.originX&&(t.originX="left")),t.newScaleY<0&&"x"!==e&&("top"===t.originY?t.originY="bottom":"bottom"===t.originY&&(t.originY="top"))},_setLocalMouse:function(t,e){var i=e.target,r=this.getZoom(),n=i.padding/r;"right"===e.originX?t.x*=-1:"center"===e.originX&&(t.x*=2*e.mouseXSign,t.x<0&&(e.mouseXSign=-e.mouseXSign)),"bottom"===e.originY?t.y*=-1:"center"===e.originY&&(t.y*=2*e.mouseYSign,t.y<0&&(e.mouseYSign=-e.mouseYSign)),l(t.x)>n?t.x<0?t.x+=n:t.x-=n:t.x=0,l(t.y)>n?t.y<0?t.y+=n:t.y-=n:t.y=0},_rotateObject:function(t,e){var i=this._currentTransform;if(i.target.get("lockRotation"))return!1;var r=u(i.ey-i.top,i.ex-i.left),n=u(e-i.top,t-i.left),A=h(n-r+i.theta),s=!0;if(0<i.target.snapAngle){var o=i.target.snapAngle,a=i.target.snapThreshold||o,l=Math.ceil(A/o)*o,c=Math.floor(A/o)*o;Math.abs(A-c)<a?A=c:Math.abs(A-l)<a&&(A=l)}return A<0&&(A=360+A),A%=360,i.target.angle===A?s=!1:i.target.angle=A,s},setCursor:function(t){this.upperCanvasEl.style.cursor=t},_resetObjectTransform:function(t){t.scaleX=1,t.scaleY=1,t.skewX=0,t.skewY=0,t.rotate(0)},_drawSelection:function(t){var e=this._groupSelector,i=e.left,r=e.top,n=l(i),A=l(r);if(this.selectionColor&&(t.fillStyle=this.selectionColor,t.fillRect(e.ex-(0<i?0:-i),e.ey-(0<r?0:-r),n,A)),this.selectionLineWidth&&this.selectionBorderColor)if(t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,1<this.selectionDashArray.length&&!c){var s=e.ex+.5-(0<i?0:n),o=e.ey+.5-(0<r?0:A);t.beginPath(),fabric.util.drawDashedLine(t,s,o,s+n,o,this.selectionDashArray),fabric.util.drawDashedLine(t,s,o+A-1,s+n,o+A-1,this.selectionDashArray),fabric.util.drawDashedLine(t,s,o,s,o+A,this.selectionDashArray),fabric.util.drawDashedLine(t,s+n-1,o,s+n-1,o+A,this.selectionDashArray),t.closePath(),t.stroke()}else fabric.Object.prototype._setLineDash.call(this,t,this.selectionDashArray),t.strokeRect(e.ex+.5-(0<i?0:n),e.ey+.5-(0<r?0:A),n,A)},findTarget:function(t,e){if(!this.skipTargetFind){var i,r,n=this.getPointer(t,!0),A=this._activeObject,s=this.getActiveObjects();if(this.targets=[],1<s.length&&!e&&A===this._searchPossibleTargets([A],n))return A;if(1===s.length&&A._findTargetCorner(n))return A;if(1===s.length&&A===this._searchPossibleTargets([A],n)){if(!this.preserveObjectStacking)return A;i=A,r=this.targets,this.targets=[]}var o=this._searchPossibleTargets(this._objects,n);return t[this.altSelectionKey]&&o&&i&&o!==i&&(o=i,this.targets=r),o}},_checkTarget:function(t,e){if(e&&e.visible&&e.evented&&this.containsPoint(null,e,t)){if(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing)return!0;if(!this.isTargetTransparent(e,t.x,t.y))return!0}},_searchPossibleTargets:function(t,e){for(var i,r,n,A=t.length;A--;)if(this._checkTarget(e,t[A])){"group"===(i=t[A]).type&&i.subTargetCheck&&(r=this._normalizePointer(i,e),(n=this._searchPossibleTargets(i._objects,r))&&this.targets.push(n));break}return i},restorePointerVpt:function(t){return fabric.util.transformPoint(t,fabric.util.invertTransform(this.viewportTransform))},getPointer:function(t,e,i){i||(i=this.upperCanvasEl);var r,n=a(t),A=i.getBoundingClientRect(),s=A.width||0,o=A.height||0;return s&&o||("top"in A&&"bottom"in A&&(o=Math.abs(A.top-A.bottom)),"right"in A&&"left"in A&&(s=Math.abs(A.right-A.left))),this.calcOffset(),n.x=n.x-this._offset.left,n.y=n.y-this._offset.top,e||(n=this.restorePointerVpt(n)),r=0===s||0===o?{width:1,height:1}:{width:i.width/s,height:i.height/o},{x:n.x*r.width,y:n.y*r.height}},_createUpperCanvas:function(){var t=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,"");this.upperCanvasEl?this.upperCanvasEl.className="":this.upperCanvasEl=this._createCanvasElement(),fabric.util.addClass(this.upperCanvasEl,"upper-canvas "+t),this.wrapperEl.appendChild(this.upperCanvasEl),this._copyCanvasStyle(this.lowerCanvasEl,this.upperCanvasEl),this._applyCanvasStyle(this.upperCanvasEl),this.contextTop=this.upperCanvasEl.getContext("2d")},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=fabric.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),fabric.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),fabric.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(t){var e=this.width||t.width,i=this.height||t.height;fabric.util.setStyle(t,{position:"absolute",width:e+"px",height:i+"px",left:0,top:0,"touch-action":"none"}),t.width=e,t.height=i,fabric.util.makeElementUnselectable(t)},_copyCanvasStyle:function(t,e){e.style.cssText=t.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var t=this._activeObject;return t?"activeSelection"===t.type&&t._objects?t._objects.slice(0):[t]:[]},_onObjectRemoved:function(t){t===this._activeObject&&(this.fire("before:selection:cleared",{target:t}),this._discardActiveObject(),this.fire("selection:cleared",{target:t}),t.fire("deselected")),this._hoveredTarget===t&&(this._hoveredTarget=null),this.callSuper("_onObjectRemoved",t)},_fireSelectionEvents:function(e,t){var i=!1,r=this.getActiveObjects(),n=[],A=[],s={e:t};e.forEach(function(t){-1===r.indexOf(t)&&(i=!0,t.fire("deselected",s),A.push(t))}),r.forEach(function(t){-1===e.indexOf(t)&&(i=!0,t.fire("selected",s),n.push(t))}),0<e.length&&0<r.length?(s.selected=n,s.deselected=A,s.updated=n[0]||A[0],s.target=this._activeObject,i&&this.fire("selection:updated",s)):0<r.length?(1===r.length&&(s.target=n[0],this.fire("object:selected",s)),s.selected=n,s.target=this._activeObject,this.fire("selection:created",s)):0<e.length&&(s.deselected=A,this.fire("selection:cleared",s))},setActiveObject:function(t,e){var i=this.getActiveObjects();return this._setActiveObject(t,e),this._fireSelectionEvents(i,e),this},_setActiveObject:function(t,e){return this._activeObject!==t&&(!!this._discardActiveObject(e,t)&&(!t.onSelect({e:e})&&(this._activeObject=t,!0)))},_discardActiveObject:function(t,e){var i=this._activeObject;if(i){if(i.onDeselect({e:t,object:e}))return!1;this._activeObject=null}return!0},discardActiveObject:function(t){var e=this.getActiveObjects();return e.length&&this.fire("before:selection:cleared",{target:e[0],e:t}),this._discardActiveObject(t),this._fireSelectionEvents(e,t),this},dispose:function(){var t=this.wrapperEl;return this.removeListeners(),t.removeChild(this.upperCanvasEl),t.removeChild(this.lowerCanvasEl),delete this.upperCanvasEl,t.parentNode&&t.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,fabric.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(t){var e=this._activeObject;e&&e._renderControls(t)},_toObject:function(t,e,i){var r=this._realizeGroupTransformOnObject(t),n=this.callSuper("_toObject",t,e,i);return this._unwindGroupTransformOnObject(t,r),n},_realizeGroupTransformOnObject:function(e){if(e.group&&"activeSelection"===e.group.type&&this._activeObject===e.group){var i={};return["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"].forEach(function(t){i[t]=e[t]}),this._activeObject.realizeTransform(e),i}return null},_unwindGroupTransformOnObject:function(t,e){e&&t.set(e)},_setSVGObject:function(t,e,i){var r=this._realizeGroupTransformOnObject(e);this.callSuper("_setSVGObject",t,e,i),this._unwindGroupTransformOnObject(e,r)}}),fabric.StaticCanvas)"prototype"!==t&&(fabric.Canvas[t]=fabric.StaticCanvas[t]);fabric.isTouchSupported&&(fabric.Canvas.prototype._setCursorFromEvent=function(){})}(),function(){function o(t,e){return"which"in t?t.which===e:t.button===e-1}var n={mt:0,tr:1,mr:2,br:3,mb:4,bl:5,ml:6,tl:7},i=fabric.util.addListener,r=fabric.util.removeListener;fabric.util.object.extend(fabric.Canvas.prototype,{cursorMap:["n-resize","ne-resize","e-resize","se-resize","s-resize","sw-resize","w-resize","nw-resize"],_initEventListeners:function(){this.removeListeners(),this._bindEvents(),i(fabric.window,"resize",this._onResize),i(this.upperCanvasEl,"mousedown",this._onMouseDown),i(this.upperCanvasEl,"dblclick",this._onDoubleClick),i(this.upperCanvasEl,"mousemove",this._onMouseMove),i(this.upperCanvasEl,"mouseout",this._onMouseOut),i(this.upperCanvasEl,"mouseenter",this._onMouseEnter),i(this.upperCanvasEl,"wheel",this._onMouseWheel),i(this.upperCanvasEl,"contextmenu",this._onContextMenu),i(this.upperCanvasEl,"touchstart",this._onMouseDown,{passive:!1}),i(this.upperCanvasEl,"touchmove",this._onMouseMove,{passive:!1}),"undefined"!=typeof eventjs&&"add"in eventjs&&(eventjs.add(this.upperCanvasEl,"gesture",this._onGesture),eventjs.add(this.upperCanvasEl,"drag",this._onDrag),eventjs.add(this.upperCanvasEl,"orientation",this._onOrientationChange),eventjs.add(this.upperCanvasEl,"shake",this._onShake),eventjs.add(this.upperCanvasEl,"longpress",this._onLongPress))},_bindEvents:function(){this.eventsBinded||(this._onMouseDown=this._onMouseDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this.eventsBinded=!0)},removeListeners:function(){r(fabric.window,"resize",this._onResize),r(this.upperCanvasEl,"mousedown",this._onMouseDown),r(this.upperCanvasEl,"mousemove",this._onMouseMove),r(this.upperCanvasEl,"mouseout",this._onMouseOut),r(this.upperCanvasEl,"mouseenter",this._onMouseEnter),r(this.upperCanvasEl,"wheel",this._onMouseWheel),r(this.upperCanvasEl,"contextmenu",this._onContextMenu),r(this.upperCanvasEl,"doubleclick",this._onDoubleClick),r(this.upperCanvasEl,"touchstart",this._onMouseDown),r(this.upperCanvasEl,"touchmove",this._onMouseMove),"undefined"!=typeof eventjs&&"remove"in eventjs&&(eventjs.remove(this.upperCanvasEl,"gesture",this._onGesture),eventjs.remove(this.upperCanvasEl,"drag",this._onDrag),eventjs.remove(this.upperCanvasEl,"orientation",this._onOrientationChange),eventjs.remove(this.upperCanvasEl,"shake",this._onShake),eventjs.remove(this.upperCanvasEl,"longpress",this._onLongPress))},_onGesture:function(t,e){this.__onTransformGesture&&this.__onTransformGesture(t,e)},_onDrag:function(t,e){this.__onDrag&&this.__onDrag(t,e)},_onMouseWheel:function(t){this.__onMouseWheel(t)},_onMouseOut:function(t){var e=this._hoveredTarget;this.fire("mouse:out",{target:e,e:t}),this._hoveredTarget=null,e&&e.fire("mouseout",{e:t}),this._iTextInstances&&this._iTextInstances.forEach(function(t){t.isEditing&&t.hiddenTextarea.focus()})},_onMouseEnter:function(t){this.findTarget(t)||(this.fire("mouse:over",{target:null,e:t}),this._hoveredTarget=null)},_onOrientationChange:function(t,e){this.__onOrientationChange&&this.__onOrientationChange(t,e)},_onShake:function(t,e){this.__onShake&&this.__onShake(t,e)},_onLongPress:function(t,e){this.__onLongPress&&this.__onLongPress(t,e)},_onContextMenu:function(t){return this.stopContextMenu&&(t.stopPropagation(),t.preventDefault()),!1},_onDoubleClick:function(t){this._handleEvent(t,"dblclick",void 0)},_onMouseDown:function(t){this.__onMouseDown(t),i(fabric.document,"touchend",this._onMouseUp,{passive:!1}),i(fabric.document,"touchmove",this._onMouseMove,{passive:!1}),r(this.upperCanvasEl,"mousemove",this._onMouseMove),r(this.upperCanvasEl,"touchmove",this._onMouseMove),"touchstart"===t.type?r(this.upperCanvasEl,"mousedown",this._onMouseDown):(i(fabric.document,"mouseup",this._onMouseUp),i(fabric.document,"mousemove",this._onMouseMove))},_onMouseUp:function(t){if(this.__onMouseUp(t),r(fabric.document,"mouseup",this._onMouseUp),r(fabric.document,"touchend",this._onMouseUp),r(fabric.document,"mousemove",this._onMouseMove),r(fabric.document,"touchmove",this._onMouseMove),i(this.upperCanvasEl,"mousemove",this._onMouseMove),i(this.upperCanvasEl,"touchmove",this._onMouseMove,{passive:!1}),"touchend"===t.type){var e=this;setTimeout(function(){i(e.upperCanvasEl,"mousedown",e._onMouseDown)},400)}},_onMouseMove:function(t){!this.allowTouchScrolling&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t)},_onResize:function(){this.calcOffset()},_shouldRender:function(t,e){var i=this._activeObject;return(!i||!i.isEditing||t!==i)&&!!(t&&(t.isMoving||t!==i)||!t&&i||!t&&!i&&!this._groupSelector||e&&this._previousPointer&&this.selection&&(e.x!==this._previousPointer.x||e.y!==this._previousPointer.y))},__onMouseUp:function(t){var e,i=!0,r=this._currentTransform,n=this._groupSelector,A=!n||0===n.left&&0===n.top;if(o(t,3))this.fireRightClick&&this._handleEvent(t,"up",e,3,A);else if(o(t,2))this.fireMiddleClick&&this._handleEvent(t,"up",e,2,A);else if(this.isDrawingMode&&this._isCurrentlyDrawing)this._onMouseUpInDrawingMode(t);else{r&&(this._finalizeCurrentTransform(t),i=!r.actionPerformed),e=i?this.findTarget(t,!0):r.target;var s=this._shouldRender(e,this.getPointer(t));e||!A?this._maybeGroupObjects(t):(this._groupSelector=null,this._currentTransform=null),e&&(e.isMoving=!1),this._setCursorFromEvent(t,e),this._handleEvent(t,"up",e||null,1,A),e&&(e.__corner=0),s&&this.requestRenderAll()}},_handleEvent:function(t,e,i,r,n){var A=void 0===i?this.findTarget(t):i,s=this.targets||[],o={e:t,target:A,subTargets:s,button:r||1,isClick:n||!1};this.fire("mouse:"+e,o),A&&A.fire("mouse"+e,o);for(var a=0;a<s.length;a++)s[a].fire("mouse"+e,o)},_finalizeCurrentTransform:function(t){var e=this._currentTransform,i=e.target;i._scaling&&(i._scaling=!1),i.setCoords(),this._restoreOriginXY(i),(e.actionPerformed||this.stateful&&i.hasStateChanged())&&(this.fire("object:modified",{target:i,e:t}),i.fire("modified",{e:t}))},_restoreOriginXY:function(t){if(this._previousOriginX&&this._previousOriginY){var e=t.translateToOriginPoint(t.getCenterPoint(),this._previousOriginX,this._previousOriginY);t.originX=this._previousOriginX,t.originY=this._previousOriginY,t.left=e.x,t.top=e.y,this._previousOriginX=null,this._previousOriginY=null}},_onMouseDownInDrawingMode:function(t){this._isCurrentlyDrawing=!0,this.discardActiveObject(t).requestRenderAll(),this.clipTo&&fabric.util.clipContext(this,this.contextTop);var e=this.getPointer(t);this.freeDrawingBrush.onMouseDown(e),this._handleEvent(t,"down")},_onMouseMoveInDrawingMode:function(t){if(this._isCurrentlyDrawing){var e=this.getPointer(t);this.freeDrawingBrush.onMouseMove(e)}this.setCursor(this.freeDrawingCursor),this._handleEvent(t,"move")},_onMouseUpInDrawingMode:function(t){this._isCurrentlyDrawing=!1,this.clipTo&&this.contextTop.restore(),this.freeDrawingBrush.onMouseUp(),this._handleEvent(t,"up")},__onMouseDown:function(t){var e=this.findTarget(t);if(o(t,3))this.fireRightClick&&this._handleEvent(t,"down",e||null,3);else if(o(t,2))this.fireMiddleClick&&this._handleEvent(t,"down",e||null,2);else if(this.isDrawingMode)this._onMouseDownInDrawingMode(t);else if(!this._currentTransform){var i=this.getPointer(t,!0);this._previousPointer=i;var r=this._shouldRender(e,i),n=this._shouldGroup(t,e);this._shouldClearSelection(t,e)?this.discardActiveObject(t):n&&(this._handleGrouping(t,e),e=this._activeObject),!this.selection||e&&(e.selectable||e.isEditing||e===this._activeObject)||(this._groupSelector={ex:i.x,ey:i.y,top:0,left:0}),e&&(e.selectable&&this.setActiveObject(e,t),e!==this._activeObject||!e.__corner&&n||(this._beforeTransform(t,e),this._setupCurrentTransform(t,e))),this._handleEvent(t,"down",e||null),r&&this.requestRenderAll()}},_beforeTransform:function(t,e){this.stateful&&e.saveState(),e._findTargetCorner(this.getPointer(t))&&this.onBeforeScaleRotate(e)},_setOriginToCenter:function(t){this._previousOriginX=this._currentTransform.target.originX,this._previousOriginY=this._currentTransform.target.originY;var e=t.getCenterPoint();t.originX="center",t.originY="center",t.left=e.x,t.top=e.y,this._currentTransform.left=t.left,this._currentTransform.top=t.top},_setCenterToOrigin:function(t){var e=t.translateToOriginPoint(t.getCenterPoint(),this._previousOriginX,this._previousOriginY);t.originX=this._previousOriginX,t.originY=this._previousOriginY,t.left=e.x,t.top=e.y,this._previousOriginX=null,this._previousOriginY=null},__onMouseMove:function(t){var e,i;if(this.isDrawingMode)this._onMouseMoveInDrawingMode(t);else if(!(void 0!==t.touches&&1<t.touches.length)){var r=this._groupSelector;r?(i=this.getPointer(t,!0),r.left=i.x-r.ex,r.top=i.y-r.ey,this.renderTop()):this._currentTransform?this._transformObject(t):(e=this.findTarget(t),this._setCursorFromEvent(t,e),this._fireOverOutEvents(e,t)),this._handleEvent(t,"move",this._currentTransform?null:e)}},_fireOverOutEvents:function(t,e){var i,r,n=this._hoveredTarget;n!==t&&(i={e:e,target:t,previousTarget:this._hoveredTarget},r={e:e,target:this._hoveredTarget,nextTarget:t},this._hoveredTarget=t),t?n!==t&&(n&&(this.fire("mouse:out",r),n.fire("mouseout",r)),this.fire("mouse:over",i),t.fire("mouseover",i)):n&&(this.fire("mouse:out",r),n.fire("mouseout",r))},__onMouseWheel:function(t){this._handleEvent(t,"wheel")},_transformObject:function(t){var e=this.getPointer(t),i=this._currentTransform;i.reset=!1,i.target.isMoving=!0,i.shiftKey=t.shiftKey,i.altKey=t[this.centeredKey],this._beforeScaleTransform(t,i),this._performTransformAction(t,i,e),i.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(t,e,i){var r=i.x,n=i.y,A=e.target,s=e.action,o=!1;"rotate"===s?(o=this._rotateObject(r,n))&&this._fire("rotating",A,t):"scale"===s?(o=this._onScale(t,e,r,n))&&this._fire("scaling",A,t):"scaleX"===s?(o=this._scaleObject(r,n,"x"))&&this._fire("scaling",A,t):"scaleY"===s?(o=this._scaleObject(r,n,"y"))&&this._fire("scaling",A,t):"skewX"===s?(o=this._skewObject(r,n,"x"))&&this._fire("skewing",A,t):"skewY"===s?(o=this._skewObject(r,n,"y"))&&this._fire("skewing",A,t):(o=this._translateObject(r,n))&&(this._fire("moving",A,t),this.setCursor(A.moveCursor||this.moveCursor)),e.actionPerformed=e.actionPerformed||o},_fire:function(t,e,i){this.fire("object:"+t,{target:e,e:i}),e.fire(t,{e:i})},_beforeScaleTransform:function(t,e){if("scale"===e.action||"scaleX"===e.action||"scaleY"===e.action){var i=this._shouldCenterTransform(e.target);(i&&("center"!==e.originX||"center"!==e.originY)||!i&&"center"===e.originX&&"center"===e.originY)&&(this._resetCurrentTransform(),e.reset=!0)}},_onScale:function(t,e,i,r){return this._isUniscalePossible(t,e.target)?(e.currentAction="scale",this._scaleObject(i,r)):(e.reset||"scale"!==e.currentAction||this._resetCurrentTransform(),e.currentAction="scaleEqually",this._scaleObject(i,r,"equally"))},_isUniscalePossible:function(t,e){return(t[this.uniScaleKey]||this.uniScaleTransform)&&!e.get("lockUniScaling")},_setCursorFromEvent:function(t,e){if(!e)return this.setCursor(this.defaultCursor),!1;var i=e.hoverCursor||this.hoverCursor,r=this._activeObject&&"activeSelection"===this._activeObject.type?this._activeObject:null,n=(!r||!r.contains(e))&&e._findTargetCorner(this.getPointer(t,!0));this.setCursor(n?this.getCornerCursor(n,e,t):i)},getCornerCursor:function(t,e,i){return this.actionIsDisabled(t,e,i)?this.notAllowedCursor:t in n?this._getRotatedCornerCursor(t,e,i):"mtr"===t&&e.hasRotatingPoint?this.rotationCursor:this.defaultCursor},actionIsDisabled:function(t,e,i){return"mt"===t||"mb"===t?i[this.altActionKey]?e.lockSkewingX:e.lockScalingY:"ml"===t||"mr"===t?i[this.altActionKey]?e.lockSkewingY:e.lockScalingX:"mtr"===t?e.lockRotation:this._isUniscalePossible(i,e)?e.lockScalingX&&e.lockScalingY:e.lockScalingX||e.lockScalingY},_getRotatedCornerCursor:function(t,e,i){var r=Math.round(e.angle%360/45);return r<0&&(r+=8),r+=n[t],i[this.altActionKey]&&n[t]%2==0&&(r+=2),r%=8,this.cursorMap[r]}})}(),function(){var c=Math.min,h=Math.max;fabric.util.object.extend(fabric.Canvas.prototype,{_shouldGroup:function(t,e){var i=this._activeObject;return i&&this._isSelectionKeyPressed(t)&&e&&e.selectable&&this.selection&&(i!==e||"activeSelection"===i.type)},_handleGrouping:function(t,e){var i=this._activeObject;i.__corner||(e!==i||(e=this.findTarget(t,!0)))&&(i&&"activeSelection"===i.type?this._updateActiveSelection(e,t):this._createActiveSelection(e,t))},_updateActiveSelection:function(t,e){var i=this._activeObject,r=i._objects.slice(0);i.contains(t)?(i.removeWithUpdate(t),this._hoveredTarget=t,1===i.size()&&this._setActiveObject(i.item(0),e)):(i.addWithUpdate(t),this._hoveredTarget=i),this._fireSelectionEvents(r,e)},_createActiveSelection:function(t,e){var i=this.getActiveObjects(),r=this._createGroup(t);this._hoveredTarget=r,this._setActiveObject(r,e),this._fireSelectionEvents(i,e)},_createGroup:function(t){var e=this.getObjects(),i=e.indexOf(this._activeObject)<e.indexOf(t)?[this._activeObject,t]:[t,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new fabric.ActiveSelection(i,{canvas:this})},_groupSelectedObjects:function(t){var e,i=this._collectObjects();1===i.length?this.setActiveObject(i[0],t):1<i.length&&(e=new fabric.ActiveSelection(i.reverse(),{canvas:this}),this.setActiveObject(e,t))},_collectObjects:function(){for(var t,e=[],i=this._groupSelector.ex,r=this._groupSelector.ey,n=i+this._groupSelector.left,A=r+this._groupSelector.top,s=new fabric.Point(c(i,n),c(r,A)),o=new fabric.Point(h(i,n),h(r,A)),a=i===n&&r===A,l=this._objects.length;l--&&!((t=this._objects[l])&&t.selectable&&t.visible&&(t.intersectsWithRect(s,o)||t.isContainedWithinRect(s,o)||t.containsPoint(s)||t.containsPoint(o))&&(e.push(t),a)););return e},_maybeGroupObjects:function(t){this.selection&&this._groupSelector&&this._groupSelectedObjects(t),this.setCursor(this.defaultCursor),this._groupSelector=null,this._currentTransform=null}})}(),function(){var r=fabric.StaticCanvas.supports("toDataURLWithQuality");fabric.util.object.extend(fabric.StaticCanvas.prototype,{toDataURL:function(t){t||(t={});var e=t.format||"png",i=t.quality||1,r=t.multiplier||1,n={left:t.left||0,top:t.top||0,width:t.width||0,height:t.height||0};return this.__toDataURLWithMultiplier(e,i,n,r)},__toDataURLWithMultiplier:function(t,e,i,r){var n=this.width,A=this.height,s=(i.width||this.width)*r,o=(i.height||this.height)*r,a=this.getZoom()*r,l=this.viewportTransform,c=[a,0,0,a,(l[4]-i.left)*r,(l[5]-i.top)*r],h=this.interactive,u=this.skipOffscreen,f=n!==s||A!==o;this.viewportTransform=c,this.skipOffscreen=!1,this.interactive=!1,f&&this.setDimensions({width:s,height:o},{backstoreOnly:!0}),this.renderAll();var d=this.__toDataURL(t,e,i);return this.interactive=h,this.skipOffscreen=u,this.viewportTransform=l,f&&this.setDimensions({width:n,height:A},{backstoreOnly:!0}),this.renderAll(),d},__toDataURL:function(t,e){var i=this.contextContainer.canvas;return"jpg"===t&&(t="jpeg"),r?i.toDataURL("image/"+t,e):i.toDataURL("image/"+t)}})}(),fabric.util.object.extend(fabric.StaticCanvas.prototype,{loadFromDatalessJSON:function(t,e,i){return this.loadFromJSON(t,e,i)},loadFromJSON:function(t,e,i){if(t){var r="string"==typeof t?JSON.parse(t):fabric.util.object.clone(t),n=this,A=this.renderOnAddRemove;return this.renderOnAddRemove=!1,this._enlivenObjects(r.objects,function(t){n.clear(),n._setBgOverlay(r,function(){t.forEach(function(t,e){n.insertAt(t,e)}),n.renderOnAddRemove=A,delete r.objects,delete r.backgroundImage,delete r.overlayImage,delete r.background,delete r.overlay,n._setOptions(r),n.renderAll(),e&&e()})},i),this}},_setBgOverlay:function(t,e){var i={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(t.backgroundImage||t.overlayImage||t.background||t.overlay){var r=function(){i.backgroundImage&&i.overlayImage&&i.backgroundColor&&i.overlayColor&&e&&e()};this.__setBgOverlay("backgroundImage",t.backgroundImage,i,r),this.__setBgOverlay("overlayImage",t.overlayImage,i,r),this.__setBgOverlay("backgroundColor",t.background,i,r),this.__setBgOverlay("overlayColor",t.overlay,i,r)}else e&&e()},__setBgOverlay:function(e,t,i,r){var n=this;return t?void("backgroundImage"===e||"overlayImage"===e?fabric.util.enlivenObjects([t],function(t){n[e]=t[0],i[e]=!0,r&&r()}):this["set"+fabric.util.string.capitalize(e,!0)](t,function(){i[e]=!0,r&&r()})):(i[e]=!0,void(r&&r()))},_enlivenObjects:function(t,e,i){return t&&0!==t.length?void fabric.util.enlivenObjects(t,function(t){e&&e(t)},null,i):void(e&&e([]))},_toDataURL:function(e,i){this.clone(function(t){i(t.toDataURL(e))})},_toDataURLWithMultiplier:function(e,i,r){this.clone(function(t){r(t.toDataURLWithMultiplier(e,i))})},clone:function(e,t){var i=JSON.stringify(this.toJSON(t));this.cloneWithoutData(function(t){t.loadFromJSON(i,function(){e&&e(t)})})},cloneWithoutData:function(t){var e=fabric.document.createElement("canvas");e.width=this.width,e.height=this.height;var i=new fabric.Canvas(e);i.clipTo=this.clipTo,this.backgroundImage?(i.setBackgroundImage(this.backgroundImage.src,function(){i.renderAll(),t&&t(i)}),i.backgroundImageOpacity=this.backgroundImageOpacity,i.backgroundImageStretch=this.backgroundImageStretch):t&&t(i)}}),function(t){"use strict";var w=t.fabric||(t.fabric={}),e=w.util.object.extend,s=w.util.object.clone,r=w.util.toFixed,i=w.util.string.capitalize,o=w.util.degreesToRadians,n=w.StaticCanvas.supports("setLineDash"),A=!w.isLikelyNode;w.Object||(w.Object=w.util.createClass(w.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgba(102,153,255,0.75)",borderDashArray:null,cornerColor:"rgba(102,153,255,0.5)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:10,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,transformMatrix:null,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,hasRotatingPoint:!0,rotatingPointOffset:40,perPixelTargetFind:!1,includeDefaultValues:!0,clipTo:null,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockUniScaling:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:A,statefullCache:!1,noScaleCache:!0,dirty:!0,__corner:0,paintFirst:"fill",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow clipTo visible backgroundColor skewX skewY fillRule paintFirst".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeLineCap strokeLineJoin strokeMiterLimit backgroundColor".split(" "),initialize:function(t){t&&this.setOptions(t)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=w.document.createElement("canvas"),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas()},_limitCacheSize:function(t){var e=w.perfLimitSizeTotal,i=t.width,r=t.height,n=w.maxCacheSideLimit,A=w.minCacheSideLimit;if(i<=n&&r<=n&&i*r<=e)return i<A&&(t.width=A),r<A&&(t.height=A),t;var s=i/r,o=w.util.limitDimsByArea(s,e),a=w.util.capValue,l=a(A,o.x,n),c=a(A,o.y,n);return l<i&&(t.zoomX/=i/l,t.width=l,t.capped=!0),c<r&&(t.zoomY/=r/c,t.height=c,t.capped=!0),t},_getCacheCanvasDimensions:function(){var t=this.canvas&&this.canvas.getZoom()||1,e=this.getObjectScaling(),i=this.canvas&&this.canvas._isRetinaScaling()?w.devicePixelRatio:1,r=this._getNonTransformedDimensions(),n=e.scaleX*t*i,A=e.scaleY*t*i;return{width:r.x*n+2,height:r.y*A+2,zoomX:n,zoomY:A,x:r.x,y:r.y}},_updateCacheCanvas:function(){if(this.noScaleCache&&this.canvas&&this.canvas._currentTransform){var t=this.canvas._currentTransform.target,e=this.canvas._currentTransform.action;if(this===t&&e.slice&&"scale"===e.slice(0,5))return!1}var i,r,n=this._cacheCanvas,A=this._limitCacheSize(this._getCacheCanvasDimensions()),s=w.minCacheSideLimit,o=A.width,a=A.height,l=A.zoomX,c=A.zoomY,h=o!==this.cacheWidth||a!==this.cacheHeight,u=this.zoomX!==l||this.zoomY!==c,f=h||u,d=0,g=0,p=!1;if(h){var B=this._cacheCanvas.width,m=this._cacheCanvas.height,v=B<o||m<a;p=v||(o<.9*B||a<.9*m)&&s<B&&s<m,v&&!A.capped&&(s<o||s<a)&&(d=.1*o,g=.1*a)}return!!f&&(p?(n.width=Math.ceil(o+d),n.height=Math.ceil(a+g)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,n.width,n.height)),i=A.x*l/2,r=A.y*c/2,this.cacheTranslationX=Math.round(n.width/2-i)+i,this.cacheTranslationY=Math.round(n.height/2-r)+r,this.cacheWidth=o,this.cacheHeight=a,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(l,c),this.zoomX=l,this.zoomY=c,!0)},setOptions:function(t){this._setOptions(t),this._initGradient(t.fill,"fill"),this._initGradient(t.stroke,"stroke"),this._initClipping(t),this._initPattern(t.fill,"fill"),this._initPattern(t.stroke,"stroke")},transform:function(t){var e;e=this.group&&!this.group._transformDone?this.calcTransformMatrix():this.calcOwnMatrix(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5])},toObject:function(t){var e=w.Object.NUM_FRACTION_DIGITS,i={type:this.type,version:w.version,originX:this.originX,originY:this.originY,left:r(this.left,e),top:r(this.top,e),width:r(this.width,e),height:r(this.height,e),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:r(this.strokeWidth,e),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:r(this.strokeMiterLimit,e),scaleX:r(this.scaleX,e),scaleY:r(this.scaleY,e),angle:r(this.angle,e),flipX:this.flipX,flipY:this.flipY,opacity:r(this.opacity,e),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,clipTo:this.clipTo&&String(this.clipTo),backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,transformMatrix:this.transformMatrix?this.transformMatrix.concat():null,skewX:r(this.skewX,e),skewY:r(this.skewY,e)};return w.util.populateWithProperties(this,i,t),this.includeDefaultValues||(i=this._removeDefaultValues(i)),i},toDatalessObject:function(t){return this.toObject(t)},_removeDefaultValues:function(e){var i=w.util.getKlass(e.type).prototype;return i.stateProperties.forEach(function(t){e[t]===i[t]&&delete e[t],"[object Array]"===Object.prototype.toString.call(e[t])&&"[object Array]"===Object.prototype.toString.call(i[t])&&0===e[t].length&&0===i[t].length&&delete e[t]}),e},toString:function(){return"#<fabric."+i(this.type)+">"},getObjectScaling:function(){var t=this.scaleX,e=this.scaleY;if(this.group){var i=this.group.getObjectScaling();t*=i.scaleX,e*=i.scaleY}return{scaleX:t,scaleY:e}},getObjectOpacity:function(){var t=this.opacity;return this.group&&(t*=this.group.getObjectOpacity()),t},_set:function(t,e){var i="scaleX"===t||"scaleY"===t,r=this[t]!==e,n=!1;return i&&(e=this._constrainScale(e)),"scaleX"===t&&e<0?(this.flipX=!this.flipX,e*=-1):"scaleY"===t&&e<0?(this.flipY=!this.flipY,e*=-1):"shadow"!==t||!e||e instanceof w.Shadow?"dirty"===t&&this.group&&this.group.set("dirty",e):e=new w.Shadow(e),this[t]=e,r&&(n=this.group&&this.group.isOnACache(),-1<this.cacheProperties.indexOf(t)?(this.dirty=!0,n&&this.group.set("dirty",!0)):n&&-1<this.stateProperties.indexOf(t)&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:w.iMatrix.concat()},isNotVisible:function(){return 0===this.opacity||0===this.width&&0===this.height||!this.visible},render:function(t){this.isNotVisible()||(!this.canvas||!this.canvas.skipOffscreen||this.group||this.isOnScreen())&&(t.save(),this._setupCompositeOperation(t),this.drawSelectionBackground(t),this.transform(t),this._setOpacity(t),this._setShadow(t,this),this.transformMatrix&&t.transform.apply(t,this.transformMatrix),this.clipTo&&w.util.clipContext(this,t),this.shouldCache()?(this._cacheCanvas||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext),this.dirty=!1),this.drawCacheOnCanvas(t)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(t),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),this.clipTo&&t.restore(),t.restore())},_removeCacheCanvas:function(){this._cacheCanvas=null,this.cacheWidth=0,this.cacheHeight=0},needsItsOwnCache:function(){return"stroke"===this.paintFirst&&"object"==typeof this.shadow},shouldCache:function(){return this.ownCaching=this.objectCaching&&(!this.group||this.needsItsOwnCache()||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(0!==this.shadow.offsetX||0!==this.shadow.offsetY)},drawObject:function(t){this._renderBackground(t),this._setStrokeStyles(t,this),this._setFillStyles(t,this),this._render(t)},drawCacheOnCanvas:function(t){t.scale(1/this.zoomX,1/this.zoomY),t.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(t){if(this.isNotVisible())return!1;if(this._cacheCanvas&&!t&&this._updateCacheCanvas())return!0;if(this.dirty||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&!t){var e=this.cacheWidth/this.zoomX,i=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-e/2,-i/2,e,i)}return!0}return!1},_renderBackground:function(t){if(this.backgroundColor){var e=this._getNonTransformedDimensions();t.fillStyle=this.backgroundColor,t.fillRect(-e.x/2,-e.y/2,e.x,e.y),this._removeShadow(t)}},_setOpacity:function(t){this.group&&!this.group._transformDone?t.globalAlpha=this.getObjectOpacity():t.globalAlpha*=this.opacity},_setStrokeStyles:function(t,e){e.stroke&&(t.lineWidth=e.strokeWidth,t.lineCap=e.strokeLineCap,t.lineJoin=e.strokeLineJoin,t.miterLimit=e.strokeMiterLimit,t.strokeStyle=e.stroke.toLive?e.stroke.toLive(t,this):e.stroke)},_setFillStyles:function(t,e){e.fill&&(t.fillStyle=e.fill.toLive?e.fill.toLive(t,this):e.fill)},_setLineDash:function(t,e,i){e&&(1&e.length&&e.push.apply(e,e),n?t.setLineDash(e):i&&i(t))},_renderControls:function(t,e){var i,r,n,A=this.getViewportTransform(),s=this.calcTransformMatrix();r=void 0!==(e=e||{}).hasBorders?e.hasBorders:this.hasBorders,n=void 0!==e.hasControls?e.hasControls:this.hasControls,s=w.util.multiplyTransformMatrices(A,s),i=w.util.qrDecompose(s),t.save(),t.translate(i.translateX,i.translateY),t.lineWidth=1*this.borderScaleFactor,this.group||(t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),e.forActiveSelection?(t.rotate(o(i.angle)),r&&this.drawBordersInGroup(t,i,e)):(t.rotate(o(this.angle)),r&&this.drawBorders(t,e)),n&&this.drawControls(t,e),t.restore()},_setShadow:function(t){if(this.shadow){var e=this.canvas&&this.canvas.viewportTransform[0]||1,i=this.canvas&&this.canvas.viewportTransform[3]||1,r=this.getObjectScaling();this.canvas&&this.canvas._isRetinaScaling()&&(e*=w.devicePixelRatio,i*=w.devicePixelRatio),t.shadowColor=this.shadow.color,t.shadowBlur=this.shadow.blur*w.browserShadowBlurConstant*(e+i)*(r.scaleX+r.scaleY)/4,t.shadowOffsetX=this.shadow.offsetX*e*r.scaleX,t.shadowOffsetY=this.shadow.offsetY*i*r.scaleY}},_removeShadow:function(t){this.shadow&&(t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0)},_applyPatternGradientTransform:function(t,e){if(!e||!e.toLive)return{offsetX:0,offsetY:0};var i=e.gradientTransform||e.patternTransform,r=-this.width/2+e.offsetX||0,n=-this.height/2+e.offsetY||0;return t.translate(r,n),i&&t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),{offsetX:r,offsetY:n}},_renderPaintInOrder:function(t){"stroke"===this.paintFirst?(this._renderStroke(t),this._renderFill(t)):(this._renderFill(t),this._renderStroke(t))},_renderFill:function(t){this.fill&&(t.save(),this._applyPatternGradientTransform(t,this.fill),"evenodd"===this.fillRule?t.fill("evenodd"):t.fill(),t.restore())},_renderStroke:function(t){this.stroke&&0!==this.strokeWidth&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray,this._renderDashedStroke),this._applyPatternGradientTransform(t,this.stroke),t.stroke(),t.restore())},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var t=w.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",t.scaleX),this.set("scaleY",t.scaleY),this.angle=t.angle,this.skewX=t.skewX,this.skewY=0}},_removeTransformMatrix:function(t){var e=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),e=w.util.transformPoint(e,this.transformMatrix)),this.transformMatrix=null,t&&(this.scaleX*=t.scaleX,this.scaleY*=t.scaleY,this.cropX=t.cropX,this.cropY=t.cropY,e.x+=t.offsetLeft,e.y+=t.offsetTop,this.width=t.width,this.height=t.height),this.setPositionByOrigin(e,"center","center")},clone:function(t,e){var i=this.toObject(e);this.constructor.fromObject?this.constructor.fromObject(i,t):w.Object._fromObject("Object",i,t)},cloneAsImage:function(e,t){var i=this.toDataURL(t);return w.util.loadImage(i,function(t){e&&e(new w.Image(t))}),this},toDataURL:function(t){t||(t={});var e=w.util.createCanvasElement(),i=this.getBoundingRect();e.width=i.width,e.height=i.height,w.util.wrapElement(e,"div");var r=new w.StaticCanvas(e,{enableRetinaScaling:t.enableRetinaScaling});"jpg"===t.format&&(t.format="jpeg"),"jpeg"===t.format&&(r.backgroundColor="#fff");var n={left:this.left,top:this.top};this.setPositionByOrigin(new w.Point(r.width/2,r.height/2),"center","center");var A=this.canvas;r.add(this);var s=r.toDataURL(t);return this.set(n).setCoords(),this.canvas=A,r.dispose(),r=null,s},isType:function(t){return this.type===t},complexity:function(){return 1},toJSON:function(t){return this.toObject(t)},setGradient:function(t,e){e||(e={});var i={colorStops:[]};return i.type=e.type||(e.r1||e.r2?"radial":"linear"),i.coords={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2},(e.r1||e.r2)&&(i.coords.r1=e.r1,i.coords.r2=e.r2),i.gradientTransform=e.gradientTransform,w.Gradient.prototype.addColorStop.call(i,e.colorStops),this.set(t,w.Gradient.forObject(this,i))},setPatternFill:function(t){return this.set("fill",new w.Pattern(t))},setShadow:function(t){return this.set("shadow",t?new w.Shadow(t):null)},setColor:function(t){return this.set("fill",t),this},rotate:function(t){var e=("center"!==this.originX||"center"!==this.originY)&&this.centeredRotation;return e&&this._setOriginToCenter(),this.set("angle",t),e&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(t,e){e=e||this.canvas.getPointer(t);var i=new w.Point(e.x,e.y),r=this._getLeftTopCoords();return this.angle&&(i=w.util.rotatePoint(i,r,o(-this.angle))),{x:i.x-r.x,y:i.y-r.y}},_setupCompositeOperation:function(t){this.globalCompositeOperation&&(t.globalCompositeOperation=this.globalCompositeOperation)}}),w.util.createAccessors&&w.util.createAccessors(w.Object),e(w.Object.prototype,w.Observable),w.Object.NUM_FRACTION_DIGITS=2,w.Object._fromObject=function(t,i,r,n){var A=w[t];i=s(i,!0),w.util.enlivenPatterns([i.fill,i.stroke],function(t){void 0!==t[0]&&(i.fill=t[0]),void 0!==t[1]&&(i.stroke=t[1]);var e=n?new A(i[n],i):new A(i);r&&r(e)})},w.Object.__uid=0)}("undefined"!=typeof exports?exports:this),function(){var o=fabric.util.degreesToRadians,c={left:-.5,center:0,right:.5},h={top:-.5,center:0,bottom:.5};fabric.util.object.extend(fabric.Object.prototype,{translateToGivenOrigin:function(t,e,i,r,n){var A,s,o,a=t.x,l=t.y;return"string"==typeof e?e=c[e]:e-=.5,"string"==typeof r?r=c[r]:r-=.5,"string"==typeof i?i=h[i]:i-=.5,"string"==typeof n?n=h[n]:n-=.5,s=n-i,((A=r-e)||s)&&(o=this._getTransformedDimensions(),a=t.x+A*o.x,l=t.y+s*o.y),new fabric.Point(a,l)},translateToCenterPoint:function(t,e,i){var r=this.translateToGivenOrigin(t,e,i,"center","center");return this.angle?fabric.util.rotatePoint(r,t,o(this.angle)):r},translateToOriginPoint:function(t,e,i){var r=this.translateToGivenOrigin(t,"center","center",e,i);return this.angle?fabric.util.rotatePoint(r,t,o(this.angle)):r},getCenterPoint:function(){var t=new fabric.Point(this.left,this.top);return this.translateToCenterPoint(t,this.originX,this.originY)},getPointByOrigin:function(t,e){var i=this.getCenterPoint();return this.translateToOriginPoint(i,t,e)},toLocalPoint:function(t,e,i){var r,n,A=this.getCenterPoint();return r=void 0!==e&&void 0!==i?this.translateToGivenOrigin(A,"center","center",e,i):new fabric.Point(this.left,this.top),n=new fabric.Point(t.x,t.y),this.angle&&(n=fabric.util.rotatePoint(n,A,-o(this.angle))),n.subtractEquals(r)},setPositionByOrigin:function(t,e,i){var r=this.translateToCenterPoint(t,e,i),n=this.translateToOriginPoint(r,this.originX,this.originY);this.set("left",n.x),this.set("top",n.y)},adjustPosition:function(t){var e,i,r=o(this.angle),n=this.getScaledWidth(),A=Math.cos(r)*n,s=Math.sin(r)*n;e="string"==typeof this.originX?c[this.originX]:this.originX-.5,i="string"==typeof t?c[t]:t-.5,this.left+=A*(i-e),this.top+=s*(i-e),this.setCoords(),this.originX=t},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var t=this.getCenterPoint();this.originX="center",this.originY="center",this.left=t.x,this.top=t.y},_resetOrigin:function(){var t=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=t.x,this.top=t.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")},onDeselect:function(){}})}(),function(){var _=fabric.util.degreesToRadians,s=fabric.util.multiplyTransformMatrices;fabric.util.object.extend(fabric.Object.prototype,{oCoords:null,aCoords:null,ownMatrixCache:null,matrixCache:null,getCoords:function(t,e){this.oCoords||this.setCoords();var i,r=t?this.aCoords:this.oCoords;return i=e?this.calcCoords(t):r,[new fabric.Point(i.tl.x,i.tl.y),new fabric.Point(i.tr.x,i.tr.y),new fabric.Point(i.br.x,i.br.y),new fabric.Point(i.bl.x,i.bl.y)]},intersectsWithRect:function(t,e,i,r){var n=this.getCoords(i,r);return"Intersection"===fabric.Intersection.intersectPolygonRectangle(n,t,e).status},intersectsWithObject:function(t,e,i){return"Intersection"===fabric.Intersection.intersectPolygonPolygon(this.getCoords(e,i),t.getCoords(e,i)).status||t.isContainedWithinObject(this,e,i)||this.isContainedWithinObject(t,e,i)},isContainedWithinObject:function(t,e,i){for(var r=this.getCoords(e,i),n=0,A=t._getImageLines(i?t.calcCoords(e):e?t.aCoords:t.oCoords);n<4;n++)if(!t.containsPoint(r[n],A))return!1;return!0},isContainedWithinRect:function(t,e,i,r){var n=this.getBoundingRect(i,r);return n.left>=t.x&&n.left+n.width<=e.x&&n.top>=t.y&&n.top+n.height<=e.y},containsPoint:function(t,e,i,r){e=e||this._getImageLines(r?this.calcCoords(i):i?this.aCoords:this.oCoords);var n=this._findCrossPoints(t,e);return 0!==n&&n%2==1},isOnScreen:function(t){if(!this.canvas)return!1;for(var e,i=this.canvas.vptCoords.tl,r=this.canvas.vptCoords.br,n=this.getCoords(!0,t),A=0;A<4;A++)if((e=n[A]).x<=r.x&&e.x>=i.x&&e.y<=r.y&&e.y>=i.y)return!0;if(this.intersectsWithRect(i,r,!0))return!0;var s={x:(i.x+r.x)/2,y:(i.y+r.y)/2};return!!this.containsPoint(s,null,!0)},_getImageLines:function(t){return{topline:{o:t.tl,d:t.tr},rightline:{o:t.tr,d:t.br},bottomline:{o:t.br,d:t.bl},leftline:{o:t.bl,d:t.tl}}},_findCrossPoints:function(t,e){var i,r,n,A=0;for(var s in e)if(!((n=e[s]).o.y<t.y&&n.d.y<t.y||n.o.y>=t.y&&n.d.y>=t.y||(n.o.x===n.d.x&&n.o.x>=t.x?r=n.o.x:(0,i=(n.d.y-n.o.y)/(n.d.x-n.o.x),r=-(t.y-0*t.x-(n.o.y-i*n.o.x))/(0-i)),r>=t.x&&(A+=1),2!==A)))break;return A},getBoundingRect:function(t,e){var i=this.getCoords(t,e);return fabric.util.makeBoundingBoxFromPoints(i)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(t){return Math.abs(t)<this.minScaleLimit?t<0?-this.minScaleLimit:this.minScaleLimit:0===t?1e-4:t},scale:function(t){return this._set("scaleX",t),this._set("scaleY",t),this.setCoords()},scaleToWidth:function(t,e){var i=this.getBoundingRect(e).width/this.getScaledWidth();return this.scale(t/this.width/i)},scaleToHeight:function(t,e){var i=this.getBoundingRect(e).height/this.getScaledHeight();return this.scale(t/this.height/i)},calcCoords:function(t){var e=_(this.angle),i=this.getViewportTransform(),r=t?this._getTransformedDimensions():this._calculateCurrentDimensions(),n=r.x,A=r.y,s=e?Math.sin(e):0,o=e?Math.cos(e):1,a=0<n?Math.atan(A/n):0,l=n/Math.cos(a)/2,c=Math.cos(a+e)*l,h=Math.sin(a+e)*l,u=this.getCenterPoint(),f=t?u:fabric.util.transformPoint(u,i),d=new fabric.Point(f.x-c,f.y-h),g=new fabric.Point(d.x+n*o,d.y+n*s),p=new fabric.Point(d.x-A*s,d.y+A*o),B=new fabric.Point(f.x+c,f.y+h);if(!t)var m=new fabric.Point((d.x+p.x)/2,(d.y+p.y)/2),v=new fabric.Point((g.x+d.x)/2,(g.y+d.y)/2),w=new fabric.Point((B.x+g.x)/2,(B.y+g.y)/2),C=new fabric.Point((B.x+p.x)/2,(B.y+p.y)/2),b=new fabric.Point(v.x+s*this.rotatingPointOffset,v.y-o*this.rotatingPointOffset);f={tl:d,tr:g,br:B,bl:p};return t||(f.ml=m,f.mt=v,f.mr=w,f.mb=C,f.mtr=b),f},setCoords:function(t,e){return this.oCoords=this.calcCoords(t),e||(this.aCoords=this.calcCoords(!0)),t||this._setCornerCoords&&this._setCornerCoords(),this},_calcRotateMatrix:function(){if(this.angle){var t=_(this.angle),e=Math.cos(t),i=Math.sin(t);return(6.123233995736766e-17===e||-1.8369701987210297e-16===e)&&(e=0),[e,i,-i,e,0,0]}return fabric.iMatrix.concat()},transformMatrixKey:function(t){var e="";return!t&&this.group&&(e=this.group.transformMatrixKey(t)+"_"),e+this.top+"_"+this.left+"_"+this.scaleX+"_"+this.scaleY+"_"+this.skewX+"_"+this.skewY+"_"+this.angle+"_"+this.flipX+"_"+this.flipY+"_"+this.width+"_"+this.height},calcTransformMatrix:function(t){if(t)return this.calcOwnMatrix();var e=this.transformMatrixKey(),i=this.matrixCache||(this.matrixCache={});if(i.key===e)return i.value;var r=this.calcOwnMatrix();return this.group&&(r=s(this.group.calcTransformMatrix(),r)),i.key=e,i.value=r},calcOwnMatrix:function(){var t=this.transformMatrixKey(!0),e=this.ownMatrixCache||(this.ownMatrixCache={});if(e.key===t)return e.value;var i,r=this.getCenterPoint(),n=[1,0,0,1,r.x,r.y],A=this._calcDimensionsTransformMatrix(this.skewX,this.skewY,!0);return this.angle&&(i=this._calcRotateMatrix(),n=s(n,i)),n=s(n,A),e.key=t,e.value=n},_calcDimensionsTransformMatrix:function(t,e,i){var r,n=[this.scaleX*(i&&this.flipX?-1:1),0,0,this.scaleY*(i&&this.flipY?-1:1),0,0];return t&&(r=[1,0,Math.tan(_(t)),1],n=s(n,r,!0)),e&&(r=[1,Math.tan(_(e)),0,1],n=s(n,r,!0)),n},_getNonTransformedDimensions:function(){var t=this.strokeWidth;return{x:this.width+t,y:this.height+t}},_getTransformedDimensions:function(t,e){void 0===t&&(t=this.skewX),void 0===e&&(e=this.skewY);var i,r,n=this._getNonTransformedDimensions(),A=n.x/2,s=n.y/2,o=[{x:-A,y:-s},{x:A,y:-s},{x:-A,y:s},{x:A,y:s}],a=this._calcDimensionsTransformMatrix(t,e,!1);for(i=0;i<o.length;i++)o[i]=fabric.util.transformPoint(o[i],a);return{x:(r=fabric.util.makeBoundingBoxFromPoints(o)).width,y:r.height}},_calculateCurrentDimensions:function(){var t=this.getViewportTransform(),e=this._getTransformedDimensions();return fabric.util.transformPoint(e,t,!0).scalarAdd(2*this.padding)}})}(),fabric.util.object.extend(fabric.Object.prototype,{sendToBack:function(){return this.group?fabric.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?fabric.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas.bringToFront(this),this},sendBackwards:function(t){return this.group?fabric.StaticCanvas.prototype.sendBackwards.call(this.group,this,t):this.canvas.sendBackwards(this,t),this},bringForward:function(t){return this.group?fabric.StaticCanvas.prototype.bringForward.call(this.group,this,t):this.canvas.bringForward(this,t),this},moveTo:function(t){return this.group&&"activeSelection"!==this.group.type?fabric.StaticCanvas.prototype.moveTo.call(this.group,this,t):this.canvas.moveTo(this,t),this}}),function(){function h(t,e){if(e){if(e.toLive)return t+": url(#SVGID_"+e.id+"); ";var i=new fabric.Color(e),r=t+": "+i.toRgb()+"; ",n=i.getAlpha();return 1!==n&&(r+=t+"-opacity: "+n.toString()+"; "),r}return t+": none; "}var e=fabric.Object.NUM_FRACTION_DIGITS,c=fabric.util.toFixed;fabric.util.object.extend(fabric.Object.prototype,{getSvgStyles:function(t){var e=this.fillRule,i=this.strokeWidth?this.strokeWidth:"0",r=this.strokeDashArray?this.strokeDashArray.join(" "):"none",n=this.strokeLineCap?this.strokeLineCap:"butt",A=this.strokeLineJoin?this.strokeLineJoin:"miter",s=this.strokeMiterLimit?this.strokeMiterLimit:"4",o=void 0!==this.opacity?this.opacity:"1",a=this.visible?"":" visibility: hidden;",l=t?"":this.getSvgFilter(),c=h("fill",this.fill);return[h("stroke",this.stroke),"stroke-width: ",i,"; ","stroke-dasharray: ",r,"; ","stroke-linecap: ",n,"; ","stroke-linejoin: ",A,"; ","stroke-miterlimit: ",s,"; ",c,"fill-rule: ",e,"; ","opacity: ",o,";",l,a].join("")},getSvgSpanStyles:function(t,e){var i=t.strokeWidth?"stroke-width: "+t.strokeWidth+"; ":"",r=t.fontFamily?"font-family: "+t.fontFamily.replace(/"/g,"'")+"; ":"",n=t.fontSize?"font-size: "+t.fontSize+"; ":"",A=t.fontStyle?"font-style: "+t.fontStyle+"; ":"",s=t.fontWeight?"font-weight: "+t.fontWeight+"; ":"",o=t.fill?h("fill",t.fill):"",a=t.stroke?h("stroke",t.stroke):"",l=this.getSvgTextDecoration(t);return l&&(l="text-decoration: "+l+"; "),[a,i,r,n,A,s,l,o,e?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(t){return"overline"in t||"underline"in t||"linethrough"in t?(t.overline?"overline ":"")+(t.underline?"underline ":"")+(t.linethrough?"line-through ":""):""},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgId:function(){return this.id?'id="'+this.id+'" ':""},getSvgTransform:function(){var t=this.angle,e=this.skewX%360,i=this.skewY%360,r=this.getCenterPoint(),n=fabric.Object.NUM_FRACTION_DIGITS,A="translate("+c(r.x,n)+" "+c(r.y,n)+")",s=0!==t?" rotate("+c(t,n)+")":"",o=1===this.scaleX&&1===this.scaleY?"":" scale("+c(this.scaleX,n)+" "+c(this.scaleY,n)+")",a=0!==e?" skewX("+c(e,n)+")":"",l=0!==i?" skewY("+c(i,n)+")":"";return[A,s,o,this.flipX?" matrix(-1 0 0 1 0 0) ":"",this.flipY?" matrix(1 0 0 -1 0 0)":"",a,l].join("")},getSvgTransformMatrix:function(){return this.transformMatrix?" matrix("+this.transformMatrix.join(" ")+") ":""},_setSVGBg:function(t){this.backgroundColor&&t.push("\t\t<rect ",this._getFillAttributes(this.backgroundColor),' x="',c(-this.width/2,e),'" y="',c(-this.height/2,e),'" width="',c(this.width,e),'" height="',c(this.height,e),'"></rect>\n')},_createBaseSVGMarkup:function(){var t=[];return this.fill&&this.fill.toLive&&t.push(this.fill.toSVG(this,!1)),this.stroke&&this.stroke.toLive&&t.push(this.stroke.toSVG(this,!1)),this.shadow&&t.push(this.shadow.toSVG(this)),t},addPaintOrder:function(){return"fill"!==this.paintFirst?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){function r(e,t,i){var r={};i.forEach(function(t){r[t]=e[t]}),n(e[t],r,!0)}var n=fabric.util.object.extend,A="stateProperties";fabric.util.object.extend(fabric.Object.prototype,{hasStateChanged:function(t){var e="_"+(t=t||A);return Object.keys(this[e]).length<this[t].length||!function t(e,i,r){if(e===i)return!0;if(Array.isArray(e)){if(e.length!==i.length)return!1;for(var n=0,A=e.length;n<A;n++)if(!t(e[n],i[n]))return!1;return!0}if(e&&"object"==typeof e){var s,o=Object.keys(e);if(!r&&o.length!==Object.keys(i).length)return!1;for(n=0,A=o.length;n<A;n++)if(!t(e[s=o[n]],i[s]))return!1;return!0}}(this[e],this,!0)},saveState:function(t){var e=t&&t.propertySet||A,i="_"+e;return this[i]?(r(this,i,this[e]),t&&t.stateProperties&&r(this,i,t.stateProperties),this):this.setupState(t)},setupState:function(t){var e=(t=t||{}).propertySet||A;return this["_"+(t.propertySet=e)]={},this.saveState(t),this}})}(),function(){var a=fabric.util.degreesToRadians;fabric.util.object.extend(fabric.Object.prototype,{_controlsVisibility:null,_findTargetCorner:function(t){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var e,i,r=t.x,n=t.y;for(var A in this.__corner=0,this.oCoords)if(this.isControlVisible(A)&&("mtr"!==A||this.hasRotatingPoint)&&(!this.get("lockUniScaling")||"mt"!==A&&"mr"!==A&&"mb"!==A&&"ml"!==A)&&(i=this._getImageLines(this.oCoords[A].corner),0!==(e=this._findCrossPoints({x:r,y:n},i))&&e%2==1))return this.__corner=A;return!1},_setCornerCoords:function(){var t,e,i=this.oCoords,r=a(45-this.angle),n=.707106*this.cornerSize,A=n*Math.cos(r),s=n*Math.sin(r);for(var o in i)t=i[o].x,e=i[o].y,i[o].corner={tl:{x:t-s,y:e-A},tr:{x:t+A,y:e-s},bl:{x:t-A,y:e+s},br:{x:t+s,y:e+A}}},drawSelectionBackground:function(t){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;t.save();var e=this.getCenterPoint(),i=this._calculateCurrentDimensions(),r=this.canvas.viewportTransform;return t.translate(e.x,e.y),t.scale(1/r[0],1/r[3]),t.rotate(a(this.angle)),t.fillStyle=this.selectionBackgroundColor,t.fillRect(-i.x/2,-i.y/2,i.x,i.y),t.restore(),this},drawBorders:function(t,e){e=e||{};var i=this._calculateCurrentDimensions(),r=1/this.borderScaleFactor,n=i.x+r,A=i.y+r,s=void 0!==e.hasRotatingPoint?e.hasRotatingPoint:this.hasRotatingPoint,o=void 0!==e.hasControls?e.hasControls:this.hasControls,a=void 0!==e.rotatingPointOffset?e.rotatingPointOffset:this.rotatingPointOffset;if(t.save(),t.strokeStyle=e.borderColor||this.borderColor,this._setLineDash(t,e.borderDashArray||this.borderDashArray,null),t.strokeRect(-n/2,-A/2,n,A),s&&this.isControlVisible("mtr")&&o){var l=-A/2;t.beginPath(),t.moveTo(0,l),t.lineTo(0,l-a),t.closePath(),t.stroke()}return t.restore(),this},drawBordersInGroup:function(t,e,i){i=i||{};var r=this._getNonTransformedDimensions(),n=fabric.util.customTransformMatrix(e.scaleX,e.scaleY,e.skewX),A=fabric.util.transformPoint(r,n),s=1/this.borderScaleFactor,o=A.x+s,a=A.y+s;return t.save(),this._setLineDash(t,i.borderDashArray||this.borderDashArray,null),t.strokeStyle=i.borderColor||this.borderColor,t.strokeRect(-o/2,-a/2,o,a),t.restore(),this},drawControls:function(t,e){e=e||{};var i=this._calculateCurrentDimensions(),r=i.x,n=i.y,A=e.cornerSize||this.cornerSize,s=-(r+A)/2,o=-(n+A)/2,a=void 0!==e.transparentCorners?e.transparentCorners:this.transparentCorners,l=void 0!==e.hasRotatingPoint?e.hasRotatingPoint:this.hasRotatingPoint,c=a?"stroke":"fill";return t.save(),t.strokeStyle=t.fillStyle=e.cornerColor||this.cornerColor,this.transparentCorners||(t.strokeStyle=e.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(t,e.cornerDashArray||this.cornerDashArray,null),this._drawControl("tl",t,c,s,o,e),this._drawControl("tr",t,c,s+r,o,e),this._drawControl("bl",t,c,s,o+n,e),this._drawControl("br",t,c,s+r,o+n,e),this.get("lockUniScaling")||(this._drawControl("mt",t,c,s+r/2,o,e),this._drawControl("mb",t,c,s+r/2,o+n,e),this._drawControl("mr",t,c,s+r,o+n/2,e),this._drawControl("ml",t,c,s,o+n/2,e)),l&&this._drawControl("mtr",t,c,s+r/2,o-this.rotatingPointOffset,e),t.restore(),this},_drawControl:function(t,e,i,r,n,A){if(A=A||{},this.isControlVisible(t)){var s=this.cornerSize,o=!this.transparentCorners&&this.cornerStrokeColor;switch(A.cornerStyle||this.cornerStyle){case"circle":e.beginPath(),e.arc(r+s/2,n+s/2,s/2,0,2*Math.PI,!1),e[i](),o&&e.stroke();break;default:this.transparentCorners||e.clearRect(r,n,s,s),e[i+"Rect"](r,n,s,s),o&&e.strokeRect(r,n,s,s)}}},isControlVisible:function(t){return this._getControlsVisibility()[t]},setControlVisible:function(t,e){return this._getControlsVisibility()[t]=e,this},setControlsVisibility:function(t){for(var e in t||(t={}),t)this.setControlVisible(e,t[e]);return this},_getControlsVisibility:function(){return this._controlsVisibility||(this._controlsVisibility={tl:!0,tr:!0,br:!0,bl:!0,ml:!0,mt:!0,mr:!0,mb:!0,mtr:!0}),this._controlsVisibility},onDeselect:function(){},onSelect:function(){}})}(),fabric.util.object.extend(fabric.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(e,t){var i=function(){},r=(t=t||{}).onComplete||i,n=t.onChange||i,A=this;return fabric.util.animate({startValue:e.left,endValue:this.getCenter().left,duration:this.FX_DURATION,onChange:function(t){e.set("left",t),A.requestRenderAll(),n()},onComplete:function(){e.setCoords(),r()}}),this},fxCenterObjectV:function(e,t){var i=function(){},r=(t=t||{}).onComplete||i,n=t.onChange||i,A=this;return fabric.util.animate({startValue:e.top,endValue:this.getCenter().top,duration:this.FX_DURATION,onChange:function(t){e.set("top",t),A.requestRenderAll(),n()},onComplete:function(){e.setCoords(),r()}}),this},fxRemove:function(e,t){var i=function(){},r=(t=t||{}).onComplete||i,n=t.onChange||i,A=this;return fabric.util.animate({startValue:e.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(t){e.set("opacity",t),A.requestRenderAll(),n()},onComplete:function(){A.remove(e),r()}}),this}}),fabric.util.object.extend(fabric.Object.prototype,{animate:function(){if(arguments[0]&&"object"==typeof arguments[0]){var t,e,i=[];for(t in arguments[0])i.push(t);for(var r=0,n=i.length;r<n;r++)t=i[r],e=r!==n-1,this._animate(t,arguments[0][t],arguments[1],e)}else this._animate.apply(this,arguments);return this},_animate:function(r,t,n,A){var s,o=this;t=t.toString(),n=n?fabric.util.object.clone(n):{},~r.indexOf(".")&&(s=r.split("."));var e=s?this.get(s[0])[s[1]]:this.get(r);"from"in n||(n.from=e),t=~t.indexOf("=")?e+parseFloat(t.replace("=","")):parseFloat(t),fabric.util.animate({startValue:n.from,endValue:t,byValue:n.by,easing:n.easing,duration:n.duration,abort:n.abort&&function(){return n.abort.call(o)},onChange:function(t,e,i){s?o[s[0]][s[1]]=t:o.set(r,t),A||n.onChange&&n.onChange(t,e,i)},onComplete:function(t,e,i){A||(o.setCoords(),n.onComplete&&n.onComplete(t,e,i))}})}}),function(t){"use strict";function e(t,e){var i=t.origin,r=t.axis1,n=t.axis2,A=t.dimension,s=e.nearest,o=e.center,a=e.farthest;return function(){switch(this.get(i)){case s:return Math.min(this.get(r),this.get(n));case o:return Math.min(this.get(r),this.get(n))+.5*this.get(A);case a:return Math.max(this.get(r),this.get(n))}}}var A=t.fabric||(t.fabric={}),s=A.util.object.extend,r=A.util.object.clone,i={x1:1,x2:1,y1:1,y2:1},n=A.StaticCanvas.supports("setLineDash");A.Line?A.warn("fabric.Line is already defined"):(A.Line=A.util.createClass(A.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:A.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(t,e){t||(t=[0,0,0,0]),this.callSuper("initialize",e),this.set("x1",t[0]),this.set("y1",t[1]),this.set("x2",t[2]),this.set("y2",t[3]),this._setWidthHeight(e)},_setWidthHeight:function(t){t||(t={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in t?t.left:this._getLeftToOriginX(),this.top="top"in t?t.top:this._getTopToOriginY()},_set:function(t,e){return this.callSuper("_set",t,e),void 0!==i[t]&&this._setWidthHeight(),this},_getLeftToOriginX:e({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:e({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(t){if(t.beginPath(),!this.strokeDashArray||this.strokeDashArray&&n){var e=this.calcLinePoints();t.moveTo(e.x1,e.y1),t.lineTo(e.x2,e.y2)}t.lineWidth=this.strokeWidth;var i=t.strokeStyle;t.strokeStyle=this.stroke||t.fillStyle,this.stroke&&this._renderStroke(t),t.strokeStyle=i},_renderDashedStroke:function(t){var e=this.calcLinePoints();t.beginPath(),A.util.drawDashedLine(t,e.x1,e.y1,e.x2,e.y2,this.strokeDashArray),t.closePath()},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(t){return s(this.callSuper("toObject",t),this.calcLinePoints())},_getNonTransformedDimensions:function(){var t=this.callSuper("_getNonTransformedDimensions");return"butt"===this.strokeLineCap&&(0===this.width&&(t.y-=this.strokeWidth),0===this.height&&(t.x-=this.strokeWidth)),t},calcLinePoints:function(){var t=this.x1<=this.x2?-1:1,e=this.y1<=this.y2?-1:1,i=t*this.width*.5,r=e*this.height*.5;return{x1:i,x2:t*this.width*-.5,y1:r,y2:e*this.height*-.5}},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=this.calcLinePoints();return e.push("<line ",this.getSvgId(),'x1="',i.x1,'" y1="',i.y1,'" x2="',i.x2,'" y2="',i.y2,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"/>\n'),t?t(e.join("")):e.join("")}}),A.Line.ATTRIBUTE_NAMES=A.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),A.Line.fromElement=function(t,e,i){i=i||{};var r=A.parseAttributes(t,A.Line.ATTRIBUTE_NAMES),n=[r.x1||0,r.y1||0,r.x2||0,r.y2||0];e(new A.Line(n,s(r,i)))},A.Line.fromObject=function(t,e){var i=r(t,!0);i.points=[t.x1,t.y1,t.x2,t.y2],A.Object._fromObject("Line",i,function(t){delete t.points,e&&e(t)},"points")})}("undefined"!=typeof exports?exports:this),function(t){"use strict";var A=t.fabric||(t.fabric={}),a=Math.PI,s=A.util.object.extend;A.Circle?A.warn("fabric.Circle is already defined."):(A.Circle=A.util.createClass(A.Object,{type:"circle",radius:0,startAngle:0,endAngle:2*a,cacheProperties:A.Object.prototype.cacheProperties.concat("radius"),initialize:function(t){this.callSuper("initialize",t),this.set("radius",t&&t.radius||0)},_set:function(t,e){return this.callSuper("_set",t,e),"radius"===t&&this.setRadius(e),this},toObject:function(t){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(t))},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=(this.endAngle-this.startAngle)%(2*a);if(0===i)e.push("<circle ",this.getSvgId(),'cx="0" cy="0" ','r="',this.radius,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform()," ",this.getSvgTransformMatrix(),'"',this.addPaintOrder(),"/>\n");else{var r=Math.cos(this.startAngle)*this.radius,n=Math.sin(this.startAngle)*this.radius,A=Math.cos(this.endAngle)*this.radius,s=Math.sin(this.endAngle)*this.radius,o=a<i?"1":"0";e.push('<path d="M '+r+" "+n," A "+this.radius+" "+this.radius," 0 ",+o+" 1"," "+A+" "+s,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform()," ",this.getSvgTransformMatrix(),'"',this.addPaintOrder(),'"/>\n')}return t?t(e.join("")):e.join("")},_render:function(t){t.beginPath(),t.arc(0,0,this.radius,this.startAngle,this.endAngle,!1),this._renderPaintInOrder(t)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(t){return this.radius=t,this.set("width",2*t).set("height",2*t)}}),A.Circle.ATTRIBUTE_NAMES=A.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),A.Circle.fromElement=function(t,e,i){i||(i={});var r,n=A.parseAttributes(t,A.Circle.ATTRIBUTE_NAMES);if(!("radius"in(r=n)&&0<=r.radius))throw new Error("value of `r` attribute is required and can not be negative");n.left=(n.left||0)-n.radius,n.top=(n.top||0)-n.radius,e(new A.Circle(s(n,i)))},A.Circle.fromObject=function(t,e){return A.Object._fromObject("Circle",t,e)})}("undefined"!=typeof exports?exports:this),function(t){"use strict";var r=t.fabric||(t.fabric={});r.Triangle?r.warn("fabric.Triangle is already defined"):(r.Triangle=r.util.createClass(r.Object,{type:"triangle",initialize:function(t){this.callSuper("initialize",t),this.set("width",t&&t.width||100).set("height",t&&t.height||100)},_render:function(t){var e=this.width/2,i=this.height/2;t.beginPath(),t.moveTo(-e,i),t.lineTo(0,-i),t.lineTo(e,i),t.closePath(),this._renderPaintInOrder(t)},_renderDashedStroke:function(t){var e=this.width/2,i=this.height/2;t.beginPath(),r.util.drawDashedLine(t,-e,i,0,-i,this.strokeDashArray),r.util.drawDashedLine(t,0,-i,e,i,this.strokeDashArray),r.util.drawDashedLine(t,e,i,-e,i,this.strokeDashArray),t.closePath()},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=this.width/2,r=this.height/2,n=[-i+" "+r,"0 "+-r,i+" "+r].join(",");return e.push("<polygon ",this.getSvgId(),'points="',n,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),'"',this.addPaintOrder(),"/>"),t?t(e.join("")):e.join("")}}),r.Triangle.fromObject=function(t,e){return r.Object._fromObject("Triangle",t,e)})}("undefined"!=typeof exports?exports:this),function(t){"use strict";var n=t.fabric||(t.fabric={}),e=2*Math.PI,A=n.util.object.extend;n.Ellipse?n.warn("fabric.Ellipse is already defined."):(n.Ellipse=n.util.createClass(n.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:n.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(t){this.callSuper("initialize",t),this.set("rx",t&&t.rx||0),this.set("ry",t&&t.ry||0)},_set:function(t,e){switch(this.callSuper("_set",t,e),t){case"rx":this.rx=e,this.set("width",2*e);break;case"ry":this.ry=e,this.set("height",2*e)}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(t){return this.callSuper("toObject",["rx","ry"].concat(t))},toSVG:function(t){var e=this._createBaseSVGMarkup();return e.push("<ellipse ",this.getSvgId(),'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"',this.addPaintOrder(),"/>\n"),t?t(e.join("")):e.join("")},_render:function(t){t.beginPath(),t.save(),t.transform(1,0,0,this.ry/this.rx,0,0),t.arc(0,0,this.rx,0,e,!1),t.restore(),this._renderPaintInOrder(t)}}),n.Ellipse.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),n.Ellipse.fromElement=function(t,e,i){i||(i={});var r=n.parseAttributes(t,n.Ellipse.ATTRIBUTE_NAMES);r.left=(r.left||0)-r.rx,r.top=(r.top||0)-r.ry,e(new n.Ellipse(A(r,i)))},n.Ellipse.fromObject=function(t,e){return n.Object._fromObject("Ellipse",t,e)})}("undefined"!=typeof exports?exports:this),function(t){"use strict";var A=t.fabric||(t.fabric={}),s=A.util.object.extend;A.Rect?A.warn("fabric.Rect is already defined"):(A.Rect=A.util.createClass(A.Object,{stateProperties:A.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:A.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(t){this.callSuper("initialize",t),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(t){if(1!==this.width||1!==this.height){var e=this.rx?Math.min(this.rx,this.width/2):0,i=this.ry?Math.min(this.ry,this.height/2):0,r=this.width,n=this.height,A=-this.width/2,s=-this.height/2,o=0!==e||0!==i,a=.4477152502;t.beginPath(),t.moveTo(A+e,s),t.lineTo(A+r-e,s),o&&t.bezierCurveTo(A+r-a*e,s,A+r,s+a*i,A+r,s+i),t.lineTo(A+r,s+n-i),o&&t.bezierCurveTo(A+r,s+n-a*i,A+r-a*e,s+n,A+r-e,s+n),t.lineTo(A+e,s+n),o&&t.bezierCurveTo(A+a*e,s+n,A,s+n-a*i,A,s+n-i),t.lineTo(A,s+i),o&&t.bezierCurveTo(A,s+a*i,A+a*e,s,A+e,s),t.closePath(),this._renderPaintInOrder(t)}else t.fillRect(-.5,-.5,1,1)},_renderDashedStroke:function(t){var e=-this.width/2,i=-this.height/2,r=this.width,n=this.height;t.beginPath(),A.util.drawDashedLine(t,e,i,e+r,i,this.strokeDashArray),A.util.drawDashedLine(t,e+r,i,e+r,i+n,this.strokeDashArray),A.util.drawDashedLine(t,e+r,i+n,e,i+n,this.strokeDashArray),A.util.drawDashedLine(t,e,i+n,e,i,this.strokeDashArray),t.closePath()},toObject:function(t){return this.callSuper("toObject",["rx","ry"].concat(t))},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=-this.width/2,r=-this.height/2;return e.push("<rect ",this.getSvgId(),'x="',i,'" y="',r,'" rx="',this.get("rx"),'" ry="',this.get("ry"),'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"',this.addPaintOrder(),"/>\n"),t?t(e.join("")):e.join("")}}),A.Rect.ATTRIBUTE_NAMES=A.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),A.Rect.fromElement=function(t,e,i){if(!t)return e(null);i=i||{};var r=A.parseAttributes(t,A.Rect.ATTRIBUTE_NAMES);r.left=r.left||0,r.top=r.top||0;var n=new A.Rect(s(i?A.util.object.clone(i):{},r));n.visible=n.visible&&0<n.width&&0<n.height,e(n)},A.Rect.fromObject=function(t,e){return A.Object._fromObject("Rect",t,e)})}("undefined"!=typeof exports?exports:this),function(t){"use strict";var A=t.fabric||(t.fabric={}),e=A.util.object.extend,r=A.util.array.min,n=A.util.array.max,o=A.util.toFixed,a=A.Object.NUM_FRACTION_DIGITS;A.Polyline?A.warn("fabric.Polyline is already defined"):(A.Polyline=A.util.createClass(A.Object,{type:"polyline",points:null,cacheProperties:A.Object.prototype.cacheProperties.concat("points"),initialize:function(t,e){e=e||{},this.points=t||[],this.callSuper("initialize",e);var i=this._calcDimensions();void 0===e.left&&(this.left=i.left),void 0===e.top&&(this.top=i.top),this.width=i.width,this.height=i.height,this.pathOffset={x:i.left+this.width/2,y:i.top+this.height/2}},_calcDimensions:function(){var t=this.points,e=r(t,"x")||0,i=r(t,"y")||0;return{left:e,top:i,width:(n(t,"x")||0)-e,height:(n(t,"y")||0)-i}},toObject:function(t){return e(this.callSuper("toObject",t),{points:this.points.concat()})},toSVG:function(t){for(var e=[],i=this.pathOffset.x,r=this.pathOffset.y,n=this._createBaseSVGMarkup(),A=0,s=this.points.length;A<s;A++)e.push(o(this.points[A].x-i,a),",",o(this.points[A].y-r,a)," ");return n.push("<",this.type," ",this.getSvgId(),'points="',e.join(""),'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform()," ",this.getSvgTransformMatrix(),'"',this.addPaintOrder(),"/>\n"),t?t(n.join("")):n.join("")},commonRender:function(t){var e,i=this.points.length,r=this.pathOffset.x,n=this.pathOffset.y;if(!i||isNaN(this.points[i-1].y))return!1;t.beginPath(),t.moveTo(this.points[0].x-r,this.points[0].y-n);for(var A=0;A<i;A++)e=this.points[A],t.lineTo(e.x-r,e.y-n);return!0},_render:function(t){this.commonRender(t)&&this._renderPaintInOrder(t)},_renderDashedStroke:function(t){var e,i;t.beginPath();for(var r=0,n=this.points.length;r<n;r++)e=this.points[r],i=this.points[r+1]||e,A.util.drawDashedLine(t,e.x,e.y,i.x,i.y,this.strokeDashArray)},complexity:function(){return this.get("points").length}}),A.Polyline.ATTRIBUTE_NAMES=A.SHARED_ATTRIBUTES.concat(),A.Polyline.fromElement=function(t,e,i){if(!t)return e(null);i||(i={});var r=A.parsePointsAttribute(t.getAttribute("points")),n=A.parseAttributes(t,A.Polyline.ATTRIBUTE_NAMES);e(new A.Polyline(r,A.util.object.extend(n,i)))},A.Polyline.fromObject=function(t,e){return A.Object._fromObject("Polyline",t,e,"points")})}("undefined"!=typeof exports?exports:this),function(t){"use strict";var A=t.fabric||(t.fabric={}),s=A.util.object.extend;A.Polygon?A.warn("fabric.Polygon is already defined"):(A.Polygon=A.util.createClass(A.Polyline,{type:"polygon",_render:function(t){this.commonRender(t)&&(t.closePath(),this._renderPaintInOrder(t))},_renderDashedStroke:function(t){this.callSuper("_renderDashedStroke",t),t.closePath()}}),A.Polygon.ATTRIBUTE_NAMES=A.SHARED_ATTRIBUTES.concat(),A.Polygon.fromElement=function(t,e,i){if(!t)return e(null);i||(i={});var r=A.parsePointsAttribute(t.getAttribute("points")),n=A.parseAttributes(t,A.Polygon.ATTRIBUTE_NAMES);e(new A.Polygon(r,s(n,i)))},A.Polygon.fromObject=function(t,e){return A.Object._fromObject("Polygon",t,e,"points")})}("undefined"!=typeof exports?exports:this),function(t){"use strict";var B=t.fabric||(t.fabric={}),m=B.util.array.min,v=B.util.array.max,n=B.util.object.extend,r=Object.prototype.toString,g=B.util.drawArc,w={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},C={m:"l",M:"L"};B.Path?B.warn("fabric.Path is already defined"):(B.Path=B.util.createClass(B.Object,{type:"path",path:null,cacheProperties:B.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:B.Object.prototype.stateProperties.concat("path"),initialize:function(t,e){e=e||{},this.callSuper("initialize",e),t||(t=[]);var i="[object Array]"===r.call(t);this.path=i?t:t.match&&t.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi),this.path&&(i||(this.path=this._parsePath()),this._setPositionDimensions(e))},_setPositionDimensions:function(t){var e=this._parseDimensions();this.width=e.width,this.height=e.height,void 0===t.left&&(this.left=e.left),void 0===t.top&&(this.top=e.top),this.pathOffset=this.pathOffset||{x:e.left+this.width/2,y:e.top+this.height/2}},_renderPathCommands:function(t){var e,i,r,n=null,A=0,s=0,o=0,a=0,l=0,c=0,h=-this.pathOffset.x,u=-this.pathOffset.y;t.beginPath();for(var f=0,d=this.path.length;f<d;++f){switch((e=this.path[f])[0]){case"l":o+=e[1],a+=e[2],t.lineTo(o+h,a+u);break;case"L":o=e[1],a=e[2],t.lineTo(o+h,a+u);break;case"h":o+=e[1],t.lineTo(o+h,a+u);break;case"H":o=e[1],t.lineTo(o+h,a+u);break;case"v":a+=e[1],t.lineTo(o+h,a+u);break;case"V":a=e[1],t.lineTo(o+h,a+u);break;case"m":A=o+=e[1],s=a+=e[2],t.moveTo(o+h,a+u);break;case"M":A=o=e[1],s=a=e[2],t.moveTo(o+h,a+u);break;case"c":i=o+e[5],r=a+e[6],l=o+e[3],c=a+e[4],t.bezierCurveTo(o+e[1]+h,a+e[2]+u,l+h,c+u,i+h,r+u),o=i,a=r;break;case"C":o=e[5],a=e[6],l=e[3],c=e[4],t.bezierCurveTo(e[1]+h,e[2]+u,l+h,c+u,o+h,a+u);break;case"s":i=o+e[3],r=a+e[4],null===n[0].match(/[CcSs]/)?(l=o,c=a):(l=2*o-l,c=2*a-c),t.bezierCurveTo(l+h,c+u,o+e[1]+h,a+e[2]+u,i+h,r+u),l=o+e[1],c=a+e[2],o=i,a=r;break;case"S":i=e[3],r=e[4],null===n[0].match(/[CcSs]/)?(l=o,c=a):(l=2*o-l,c=2*a-c),t.bezierCurveTo(l+h,c+u,e[1]+h,e[2]+u,i+h,r+u),o=i,a=r,l=e[1],c=e[2];break;case"q":i=o+e[3],r=a+e[4],l=o+e[1],c=a+e[2],t.quadraticCurveTo(l+h,c+u,i+h,r+u),o=i,a=r;break;case"Q":i=e[3],r=e[4],t.quadraticCurveTo(e[1]+h,e[2]+u,i+h,r+u),o=i,a=r,l=e[1],c=e[2];break;case"t":i=o+e[1],r=a+e[2],null===n[0].match(/[QqTt]/)?(l=o,c=a):(l=2*o-l,c=2*a-c),t.quadraticCurveTo(l+h,c+u,i+h,r+u),o=i,a=r;break;case"T":i=e[1],r=e[2],null===n[0].match(/[QqTt]/)?(l=o,c=a):(l=2*o-l,c=2*a-c),t.quadraticCurveTo(l+h,c+u,i+h,r+u),o=i,a=r;break;case"a":g(t,o+h,a+u,[e[1],e[2],e[3],e[4],e[5],e[6]+o+h,e[7]+a+u]),o+=e[6],a+=e[7];break;case"A":g(t,o+h,a+u,[e[1],e[2],e[3],e[4],e[5],e[6]+h,e[7]+u]),o=e[6],a=e[7];break;case"z":case"Z":o=A,a=s,t.closePath()}n=e}},_render:function(t){this._renderPathCommands(t),this._renderPaintInOrder(t)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(t){return n(this.callSuper("toObject",t),{path:this.path.map(function(t){return t.slice()}),top:this.top,left:this.left})},toDatalessObject:function(t){var e=this.toObject(["sourcePath"].concat(t));return e.sourcePath&&delete e.path,e},toSVG:function(t){for(var e,i=[],r=this._createBaseSVGMarkup(),n=0,A=this.path.length;n<A;n++)i.push(this.path[n].join(" "));var s=i.join(" ");return e=" translate("+-this.pathOffset.x+", "+-this.pathOffset.y+") ",r.push("<path ",this.getSvgId(),'d="',s,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),e,this.getSvgTransformMatrix(),'" stroke-linecap="round" ',this.addPaintOrder(),"/>\n"),t?t(r.join("")):r.join("")},complexity:function(){return this.path.length},_parsePath:function(){for(var t,e,i,r,n,A=[],s=[],o=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,a=0,l=this.path.length;a<l;a++){for(r=(t=this.path[a]).slice(1).trim(),s.length=0;i=o.exec(r);)s.push(i[0]);n=[t.charAt(0)];for(var c=0,h=s.length;c<h;c++)e=parseFloat(s[c]),isNaN(e)||n.push(e);var u=n[0],f=w[u.toLowerCase()],d=C[u]||u;if(n.length-1>f)for(var g=1,p=n.length;g<p;g+=f)A.push([u].concat(n.slice(g,g+f))),u=d;else A.push(n)}return A},_parseDimensions:function(){for(var t,e,i,r,n=[],A=[],s=null,o=0,a=0,l=0,c=0,h=0,u=0,f=0,d=this.path.length;f<d;++f){switch((t=this.path[f])[0]){case"l":l+=t[1],c+=t[2],r=[];break;case"L":l=t[1],c=t[2],r=[];break;case"h":l+=t[1],r=[];break;case"H":l=t[1],r=[];break;case"v":c+=t[1],r=[];break;case"V":c=t[1],r=[];break;case"m":o=l+=t[1],a=c+=t[2],r=[];break;case"M":o=l=t[1],a=c=t[2],r=[];break;case"c":e=l+t[5],i=c+t[6],h=l+t[3],u=c+t[4],r=B.util.getBoundsOfCurve(l,c,l+t[1],c+t[2],h,u,e,i),l=e,c=i;break;case"C":h=t[3],u=t[4],r=B.util.getBoundsOfCurve(l,c,t[1],t[2],h,u,t[5],t[6]),l=t[5],c=t[6];break;case"s":e=l+t[3],i=c+t[4],null===s[0].match(/[CcSs]/)?(h=l,u=c):(h=2*l-h,u=2*c-u),r=B.util.getBoundsOfCurve(l,c,h,u,l+t[1],c+t[2],e,i),h=l+t[1],u=c+t[2],l=e,c=i;break;case"S":e=t[3],i=t[4],null===s[0].match(/[CcSs]/)?(h=l,u=c):(h=2*l-h,u=2*c-u),r=B.util.getBoundsOfCurve(l,c,h,u,t[1],t[2],e,i),l=e,c=i,h=t[1],u=t[2];break;case"q":e=l+t[3],i=c+t[4],h=l+t[1],u=c+t[2],r=B.util.getBoundsOfCurve(l,c,h,u,h,u,e,i),l=e,c=i;break;case"Q":h=t[1],u=t[2],r=B.util.getBoundsOfCurve(l,c,h,u,h,u,t[3],t[4]),l=t[3],c=t[4];break;case"t":e=l+t[1],i=c+t[2],null===s[0].match(/[QqTt]/)?(h=l,u=c):(h=2*l-h,u=2*c-u),r=B.util.getBoundsOfCurve(l,c,h,u,h,u,e,i),l=e,c=i;break;case"T":e=t[1],i=t[2],null===s[0].match(/[QqTt]/)?(h=l,u=c):(h=2*l-h,u=2*c-u),r=B.util.getBoundsOfCurve(l,c,h,u,h,u,e,i),l=e,c=i;break;case"a":r=B.util.getBoundsOfArc(l,c,t[1],t[2],t[3],t[4],t[5],t[6]+l,t[7]+c),l+=t[6],c+=t[7];break;case"A":r=B.util.getBoundsOfArc(l,c,t[1],t[2],t[3],t[4],t[5],t[6],t[7]),l=t[6],c=t[7];break;case"z":case"Z":l=o,c=a}s=t,r.forEach(function(t){n.push(t.x),A.push(t.y)}),n.push(l),A.push(c)}var g=m(n)||0,p=m(A)||0;return{left:g,top:p,width:(v(n)||0)-g,height:(v(A)||0)-p}}}),B.Path.fromObject=function(i,r){if("string"==typeof i.sourcePath){var t=i.sourcePath;B.loadSVGFromURL(t,function(t){var e=t[0];e.setOptions(i),r&&r(e)})}else B.Object._fromObject("Path",i,r,"path")},B.Path.ATTRIBUTE_NAMES=B.SHARED_ATTRIBUTES.concat(["d"]),B.Path.fromElement=function(t,e,i){var r=B.parseAttributes(t,B.Path.ATTRIBUTE_NAMES);e(new B.Path(r.d,n(r,i)))})}("undefined"!=typeof exports?exports:this),function(t){"use strict";var s=t.fabric||(t.fabric={}),i=s.util.object.extend,o=s.util.array.min,a=s.util.array.max;s.Group||(s.Group=s.util.createClass(s.Object,s.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(t,e,i){e=e||{},this._objects=[],i&&this.callSuper("initialize",e),this._objects=t||[];for(var r=this._objects.length;r--;)this._objects[r].group=this;if(e.originX&&(this.originX=e.originX),e.originY&&(this.originY=e.originY),i)this._updateObjectsACoords();else{var n=e&&e.centerPoint;n||this._calcBounds(),this._updateObjectsCoords(n),delete e.centerPoint,this.callSuper("initialize",e)}this.setCoords()},_updateObjectsACoords:function(){for(var t=this._objects.length;t--;)this._objects[t].setCoords(!0,!0)},_updateObjectsCoords:function(t){t=t||this.getCenterPoint();for(var e=this._objects.length;e--;)this._updateObjectCoords(this._objects[e],t)},_updateObjectCoords:function(t,e){var i=t.left,r=t.top;t.set({left:i-e.x,top:r-e.y}),t.group=this,t.setCoords(!0,!0)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(t){return this._restoreObjectsState(),s.util.resetObjectTransform(this),t&&(this._objects.push(t),t.group=this,t._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},removeWithUpdate:function(t){return this._restoreObjectsState(),s.util.resetObjectTransform(this),this.remove(t),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(t){this.dirty=!0,t.group=this,t._set("canvas",this.canvas)},_onObjectRemoved:function(t){this.dirty=!0,delete t.group},_set:function(t,e){var i=this._objects.length;if(this.useSetOnGroup)for(;i--;)this._objects[i].setOnGroup(t,e);if("canvas"===t)for(i=this._objects.length;i--;)this._objects[i]._set(t,e);this.callSuper("_set",t,e)},toObject:function(r){var t=this.getObjects().map(function(t){var e=t.includeDefaultValues;t.includeDefaultValues=t.group.includeDefaultValues;var i=t.toObject(r);return t.includeDefaultValues=e,i});return i(this.callSuper("toObject",r),{objects:t})},toDatalessObject:function(r){var t,e=this.sourcePath;return t=e||this.getObjects().map(function(t){var e=t.includeDefaultValues;t.includeDefaultValues=t.group.includeDefaultValues;var i=t.toDatalessObject(r);return t.includeDefaultValues=e,i}),i(this.callSuper("toDatalessObject",r),{objects:t})},render:function(t){this._transformDone=!0,this.callSuper("render",t),this._transformDone=!1},shouldCache:function(){var t=this.objectCaching&&(!this.group||this.needsItsOwnCache()||!this.group.isOnACache());if(this.ownCaching=t)for(var e=0,i=this._objects.length;e<i;e++)if(this._objects[e].willDrawShadow())return this.ownCaching=!1;return t},willDrawShadow:function(){if(this.shadow)return this.callSuper("willDrawShadow");for(var t=0,e=this._objects.length;t<e;t++)if(this._objects[t].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(t){for(var e=0,i=this._objects.length;e<i;e++)this._objects[e].render(t)},isCacheDirty:function(){if(this.callSuper("isCacheDirty"))return!0;if(!this.statefullCache)return!1;for(var t=0,e=this._objects.length;t<e;t++)if(this._objects[t].isCacheDirty(!0)){if(this._cacheCanvas){var i=this.cacheWidth/this.zoomX,r=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-i/2,-r/2,i,r)}return!0}return!1},_restoreObjectsState:function(){return this._objects.forEach(this._restoreObjectState,this),this},realizeTransform:function(t){var e=t.calcTransformMatrix(),i=s.util.qrDecompose(e),r=new s.Point(i.translateX,i.translateY);return t.flipX=!1,t.flipY=!1,t.set("scaleX",i.scaleX),t.set("scaleY",i.scaleY),t.skewX=i.skewX,t.skewY=i.skewY,t.angle=i.angle,t.setPositionByOrigin(r,"center","center"),t},_restoreObjectState:function(t){return this.realizeTransform(t),t.setCoords(),delete t.group,this},destroy:function(){return this._objects.forEach(function(t){t.set("dirty",!0)}),this._restoreObjectsState()},toActiveSelection:function(){if(this.canvas){var t=this._objects,e=this.canvas;this._objects=[];var i=this.toObject();delete i.objects;var r=new s.ActiveSelection([]);return r.set(i),r.type="activeSelection",e.remove(this),t.forEach(function(t){t.group=r,t.dirty=!0,e.add(t)}),r.canvas=e,r._objects=t,(e._activeObject=r).setCoords(),r}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){return this.forEachObject(function(t){t.setCoords(!0,!0)}),this},_calcBounds:function(t){for(var e,i,r,n=[],A=[],s=["tr","br","bl","tl"],o=0,a=this._objects.length,l=s.length;o<a;++o)for((e=this._objects[o]).setCoords(!0),r=0;r<l;r++)i=s[r],n.push(e.oCoords[i].x),A.push(e.oCoords[i].y);this.set(this._getBounds(n,A,t))},_getBounds:function(t,e,i){var r=new s.Point(o(t),o(e)),n=new s.Point(a(t),a(e)),A={width:n.x-r.x||0,height:n.y-r.y||0};return i||(A.left=r.x||0,A.top=r.y||0,"center"===this.originX&&(A.left+=A.width/2),"right"===this.originX&&(A.left+=A.width),"center"===this.originY&&(A.top+=A.height/2),"bottom"===this.originY&&(A.top+=A.height)),A},toSVG:function(t){var e=this._createBaseSVGMarkup();e.push("<g ",this.getSvgId(),'transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'" style="',this.getSvgFilter(),'">\n');for(var i=0,r=this._objects.length;i<r;i++)e.push("\t",this._objects[i].toSVG(t));return e.push("</g>\n"),t?t(e.join("")):e.join("")}}),s.Group.fromObject=function(i,r){s.util.enlivenObjects(i.objects,function(t){var e=s.util.object.clone(i,!0);delete e.objects,r&&r(new s.Group(t,e,!0))})})}("undefined"!=typeof exports?exports:this),function(t){"use strict";var n=t.fabric||(t.fabric={});n.ActiveSelection||(n.ActiveSelection=n.util.createClass(n.Group,{type:"activeSelection",initialize:function(t,e){e=e||{},this._objects=t||[];for(var i=this._objects.length;i--;)this._objects[i].group=this;e.originX&&(this.originX=e.originX),e.originY&&(this.originY=e.originY),this._calcBounds(),this._updateObjectsCoords(),n.Object.prototype.initialize.call(this,e),this.setCoords()},toGroup:function(){var t=this._objects;this._objects=[];var e=this.toObject(),i=new n.Group([]);if(delete e.objects,i.set(e),i.type="group",t.forEach(function(t){t.group=i,t.canvas.remove(t)}),i._objects=t,!this.canvas)return i;var r=this.canvas;return r.add(i),(r._activeObject=i).setCoords(),i},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},_set:function(t,e){var i=this._objects.length;if("canvas"===t)for(;i--;)this._objects[i].set(t,e);if(this.useSetOnGroup)for(;i--;)this._objects[i].setOnGroup(t,e);n.Object.prototype._set.call(this,t,e)},shouldCache:function(){return!1},willDrawShadow:function(){if(this.shadow)return this.callSuper("willDrawShadow");for(var t=0,e=this._objects.length;t<e;t++)if(this._objects[t].willDrawShadow())return!0;return!1},isOnACache:function(){return!1},_renderControls:function(t,e,i){t.save(),t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",t,e),void 0===(i=i||{}).hasControls&&(i.hasControls=!1),void 0===i.hasRotatingPoint&&(i.hasRotatingPoint=!1),i.forActiveSelection=!0;for(var r=0,n=this._objects.length;r<n;r++)this._objects[r]._renderControls(t,i);t.restore()}}),n.ActiveSelection.fromObject=function(e,i){n.util.enlivenObjects(e.objects,function(t){delete e.objects,i&&i(new n.ActiveSelection(t,e,!0))})})}("undefined"!=typeof exports?exports:this),function(t){"use strict";var n=fabric.util.object.extend;t.fabric||(t.fabric={}),t.fabric.Image?fabric.warn("fabric.Image is already defined."):(fabric.Image=fabric.util.createClass(fabric.Object,{type:"image",crossOrigin:"",strokeWidth:0,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:fabric.Object.prototype.stateProperties.concat("cropX","cropY"),objectCaching:!1,cacheKey:"",cropX:0,cropY:0,initialize:function(t,e){e||(e={}),this.filters=[],this.callSuper("initialize",e),this._initElement(t,e),this.cacheKey="texture"+fabric.Object.__uid++},getElement:function(){return this._element},setElement:function(t,e){var i=fabric.filterBackend;return i&&i.evictCachesForKey&&(i.evictCachesForKey(this.cacheKey),i.evictCachesForKey(this.cacheKey+"_filtered")),this._element=t,this._originalElement=t,this._initConfig(e),this.resizeFilter&&this.applyResizeFilters(),0!==this.filters.length&&this.applyFilters(),this},setCrossOrigin:function(t){return this.crossOrigin=t,this._element.crossOrigin=t,this},getOriginalSize:function(){var t=this.getElement();return{width:t.width,height:t.height}},_stroke:function(t){if(this.stroke&&0!==this.strokeWidth){var e=this.width/2,i=this.height/2;t.beginPath(),t.moveTo(-e,-i),t.lineTo(e,-i),t.lineTo(e,i),t.lineTo(-e,i),t.lineTo(-e,-i),t.closePath()}},_renderDashedStroke:function(t){var e=-this.width/2,i=-this.height/2,r=this.width,n=this.height;t.save(),this._setStrokeStyles(t,this),t.beginPath(),fabric.util.drawDashedLine(t,e,i,e+r,i,this.strokeDashArray),fabric.util.drawDashedLine(t,e+r,i,e+r,i+n,this.strokeDashArray),fabric.util.drawDashedLine(t,e+r,i+n,e,i+n,this.strokeDashArray),fabric.util.drawDashedLine(t,e,i+n,e,i,this.strokeDashArray),t.closePath(),t.restore()},toObject:function(t){var e=[];this.filters.forEach(function(t){t&&e.push(t.toObject())});var i=n(this.callSuper("toObject",["crossOrigin","cropX","cropY"].concat(t)),{src:this.getSrc(),filters:e});return this.resizeFilter&&(i.resizeFilter=this.resizeFilter.toObject()),i},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=-this.width/2,r=-this.height/2;e.push('<g transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'">\n');var n=["\t<image ",this.getSvgId(),'xlink:href="',this.getSvgSrc(!0),'" x="',i,'" y="',r,'" style="',this.getSvgStyles(),'" width="',this.width,'" height="',this.height,'"></image>\n'];if("fill"===this.paintFirst&&Array.prototype.push.apply(e,n),this.stroke||this.strokeDashArray){var A=this.fill;this.fill=null,e.push("\t<rect ",'x="',i,'" y="',r,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>\n'),this.fill=A}return"fill"!==this.paintFirst&&Array.prototype.push.apply(e,n),e.push("</g>\n"),t?t(e.join("")):e.join("")},getSrc:function(t){var e=t?this._element:this._originalElement;return e?e.toDataURL?e.toDataURL():e.src:this.src||""},setSrc:function(t,e,i){return fabric.util.loadImage(t,function(t){this.setElement(t,i),e(this)},this,i&&i.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var t=this.resizeFilter,e=this.canvas?this.canvas.getRetinaScaling():1,i=this.minimumScaleTrigger,r=this.scaleX*e,n=this.scaleY*e,A=this._filteredEl||this._originalElement;if(!t||i<r&&i<n)return this._element=A,this._filterScalingX=1,void(this._filterScalingY=1);fabric.filterBackend||(fabric.filterBackend=fabric.initFilterBackend());var s=fabric.util.createCanvasElement(),o=this._filteredEl?this.cacheKey:this.cacheKey+"_filtered",a=A.width,l=A.height;s.width=a,s.height=l,this._element=s,t.scaleX=r,t.scaleY=n,fabric.filterBackend.applyFilters([t],A,a,l,this._element,o),this._filterScalingX=s.width/this._originalElement.width,this._filterScalingY=s.height/this._originalElement.height},applyFilters:function(t){if(0===(t=(t=t||this.filters||[]).filter(function(t){return t})).length)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var e=this._originalElement,i=e.naturalWidth||e.width,r=e.naturalHeight||e.height;if(this._element===this._originalElement){var n=fabric.util.createCanvasElement();n.width=i,n.height=r,this._element=n,this._filteredEl=n}else this._element.getContext("2d").clearRect(0,0,i,r);return fabric.filterBackend||(fabric.filterBackend=fabric.initFilterBackend()),fabric.filterBackend.applyFilters(t,this._originalElement,i,r,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(t){!1===this.isMoving&&this.resizeFilter&&this._needsResize()&&(this._lastScaleX=this.scaleX,this._lastScaleY=this.scaleY,this.applyResizeFilters()),this._stroke(t),this._renderPaintInOrder(t)},_renderFill:function(t){var e=this.width,i=this.height,r=e*this._filterScalingX,n=i*this._filterScalingY,A=-e/2,s=-i/2,o=this._element;o&&t.drawImage(o,this.cropX*this._filterScalingX,this.cropY*this._filterScalingY,r,n,A,s,e,i)},_needsResize:function(){return this.scaleX!==this._lastScaleX||this.scaleY!==this._lastScaleY},_resetWidthHeight:function(){var t=this.getElement();this.set("width",t.width),this.set("height",t.height)},_initElement:function(t,e){this.setElement(fabric.util.getById(t),e),fabric.util.addClass(this.getElement(),fabric.Image.CSS_CANVAS)},_initConfig:function(t){t||(t={}),this.setOptions(t),this._setWidthHeight(t),this._element&&this.crossOrigin&&(this._element.crossOrigin=this.crossOrigin)},_initFilters:function(t,e){t&&t.length?fabric.util.enlivenObjects(t,function(t){e&&e(t)},"fabric.Image.filters"):e&&e()},_setWidthHeight:function(t){this.width="width"in t?t.width:this.getElement()&&this.getElement().width||0,this.height="height"in t?t.height:this.getElement()&&this.getElement().height||0},parsePreserveAspectRatioAttribute:function(){var t,e=fabric.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),i=this._element.width,r=this._element.height,n=1,A=1,s=0,o=0,a=0,l=0,c=this.width,h=this.height,u={width:c,height:h};return!e||"none"===e.alignX&&"none"===e.alignY?(n=c/i,A=h/r):("meet"===e.meetOrSlice&&(t=(c-i*(n=A=fabric.util.findScaleToFit(this._element,u)))/2,"Min"===e.alignX&&(s=-t),"Max"===e.alignX&&(s=t),t=(h-r*A)/2,"Min"===e.alignY&&(o=-t),"Max"===e.alignY&&(o=t)),"slice"===e.meetOrSlice&&(t=i-c/(n=A=fabric.util.findScaleToCover(this._element,u)),"Mid"===e.alignX&&(a=t/2),"Max"===e.alignX&&(a=t),t=r-h/A,"Mid"===e.alignY&&(l=t/2),"Max"===e.alignY&&(l=t),i=c/n,r=h/A)),{width:i,height:r,scaleX:n,scaleY:A,offsetLeft:s,offsetTop:o,cropX:a,cropY:l}}}),fabric.Image.CSS_CANVAS="canvas-img",fabric.Image.prototype.getSvgSrc=fabric.Image.prototype.getSrc,fabric.Image.fromObject=function(r,n){fabric.util.loadImage(r.src,function(i,t){return t?void(n&&n(null,t)):void fabric.Image.prototype._initFilters.call(r,r.filters,function(t){r.filters=t||[],fabric.Image.prototype._initFilters.call(r,[r.resizeFilter],function(t){r.resizeFilter=t[0];var e=new fabric.Image(i,r);n(e)})})},null,r.crossOrigin)},fabric.Image.fromURL=function(t,e,i){fabric.util.loadImage(t,function(t){e&&e(new fabric.Image(t,i))},null,i&&i.crossOrigin)},fabric.Image.ATTRIBUTE_NAMES=fabric.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin".split(" ")),fabric.Image.fromElement=function(t,e,i){var r=fabric.parseAttributes(t,fabric.Image.ATTRIBUTE_NAMES);fabric.Image.fromURL(r["xlink:href"],e,n(i?fabric.util.object.clone(i):{},r))})}("undefined"!=typeof exports?exports:this),fabric.util.object.extend(fabric.Object.prototype,{_getAngleValueForStraighten:function(){var t=this.angle%360;return 0<t?90*Math.round((t-1)/90):90*Math.round(t/90)},straighten:function(){return this.rotate(this._getAngleValueForStraighten()),this},fxStraighten:function(t){var e=function(){},i=(t=t||{}).onComplete||e,r=t.onChange||e,n=this;return fabric.util.animate({startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(t){n.rotate(t),r()},onComplete:function(){n.setCoords(),i()}}),this}}),fabric.util.object.extend(fabric.StaticCanvas.prototype,{straightenObject:function(t){return t.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(t){return t.fxStraighten({onChange:this.requestRenderAllBound}),this}}),function(){"use strict";function t(t){t&&t.tileSize&&(this.tileSize=t.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}fabric.isWebglSupported=function(t){if(fabric.isLikelyNode)return!1;t=t||fabric.WebglFilterBackend.prototype.tileSize;var e,i,r,n=document.createElement("canvas"),A=n.getContext("webgl")||n.getContext("experimental-webgl"),s=!1;if(A){fabric.maxTextureSize=A.getParameter(A.MAX_TEXTURE_SIZE),s=fabric.maxTextureSize>=t;for(var o=["highp","mediump","lowp"],a=0;a<3;a++)if(void 0,i="precision "+o[a]+" float;\nvoid main(){}",r=(e=A).createShader(e.FRAGMENT_SHADER),e.shaderSource(r,i),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)){fabric.webGlPrecision=o[a];break}}return this.isSupported=s},(fabric.WebglFilterBackend=t).prototype={tileSize:2048,resources:{},setupGLContext:function(t,e){this.dispose(),this.createWebGLCanvas(t,e),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(t,e)},chooseFastestCopyGLTo2DMethod:function(t,e){var i,r=void 0!==window.performance;try{new ImageData(1,1),i=!0}catch(t){i=!1}var n="undefined"!=typeof ArrayBuffer,A="undefined"!=typeof Uint8ClampedArray;if(r&&i&&n&&A){var s,o,a=fabric.util.createCanvasElement(),l=new ArrayBuffer(t*e*4),c={imageBuffer:l,destinationWidth:t,destinationHeight:e,targetCanvas:a};a.width=t,a.height=e,s=window.performance.now(),copyGLTo2DDrawImage.call(c,this.gl,c),o=window.performance.now()-s,s=window.performance.now(),copyGLTo2DPutImageData.call(c,this.gl,c),window.performance.now()-s<o?(this.imageBuffer=l,this.copyGLTo2D=copyGLTo2DPutImageData):this.copyGLTo2D=copyGLTo2DDrawImage}},createWebGLCanvas:function(t,e){var i=fabric.util.createCanvasElement();i.width=t,i.height=e;var r={premultipliedAlpha:!1},n=i.getContext("webgl",r);n||(n=i.getContext("experimental-webgl",r)),n&&(n.clearColor(0,0,0,0),this.canvas=i,this.gl=n)},applyFilters:function(t,e,i,r,n,A){var s,o=this.gl;A&&(s=this.getCachedTexture(A,e));var a={originalWidth:e.width||e.originalWidth,originalHeight:e.height||e.originalHeight,sourceWidth:i,sourceHeight:r,destinationWidth:i,destinationHeight:r,context:o,sourceTexture:this.createTexture(o,i,r,!s&&e),targetTexture:this.createTexture(o,i,r),originalTexture:s||this.createTexture(o,i,r,!s&&e),passes:t.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:n},l=o.createFramebuffer();return o.bindFramebuffer(o.FRAMEBUFFER,l),t.forEach(function(t){t&&t.applyTo(a)}),resizeCanvasIfNeeded(a),this.copyGLTo2D(o,a),o.bindTexture(o.TEXTURE_2D,null),o.deleteTexture(a.sourceTexture),o.deleteTexture(a.targetTexture),o.deleteFramebuffer(l),n.getContext("2d").setTransform(1,0,0,1,0,0),a},applyFiltersDebug:function(t,e,i,r,n,A){var s=this.gl,o=this.applyFilters(t,e,i,r,n,A),a=s.getError();if(a!==s.NO_ERROR){var l=this.glErrorToString(s,a),c=new Error("WebGL Error "+l);throw c.glErrorCode=a,c}return o},glErrorToString:function(t,e){if(!t)return"Context undefined for error code: "+e;if("number"!=typeof e)return"Error code is not a number";switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"UNKNOWN_ERROR"}},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(t,e,i,r){var n=t.createTexture();return t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),r?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,i,0,t.RGBA,t.UNSIGNED_BYTE,null),n},getCachedTexture:function(t,e){if(this.textureCache[t])return this.textureCache[t];var i=this.createTexture(this.gl,e.width,e.height,e);return this.textureCache[t]=i},evictCachesForKey:function(t){this.textureCache[t]&&(this.gl.deleteTexture(this.textureCache[t]),delete this.textureCache[t])},copyGLTo2D:copyGLTo2DDrawImage,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var t=this.gl,e=t.getExtension("WEBGL_debug_renderer_info"),i={renderer:"",vendor:""};if(e){var r=t.getParameter(e.UNMASKED_RENDERER_WEBGL),n=t.getParameter(e.UNMASKED_VENDOR_WEBGL);r&&(i.renderer=r.toLowerCase()),n&&(i.vendor=n.toLowerCase())}return this.gpuInfo=i}}}(),function(){"use strict";function t(){}var e=function(){};(fabric.Canvas2dFilterBackend=t).prototype={evictCachesForKey:e,dispose:e,clearWebGLCaches:e,resources:{},applyFilters:function(t,e,i,r,n){var A=n.getContext("2d");A.drawImage(e,0,0,i,r);var s={sourceWidth:i,sourceHeight:r,imageData:A.getImageData(0,0,i,r),originalEl:e,originalImageData:A.getImageData(0,0,i,r),canvasEl:n,ctx:A,filterBackend:this};return t.forEach(function(t){t.applyTo(s)}),(s.imageData.width!==i||s.imageData.height!==r)&&(n.width=s.imageData.width,n.height=s.imageData.height),A.putImageData(s.imageData,0,0),s}}}(),fabric.Image.filters=fabric.Image.filters||{},fabric.Image.filters.BaseFilter=fabric.util.createClass({type:"BaseFilter",vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvoid main() {\nvTexCoord = aPosition;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:"precision highp float;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\n}",initialize:function(t){t&&this.setOptions(t)},setOptions:function(t){for(var e in t)this[e]=t[e]},createProgram:function(t,e,i){e=e||this.fragmentSource,i=i||this.vertexSource,"highp"!==fabric.webGlPrecision&&(e=e.replace(/precision highp float/g,"precision "+fabric.webGlPrecision+" float"));var r=t.createShader(t.VERTEX_SHADER);if(t.shaderSource(r,i),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+t.getShaderInfoLog(r));var n=t.createShader(t.FRAGMENT_SHADER);if(t.shaderSource(n,e),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+t.getShaderInfoLog(n));var A=t.createProgram();if(t.attachShader(A,r),t.attachShader(A,n),t.linkProgram(A),!t.getProgramParameter(A,t.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+t.getProgramInfoLog(A));var s=this.getAttributeLocations(t,A),o=this.getUniformLocations(t,A)||{};return o.uStepW=t.getUniformLocation(A,"uStepW"),o.uStepH=t.getUniformLocation(A,"uStepH"),{program:A,attributeLocations:s,uniformLocations:o}},getAttributeLocations:function(t,e){return{aPosition:t.getAttribLocation(e,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(t,e,i){var r=e.aPostion,n=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,n),t.enableVertexAttribArray(r),t.vertexAttribPointer(r,2,t.FLOAT,!1,0,0),t.bufferData(t.ARRAY_BUFFER,i,t.STATIC_DRAW)},_setupFrameBuffer:function(t){var e,i,r=t.context;1<t.passes?(e=t.destinationWidth,i=t.destinationHeight,(t.sourceWidth!==e||t.sourceHeight!==i)&&(r.deleteTexture(t.targetTexture),t.targetTexture=t.filterBackend.createTexture(r,e,i)),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t.targetTexture,0)):(r.bindFramebuffer(r.FRAMEBUFFER,null),r.finish())},_swapTextures:function(t){t.passes--,t.pass++;var e=t.targetTexture;t.targetTexture=t.sourceTexture,t.sourceTexture=e},isNeutralState:function(){return!1},applyTo:function(t){if(t.webgl){if(1<t.passes&&this.isNeutralState(t))return;this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t)}else this.isNeutralState()||this.applyTo2d(t)},retrieveShader:function(t){return t.programCache.hasOwnProperty(this.type)||(t.programCache[this.type]=this.createProgram(t.context)),t.programCache[this.type]},applyToWebGL:function(t){var e=t.context,i=this.retrieveShader(t);0===t.pass&&t.originalTexture?e.bindTexture(e.TEXTURE_2D,t.originalTexture):e.bindTexture(e.TEXTURE_2D,t.sourceTexture),e.useProgram(i.program),this.sendAttributeData(e,i.attributeLocations,t.aPosition),e.uniform1f(i.uniformLocations.uStepW,1/t.sourceWidth),e.uniform1f(i.uniformLocations.uStepH,1/t.sourceHeight),this.sendUniformData(e,i.uniformLocations),e.viewport(0,0,t.destinationWidth,t.destinationHeight),e.drawArrays(e.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(t,e,i){t.activeTexture(i),t.bindTexture(t.TEXTURE_2D,e),t.activeTexture(t.TEXTURE0)},unbindAdditionalTexture:function(t,e){t.activeTexture(e),t.bindTexture(t.TEXTURE_2D,null),t.activeTexture(t.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(t){this[this.mainParameter]=t},sendUniformData:function(){},createHelpLayer:function(t){if(!t.helpLayer){var e=document.createElement("canvas");e.width=t.sourceWidth,e.height=t.sourceHeight,t.helpLayer=e}},toObject:function(){var t={type:this.type},e=this.mainParameter;return e&&(t[e]=this[e]),t},toJSON:function(){return this.toObject()}}),fabric.Image.filters.BaseFilter.fromObject=function(t,e){var i=new fabric.Image.filters[t.type](t);return e&&e(i),i},function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,r=e.util.createClass;i.ColorMatrix=r(i.BaseFilter,{type:"ColorMatrix",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nuniform mat4 uColorMatrix;\nuniform vec4 uConstants;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor *= uColorMatrix;\ncolor += uConstants;\ngl_FragColor = color;\n}",matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(t){this.callSuper("initialize",t),this.matrix=this.matrix.slice(0)},isNeutralState:function(){for(var t=i.ColorMatrix,e=20;e--;)if(this.matrix[e]!==t.prototype.matrix[e])return!1;return!0},applyTo2d:function(t){var e,i,r,n,A,s=t.imageData.data,o=s.length,a=this.matrix,l=this.colorsOnly;for(A=0;A<o;A+=4)e=s[A],i=s[A+1],r=s[A+2],l?(s[A]=e*a[0]+i*a[1]+r*a[2]+255*a[4],s[A+1]=e*a[5]+i*a[6]+r*a[7]+255*a[9],s[A+2]=e*a[10]+i*a[11]+r*a[12]+255*a[14]):(n=s[A+3],s[A]=e*a[0]+i*a[1]+r*a[2]+n*a[3]+255*a[4],s[A+1]=e*a[5]+i*a[6]+r*a[7]+n*a[8]+255*a[9],s[A+2]=e*a[10]+i*a[11]+r*a[12]+n*a[13]+255*a[14],s[A+3]=e*a[15]+i*a[16]+r*a[17]+n*a[18]+255*a[19])},getUniformLocations:function(t,e){return{uColorMatrix:t.getUniformLocation(e,"uColorMatrix"),uConstants:t.getUniformLocation(e,"uConstants")}},sendUniformData:function(t,e){var i=this.matrix,r=[i[0],i[1],i[2],i[3],i[5],i[6],i[7],i[8],i[10],i[11],i[12],i[13],i[15],i[16],i[17],i[18]],n=[i[4],i[9],i[14],i[19]];t.uniformMatrix4fv(e.uColorMatrix,!1,r),t.uniform4fv(e.uConstants,n)}}),e.Image.filters.ColorMatrix.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,r=e.util.createClass;i.Brightness=r(i.BaseFilter,{type:"Brightness",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBrightness;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += uBrightness;\ngl_FragColor = color;\n}",brightness:0,mainParameter:"brightness",applyTo2d:function(t){if(0!==this.brightness){var e,i=t.imageData.data,r=i.length,n=Math.round(255*this.brightness);for(e=0;e<r;e+=4)i[e]=i[e]+n,i[e+1]=i[e+1]+n,i[e+2]=i[e+2]+n}},getUniformLocations:function(t,e){return{uBrightness:t.getUniformLocation(e,"uBrightness")}},sendUniformData:function(t,e){t.uniform1f(e.uBrightness,this.brightness)}}),e.Image.filters.Brightness.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,r=e.Image.filters,n=e.util.createClass;r.Convolute=n(r.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_3_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_5_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_5_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_7_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_7_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_9_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_9_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}"},retrieveShader:function(t){var e=Math.sqrt(this.matrix.length),i=this.type+"_"+e+"_"+(this.opaque?1:0),r=this.fragmentSource[i];return t.programCache.hasOwnProperty(i)||(t.programCache[i]=this.createProgram(t.context,r)),t.programCache[i]},applyTo2d:function(t){var e,i,r,n,A,s,o,a,l,c,h,u,f,d=t.imageData,g=d.data,p=this.matrix,B=Math.round(Math.sqrt(p.length)),m=Math.floor(B/2),v=d.width,w=d.height,C=t.ctx.createImageData(v,w),b=C.data,_=this.opaque?1:0;for(h=0;h<w;h++)for(c=0;c<v;c++){for(A=4*(h*v+c),f=n=r=i=e=0;f<B;f++)for(u=0;u<B;u++)s=c+u-m,(o=h+f-m)<0||w<o||s<0||v<s||(a=4*(o*v+s),l=p[f*B+u],e+=g[a]*l,i+=g[a+1]*l,r+=g[a+2]*l,_||(n+=g[a+3]*l));b[A]=e,b[A+1]=i,b[A+2]=r,b[A+3]=_?g[A+3]:n}t.imageData=C},getUniformLocations:function(t,e){return{uMatrix:t.getUniformLocation(e,"uMatrix"),uOpaque:t.getUniformLocation(e,"uOpaque"),uHalfSize:t.getUniformLocation(e,"uHalfSize"),uSize:t.getUniformLocation(e,"uSize")}},sendUniformData:function(t,e){t.uniform1fv(e.uMatrix,this.matrix)},toObject:function(){return i(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),e.Image.filters.Convolute.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,r=e.util.createClass;i.Grayscale=r(i.BaseFilter,{type:"Grayscale",fragmentSource:{average:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat average = (color.r + color.b + color.g) / 3.0;\ngl_FragColor = vec4(average, average, average, color.a);\n}",lightness:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\ngl_FragColor = vec4(average, average, average, col.a);\n}",luminosity:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\ngl_FragColor = vec4(average, average, average, col.a);\n}"},mode:"average",mainParameter:"mode",applyTo2d:function(t){var e,i,r=t.imageData.data,n=r.length,A=this.mode;for(e=0;e<n;e+=4)"average"===A?i=(r[e]+r[e+1]+r[e+2])/3:"lightness"===A?i=(Math.min(r[e],r[e+1],r[e+2])+Math.max(r[e],r[e+1],r[e+2]))/2:"luminosity"===A&&(i=.21*r[e]+.72*r[e+1]+.07*r[e+2]),r[e]=i,r[e+1]=i,r[e+2]=i},retrieveShader:function(t){var e=this.type+"_"+this.mode;if(!t.programCache.hasOwnProperty(e)){var i=this.fragmentSource[this.mode];t.programCache[e]=this.createProgram(t.context,i)}return t.programCache[e]},getUniformLocations:function(t,e){return{uMode:t.getUniformLocation(e,"uMode")}},sendUniformData:function(t,e){t.uniform1i(e.uMode,1)}}),e.Image.filters.Grayscale.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,r=e.util.createClass;i.Invert=r(i.BaseFilter,{type:"Invert",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uInvert;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nif (uInvert == 1) {\ngl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\n} else {\ngl_FragColor = color;\n}\n}",invert:!0,mainParameter:"invert",applyTo2d:function(t){if(this.invert){var e,i=t.imageData.data,r=i.length;for(e=0;e<r;e+=4)i[e]=255-i[e],i[e+1]=255-i[e+1],i[e+2]=255-i[e+2]}},getUniformLocations:function(t,e){return{uInvert:t.getUniformLocation(e,"uInvert")}},sendUniformData:function(t,e){t.uniform1i(e.uInvert,this.invert)}}),e.Image.filters.Invert.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,r=e.Image.filters,n=e.util.createClass;r.Noise=n(r.BaseFilter,{type:"Noise",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uStepH;\nuniform float uNoise;\nuniform float uSeed;\nvarying vec2 vTexCoord;\nfloat rand(vec2 co, float seed, float vScale) {\nreturn fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\n}\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\ngl_FragColor = color;\n}",mainParameter:"noise",noise:0,applyTo2d:function(t){if(0!==this.noise){var e,i,r=t.imageData.data,n=r.length,A=this.noise;for(e=0,n=r.length;e<n;e+=4)i=(.5-Math.random())*A,r[e]+=i,r[e+1]+=i,r[e+2]+=i}},getUniformLocations:function(t,e){return{uNoise:t.getUniformLocation(e,"uNoise"),uSeed:t.getUniformLocation(e,"uSeed")}},sendUniformData:function(t,e){t.uniform1f(e.uNoise,this.noise/255),t.uniform1f(e.uSeed,Math.random())},toObject:function(){return i(this.callSuper("toObject"),{noise:this.noise})}}),e.Image.filters.Noise.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,r=e.util.createClass;i.Pixelate=r(i.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBlocksize;\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nfloat blockW = uBlocksize * uStepW;\nfloat blockH = uBlocksize * uStepW;\nint posX = int(vTexCoord.x / blockW);\nint posY = int(vTexCoord.y / blockH);\nfloat fposX = float(posX);\nfloat fposY = float(posY);\nvec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\nvec4 color = texture2D(uTexture, squareCoords);\ngl_FragColor = color;\n}",applyTo2d:function(t){if(1!==this.blocksize){var e,i,r,n,A,s,o,a,l,c,h,u=t.imageData,f=u.data,d=u.height,g=u.width;for(i=0;i<d;i+=this.blocksize)for(r=0;r<g;r+=this.blocksize)for(n=f[e=4*i*g+4*r],A=f[e+1],s=f[e+2],o=f[e+3],c=Math.min(i+this.blocksize,d),h=Math.min(r+this.blocksize,g),a=i;a<c;a++)for(l=r;l<h;l++)f[e=4*a*g+4*l]=n,f[e+1]=A,f[e+2]=s,f[e+3]=o}},isNeutralState:function(){return 1===this.blocksize},getUniformLocations:function(t,e){return{uBlocksize:t.getUniformLocation(e,"uBlocksize"),uStepW:t.getUniformLocation(e,"uStepW"),uStepH:t.getUniformLocation(e,"uStepH")}},sendUniformData:function(t,e){t.uniform1f(e.uBlocksize,this.blocksize)}}),e.Image.filters.Pixelate.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var c=t.fabric||(t.fabric={}),e=c.util.object.extend,i=c.Image.filters,r=c.util.createClass;i.RemoveColor=r(i.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uLow;\nuniform vec4 uHigh;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\nif(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\ngl_FragColor.a = 0.0;\n}\n}",distance:.02,useAlpha:!1,applyTo2d:function(t){var e,i,r,n,A=t.imageData.data,s=255*this.distance,o=new c.Color(this.color).getSource(),a=[o[0]-s,o[1]-s,o[2]-s],l=[o[0]+s,o[1]+s,o[2]+s];for(e=0;e<A.length;e+=4)i=A[e],r=A[e+1],n=A[e+2],a[0]<i&&a[1]<r&&a[2]<n&&i<l[0]&&r<l[1]&&n<l[2]&&(A[e+3]=0)},getUniformLocations:function(t,e){return{uLow:t.getUniformLocation(e,"uLow"),uHigh:t.getUniformLocation(e,"uHigh")}},sendUniformData:function(t,e){var i=new c.Color(this.color).getSource(),r=parseFloat(this.distance),n=[0+i[0]/255-r,0+i[1]/255-r,0+i[2]/255-r,1],A=[i[0]/255+r,i[1]/255+r,i[2]/255+r,1];t.uniform4fv(e.uLow,n),t.uniform4fv(e.uHigh,A)},toObject:function(){return e(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),c.Image.filters.RemoveColor.fromObject=c.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,r=e.util.createClass,n={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var A in n)i[A]=r(i.ColorMatrix,{type:A,matrix:n[A],mainParameter:!1,colorsOnly:!0}),e.Image.filters[A].fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var u=t.fabric,e=u.Image.filters,i=u.util.createClass;e.BlendColor=i(e.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb *= uColor.rgb;\ngl_FragColor = color;\n}",screen:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb = 1.0 - (1.0 - color.rgb) * (1.0 - uColor.rgb);\ngl_FragColor = color;\n}",add:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\ngl_FragColor.rgb += uColor.rgb;\n}",diff:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\ngl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\n}",subtract:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\ngl_FragColor.rgb -= uColor.rgb;\n}",lighten:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\ngl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\n}",darken:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\ngl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\n}",exclusion:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\ngl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\n}",overlay:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\nif (uColor.r < 0.5) {\ngl_FragColor.r *= 2.0 * uColor.r;\n} else {\ngl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\n}\nif (uColor.g < 0.5) {\ngl_FragColor.g *= 2.0 * uColor.g;\n} else {\ngl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\n}\nif (uColor.b < 0.5) {\ngl_FragColor.b *= 2.0 * uColor.b;\n} else {\ngl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\n}\n}",tint:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\ngl_FragColor.rgb *= (1.0 - uColor.a);\ngl_FragColor.rgb += uColor.rgb;\n}"},retrieveShader:function(t){var e=this.type+"_"+this.mode,i=this.fragmentSource[this.mode];return t.programCache.hasOwnProperty(e)||(t.programCache[e]=this.createProgram(t.context,i)),t.programCache[e]},applyTo2d:function(t){var e,i,r,n,A,s,o,a=t.imageData.data,l=a.length,c=1-this.alpha;e=(o=new u.Color(this.color).getSource())[0]*this.alpha,i=o[1]*this.alpha,r=o[2]*this.alpha;for(var h=0;h<l;h+=4)switch(n=a[h],A=a[h+1],s=a[h+2],this.mode){case"multiply":a[h]=n*e/255,a[h+1]=A*i/255,a[h+2]=s*r/255;break;case"screen":a[h]=255-(255-n)*(255-e)/255,a[h+1]=255-(255-A)*(255-i)/255,a[h+2]=255-(255-s)*(255-r)/255;break;case"add":a[h]=n+e,a[h+1]=A+i,a[h+2]=s+r;break;case"diff":case"difference":a[h]=Math.abs(n-e),a[h+1]=Math.abs(A-i),a[h+2]=Math.abs(s-r);break;case"subtract":a[h]=n-e,a[h+1]=A-i,a[h+2]=s-r;break;case"darken":a[h]=Math.min(n,e),a[h+1]=Math.min(A,i),a[h+2]=Math.min(s,r);break;case"lighten":a[h]=Math.max(n,e),a[h+1]=Math.max(A,i),a[h+2]=Math.max(s,r);break;case"overlay":a[h]=e<128?2*n*e/255:255-2*(255-n)*(255-e)/255,a[h+1]=i<128?2*A*i/255:255-2*(255-A)*(255-i)/255,a[h+2]=r<128?2*s*r/255:255-2*(255-s)*(255-r)/255;break;case"exclusion":a[h]=e+n-2*e*n/255,a[h+1]=i+A-2*i*A/255,a[h+2]=r+s-2*r*s/255;break;case"tint":a[h]=e+n*c,a[h+1]=i+A*c,a[h+2]=r+s*c}},getUniformLocations:function(t,e){return{uColor:t.getUniformLocation(e,"uColor")}},sendUniformData:function(t,e){var i=new u.Color(this.color).getSource();i[0]=this.alpha*i[0]/255,i[1]=this.alpha*i[1]/255,i[2]=this.alpha*i[2]/255,i[3]=this.alpha,t.uniform4fv(e.uColor,i)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),u.Image.filters.BlendColor.fromObject=u.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var B=t.fabric||(t.fabric={}),x=Math.pow,O=Math.floor,H=Math.sqrt,I=Math.abs,l=Math.round,r=Math.sin,D=Math.ceil,e=B.Image.filters,i=B.util.createClass;e.Resize=i(e.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:0,scaleY:0,lanczosLobes:3,getUniformLocations:function(t,e){return{uDelta:t.getUniformLocation(e,"uDelta"),uTaps:t.getUniformLocation(e,"uTaps")}},sendUniformData:function(t,e){t.uniform2fv(e.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),t.uniform1fv(e.uTaps,this.taps)},retrieveShader:function(t){var e=this.getFilterWindow(),i=this.type+"_"+e;if(!t.programCache.hasOwnProperty(i)){var r=this.generateShader(e);t.programCache[i]=this.createProgram(t.context,r)}return t.programCache[i]},getFilterWindow:function(){var t=this.tempScale;return Math.ceil(this.lanczosLobes/t)},getTaps:function(){for(var t=this.lanczosCreate(this.lanczosLobes),e=this.tempScale,i=this.getFilterWindow(),r=new Array(i),n=1;n<=i;n++)r[n-1]=t(n*e);return r},generateShader:function(t){for(var e=new Array(t),i=this.fragmentSourceTOP,r=1;r<=t;r++)e[r-1]=r+".0 * uDelta";return i+="uniform float uTaps["+t+"];\n",i+="void main() {\n",i+="  vec4 color = texture2D(uTexture, vTexCoord);\n",i+="  float sum = 1.0;\n",e.forEach(function(t,e){i+="  color += texture2D(uTexture, vTexCoord + "+t+") * uTaps["+e+"];\n",i+="  color += texture2D(uTexture, vTexCoord - "+t+") * uTaps["+e+"];\n",i+="  sum += 2.0 * uTaps["+e+"];\n"}),i+="  gl_FragColor = color / sum;\n",i+="}"},fragmentSourceTOP:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\n",applyTo:function(t){if(t.webgl){if(1<t.passes&&this.isNeutralState(t))return;t.passes++,this.width=t.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=t.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),t.destinationWidth=this.dW,this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t),t.sourceWidth=t.destinationWidth,this.height=t.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),t.destinationHeight=this.dH,this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t),t.sourceHeight=t.destinationHeight}else this.isNeutralState(t)||this.applyTo2d(t)},isNeutralState:function(t){var e=t.scaleX||this.scaleX,i=t.scaleY||this.scaleY;return 1===e&&1===i},lanczosCreate:function(i){return function(t){if(i<=t||t<=-i)return 0;if(t<1.1920929e-7&&-1.1920929e-7<t)return 1;var e=(t*=Math.PI)/i;return r(t)/t*r(e)/e}},applyTo2d:function(t){var e=t.imageData,i=this.scaleX,r=this.scaleY;this.rcpScaleX=1/i,this.rcpScaleY=1/r;var n,A=e.width,s=e.height,o=l(A*i),a=l(s*r);"sliceHack"===this.resizeType?n=this.sliceByTwo(t,A,s,o,a):"hermite"===this.resizeType?n=this.hermiteFastResize(t,A,s,o,a):"bilinear"===this.resizeType?n=this.bilinearFiltering(t,A,s,o,a):"lanczos"===this.resizeType&&(n=this.lanczosResize(t,A,s,o,a)),t.imageData=n},sliceByTwo:function(t,e,i,r,n){var A,s,o=t.imageData,a=!1,l=!1,c=.5*e,h=.5*i,u=B.filterBackend.resources,f=0,d=0,g=e,p=0;for(u.sliceByTwo||(u.sliceByTwo=document.createElement("canvas")),((A=u.sliceByTwo).width<1.5*e||A.height<i)&&(A.width=1.5*e,A.height=i),(s=A.getContext("2d")).clearRect(0,0,1.5*e,i),s.putImageData(o,0,0),r=O(r),n=O(n);!a||!l;)i=h,r<O(.5*(e=c))?c=O(.5*c):(c=r,a=!0),n<O(.5*h)?h=O(.5*h):(h=n,l=!0),s.drawImage(A,f,d,e,i,g,p,c,h),f=g,d=p,p+=h;return s.getImageData(f,d,r,n)},lanczosResize:function(t,d,g,p,B){var m=t.imageData.data,v=t.ctx.createImageData(p,B),w=v.data,C=this.lanczosCreate(this.lanczosLobes),b=this.rcpScaleX,_=this.rcpScaleY,y=2/this.rcpScaleX,E=2/this.rcpScaleY,Q=D(b*this.lanczosLobes/2),F=D(_*this.lanczosLobes/2),U={},T={},S={};return function t(e){var i,r,n,A,s,o,a,l,c,h,u;for(T.x=(e+.5)*b,S.x=O(T.x),i=0;i<B;i++){for(T.y=(i+.5)*_,S.y=O(T.y),c=l=a=o=s=0,r=S.x-Q;r<=S.x+Q;r++)if(!(r<0||d<=r)){h=O(1e3*I(r-T.x)),U[h]||(U[h]={});for(var f=S.y-F;f<=S.y+F;f++)f<0||g<=f||(u=O(1e3*I(f-T.y)),U[h][u]||(U[h][u]=C(H(x(h*y,2)+x(u*E,2))/1e3)),0<(n=U[h][u])&&(s+=n,o+=n*m[A=4*(f*d+r)],a+=n*m[A+1],l+=n*m[A+2],c+=n*m[A+3]))}w[A=4*(i*p+e)]=o/s,w[A+1]=a/s,w[A+2]=l/s,w[A+3]=c/s}return++e<p?t(e):v}(0)},bilinearFiltering:function(t,e,i,r,n){var A,s,o,a,l,c,h,u,f,d=0,g=this.rcpScaleX,p=this.rcpScaleY,B=4*(e-1),m=t.imageData.data,v=t.ctx.createImageData(r,n),w=v.data;for(o=0;o<n;o++)for(a=0;a<r;a++)for(l=g*a-(A=O(g*a)),c=p*o-(s=O(p*o)),f=4*(s*e+A),h=0;h<4;h++)u=m[f+h]*(1-l)*(1-c)+m[f+4+h]*l*(1-c)+m[f+B+h]*c*(1-l)+m[f+B+4+h]*l*c,w[d++]=u;return v},hermiteFastResize:function(t,e,i,r,n){for(var A=this.rcpScaleX,s=this.rcpScaleY,o=D(A/2),a=D(s/2),l=t.imageData.data,c=t.ctx.createImageData(r,n),h=c.data,u=0;u<n;u++)for(var f=0;f<r;f++){for(var d=4*(f+u*r),g=0,p=0,B=0,m=0,v=0,w=0,C=0,b=(u+.5)*s,_=O(u*s);_<(u+1)*s;_++)for(var y=I(b-(_+.5))/a,E=(f+.5)*A,Q=y*y,F=O(f*A);F<(f+1)*A;F++){var U=I(E-(F+.5))/o,T=H(Q+U*U);1<T&&T<-1||0<(g=2*T*T*T-3*T*T+1)&&(C+=g*l[(U=4*(F+_*e))+3],B+=g,l[U+3]<255&&(g=g*l[U+3]/250),m+=g*l[U],v+=g*l[U+1],w+=g*l[U+2],p+=g)}h[d]=m/p,h[d+1]=v/p,h[d+2]=w/p,h[d+3]=C/B}return c},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),B.Image.filters.Resize.fromObject=B.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,r=e.util.createClass;i.Contrast=r(i.BaseFilter,{type:"Contrast",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uContrast;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\ncolor.rgb = contrastF * (color.rgb - 0.5) + 0.5;\ngl_FragColor = color;\n}",contrast:0,mainParameter:"contrast",applyTo2d:function(t){if(0!==this.contrast){var e,i=t.imageData.data,r=i.length,n=Math.floor(255*this.contrast),A=259*(n+255)/(255*(259-n));for(e=0;e<r;e+=4)i[e]=A*(i[e]-128)+128,i[e+1]=A*(i[e+1]-128)+128,i[e+2]=A*(i[e+2]-128)+128}},getUniformLocations:function(t,e){return{uContrast:t.getUniformLocation(e,"uContrast")}},sendUniformData:function(t,e){t.uniform1f(e.uContrast,this.contrast)}}),e.Image.filters.Contrast.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,r=e.util.createClass;i.Saturation=r(i.BaseFilter,{type:"Saturation",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uSaturation;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat rgMax = max(color.r, color.g);\nfloat rgbMax = max(rgMax, color.b);\ncolor.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\ncolor.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\ncolor.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\ngl_FragColor = color;\n}",saturation:0,mainParameter:"saturation",applyTo2d:function(t){if(0!==this.saturation){var e,i,r=t.imageData.data,n=r.length,A=-this.saturation;for(e=0;e<n;e+=4)i=Math.max(r[e],r[e+1],r[e+2]),r[e]+=i!==r[e]?(i-r[e])*A:0,r[e+1]+=i!==r[e+1]?(i-r[e+1])*A:0,r[e+2]+=i!==r[e+2]?(i-r[e+2])*A:0}},getUniformLocations:function(t,e){return{uSaturation:t.getUniformLocation(e,"uSaturation")}},sendUniformData:function(t,e){t.uniform1f(e.uSaturation,-this.saturation)}}),e.Image.filters.Saturation.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,r=e.util.createClass;i.Blur=r(i.BaseFilter,{type:"Blur",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\nconst float nSamples = 15.0;\nvec3 v3offset = vec3(12.9898, 78.233, 151.7182);\nfloat random(vec3 scale) {\nreturn fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\n}\nvoid main() {\nvec4 color = vec4(0.0);\nfloat total = 0.0;\nfloat offset = random(v3offset);\nfor (float t = -nSamples; t <= nSamples; t++) {\nfloat percent = (t + offset - 0.5) / nSamples;\nfloat weight = 1.0 - abs(percent);\ncolor += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;\ntotal += weight;\n}\ngl_FragColor = color / total;\n}",blur:0,mainParameter:"blur",applyTo:function(t){t.webgl?(this.aspectRatio=t.sourceWidth/t.sourceHeight,t.passes++,this._setupFrameBuffer(t),this.horizontal=!0,this.applyToWebGL(t),this._swapTextures(t),this._setupFrameBuffer(t),this.horizontal=!1,this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)},applyTo2d:function(t){t.imageData=this.simpleBlur(t)},simpleBlur:function(t){var e,i,r=t.filterBackend.resources,n=t.imageData.width,A=t.imageData.height;r.blurLayer1||(r.blurLayer1=document.createElement("canvas"),r.blurLayer2=document.createElement("canvas")),e=r.blurLayer1,i=r.blurLayer2,(e.width!==n||e.height!==A)&&(i.width=e.width=n,i.height=e.height=A);var s,o,a,l,c=e.getContext("2d"),h=i.getContext("2d"),u=.06*this.blur*.5;for(c.putImageData(t.imageData,0,0),h.clearRect(0,0,n,A),l=-15;l<=15;l++)a=u*(o=l/15)*n+(s=(Math.random()-.5)/4),h.globalAlpha=1-Math.abs(o),h.drawImage(e,a,s),c.drawImage(i,0,0),h.globalAlpha=1,h.clearRect(0,0,i.width,i.height);for(l=-15;l<=15;l++)a=u*(o=l/15)*A+(s=(Math.random()-.5)/4),h.globalAlpha=1-Math.abs(o),h.drawImage(e,s,a),c.drawImage(i,0,0),h.globalAlpha=1,h.clearRect(0,0,i.width,i.height);t.ctx.drawImage(e,0,0);var f=t.ctx.getImageData(0,0,e.width,e.height);return c.globalAlpha=1,c.clearRect(0,0,e.width,e.height),f},getUniformLocations:function(t,e){return{delta:t.getUniformLocation(e,"uDelta")}},sendUniformData:function(t,e){var i=this.chooseRightDelta();t.uniform2fv(e.delta,i)},chooseRightDelta:function(){var t,e=1,i=[0,0];return this.horizontal?1<this.aspectRatio&&(e=1/this.aspectRatio):this.aspectRatio<1&&(e=this.aspectRatio),t=e*this.blur*.12,this.horizontal?i[0]=t:i[1]=t,i}}),i.Blur.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,r=e.util.createClass;i.Gamma=r(i.BaseFilter,{type:"Gamma",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec3 uGamma;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec3 correction = (1.0 / uGamma);\ncolor.r = pow(color.r, correction.r);\ncolor.g = pow(color.g, correction.g);\ncolor.b = pow(color.b, correction.b);\ngl_FragColor = color;\ngl_FragColor.rgb *= color.a;\n}",gamma:[1,1,1],mainParameter:"gamma",applyTo2d:function(t){var e,i=t.imageData.data,r=this.gamma,n=i.length,A=1/r[0],s=1/r[1],o=1/r[2];for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),e=0,n=256;e<n;e++)this.rVals[e]=255*Math.pow(e/255,A),this.gVals[e]=255*Math.pow(e/255,s),this.bVals[e]=255*Math.pow(e/255,o);for(e=0,n=i.length;e<n;e+=4)i[e]=this.rVals[i[e]],i[e+1]=this.gVals[i[e+1]],i[e+2]=this.bVals[i[e+2]]},getUniformLocations:function(t,e){return{uGamma:t.getUniformLocation(e,"uGamma")}},sendUniformData:function(t,e){t.uniform3fv(e.uGamma,this.gamma)}}),e.Image.filters.Gamma.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var n=t.fabric||(t.fabric={}),e=n.Image.filters,i=n.util.createClass;e.Composed=i(e.BaseFilter,{type:"Composed",subFilters:[],initialize:function(t){this.callSuper("initialize",t),this.subFilters=this.subFilters.slice(0)},applyTo:function(e){e.passes+=this.subFilters.length-1,this.subFilters.forEach(function(t){t.applyTo(e)})},toObject:function(){return n.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(t){return t.toObject()})})}}),n.Image.filters.Composed.fromObject=function(t,e){var i=(t.subFilters||[]).map(function(t){return new n.Image.filters[t.type](t)}),r=new n.Image.filters.Composed({subFilters:i});return e&&e(r),r}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,r=e.util.createClass;i.HueRotation=r(i.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var t=this.rotation*Math.PI,e=Math.cos(t),i=Math.sin(t),r=Math.sqrt(1/3)*i,n=1-e;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=e+n/3,this.matrix[1]=1/3*n-r,this.matrix[2]=1/3*n+r,this.matrix[5]=1/3*n+r,this.matrix[6]=e+1/3*n,this.matrix[7]=1/3*n-r,this.matrix[10]=1/3*n-r,this.matrix[11]=1/3*n+r,this.matrix[12]=e+1/3*n},applyTo:function(t){this.calculateMatrix(),e.Image.filters.BaseFilter.prototype.applyTo.call(this,t)}}),e.Image.filters.HueRotation.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var u=t.fabric||(t.fabric={}),f=u.util.object.clone;u.Text?u.warn("fabric.Text is already defined"):(u.Text=u.util.createClass(u.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,textBackgroundColor:"",stateProperties:u.Object.prototype.stateProperties.concat("fontFamily","fontWeight","fontSize","text","underline","overline","linethrough","textAlign","fontStyle","lineHeight","textBackgroundColor","charSpacing","styles"),cacheProperties:u.Object.prototype.cacheProperties.concat("fontFamily","fontWeight","fontSize","text","underline","overline","linethrough","textAlign","fontStyle","lineHeight","textBackgroundColor","charSpacing","styles"),stroke:null,shadow:null,_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","textBackgroundColor"],__charBounds:[],initialize:function(t,e){this.styles=e&&e.styles||{},this.text=t,this.__skipDimension=!0,this.callSuper("initialize",e),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},getMeasuringContext:function(){return u._measuringContext||(u._measuringContext=this.canvas&&this.canvas.contextCache||u.util.createCanvasElement().getContext("2d")),u._measuringContext},_splitText:function(){var t=this._splitTextIntoLines(this.text);return this.textLines=t.lines,this._textLines=t.graphemeLines,this._unwrappedTextLines=t._unwrappedLines,this._text=t.graphemeText,t},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.width=this.calcTextWidth()||this.cursorWidth||2,-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var t,e,i,r,n,A,s,o=0,a=this._textLines.length;o<a;o++)if(("justify"===this.textAlign||o!==a-1&&!this.isEndOfWrapping(o))&&(r=0,n=this._textLines[o],(e=this.getLineWidth(o))<this.width&&(s=this.textLines[o].match(this._reSpacesAndTabs)))){i=s.length,t=(this.width-e)/i;for(var l=0,c=n.length;l<=c;l++)A=this.__charBounds[o][l],this._reSpaceAndTab.test(n[l])?(A.width+=t,A.kernedWidth+=t,A.left+=r,r+=t):A.left+=r}},isEndOfWrapping:function(t){return t===this._textLines.length-1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var t=this.callSuper("_getCacheCanvasDimensions"),e=this.fontSize;return t.width+=e*t.zoomX,t.height+=e*t.zoomY,t},_render:function(t){this._setTextStyles(t),this._renderTextLinesBackground(t),this._renderTextDecoration(t,"underline"),this._renderText(t),this._renderTextDecoration(t,"overline"),this._renderTextDecoration(t,"linethrough")},_renderText:function(t){"stroke"===this.paintFirst?(this._renderTextStroke(t),this._renderTextFill(t)):(this._renderTextFill(t),this._renderTextStroke(t))},_setTextStyles:function(t,e,i){t.textBaseline="alphabetic",t.font=this._getFontDeclaration(e,i)},calcTextWidth:function(){for(var t=this.getLineWidth(0),e=1,i=this._textLines.length;e<i;e++){var r=this.getLineWidth(e);t<r&&(t=r)}return t},_renderTextLine:function(t,e,i,r,n,A){this._renderChars(t,e,i,r,n,A)},_renderTextLinesBackground:function(t){if(this.textBackgroundColor||this.styleHas("textBackgroundColor")){for(var e,i,r,n,A,s,o=0,a=t.fillStyle,l=this._getLeftOffset(),c=this._getTopOffset(),h=0,u=0,f=0,d=this._textLines.length;f<d;f++)if(e=this.getHeightOfLine(f),this.textBackgroundColor||this.styleHas("textBackgroundColor",f)){r=this._textLines[f],i=this._getLineLeftOffset(f),h=u=0,n=this.getValueOfPropertyAt(f,0,"textBackgroundColor");for(var g=0,p=r.length;g<p;g++)A=this.__charBounds[f][g],(s=this.getValueOfPropertyAt(f,g,"textBackgroundColor"))!==n?((t.fillStyle=n)&&t.fillRect(l+i+h,c+o,u,e/this.lineHeight),h=A.left,u=A.width,n=s):u+=A.kernedWidth;s&&(t.fillStyle=s,t.fillRect(l+i+h,c+o,u,e/this.lineHeight)),o+=e}else o+=e;t.fillStyle=a,this._removeShadow(t)}},getFontCache:function(t){var e=t.fontFamily.toLowerCase();u.charWidthsCache[e]||(u.charWidthsCache[e]={});var i=u.charWidthsCache[e],r=t.fontStyle.toLowerCase()+"_"+(t.fontWeight+"").toLowerCase();return i[r]||(i[r]={}),i[r]},_applyCharStyles:function(t,e,i,r,n){this._setFillStyles(e,n),this._setStrokeStyles(e,n),e.font=this._getFontDeclaration(n)},_measureChar:function(t,e,i,r){var n,A,s,o,a=this.getFontCache(e),l=i+t,c=this._getFontDeclaration(e)===this._getFontDeclaration(r),h=e.fontSize/200;if(i&&a[i]&&(s=a[i]),a[t]&&(o=n=a[t]),c&&a[l]&&(o=(A=a[l])-s),!n||!s||!A){var u=this.getMeasuringContext();this._setTextStyles(u,e,!0)}if(n||(o=n=u.measureText(t).width,a[t]=n),!s&&c&&i&&(s=u.measureText(i).width,a[i]=s),c&&!A&&(A=u.measureText(l).width,n<(o=(a[l]=A)-s))){var f=o-n;a[t]=o,a[l]+=f,n=o}return{width:n*h,kernedWidth:o*h}},getHeightOfChar:function(t,e){return this.getValueOfPropertyAt(t,e,"fontSize")},measureLine:function(t){var e=this._measureLine(t);return 0!==this.charSpacing&&(e.width-=this._getWidthOfCharSpacing()),e.width<0&&(e.width=0),e},_measureLine:function(t){var e,i,r,n,A=0,s=this._textLines[t],o=new Array(s.length);for(this.__charBounds[t]=o,e=0;e<s.length;e++)i=s[e],n=this._getGraphemeBox(i,t,e,r),A+=(o[e]=n).kernedWidth,r=i;return o[e]={left:n?n.left+n.width:0,width:0,kernedWidth:0,height:this.fontSize},{width:A,numOfSpaces:0}},_getGraphemeBox:function(t,e,i,r,n){var A=this.getCompleteStyleDeclaration(e,i),s=r?this.getCompleteStyleDeclaration(e,i-1):{},o=this._measureChar(t,A,r,s),a=o.kernedWidth,l=o.width;0!==this.charSpacing&&(l+=this._getWidthOfCharSpacing(),a+=this._getWidthOfCharSpacing());var c={width:l,left:0,height:A.fontSize,kernedWidth:a};if(0<i&&!n){var h=this.__charBounds[e][i-1];c.left=h.left+h.width+o.kernedWidth-o.width}return c},getHeightOfLine:function(t){if(this.__lineHeights[t])return this.__lineHeights[t];for(var e=this._textLines[t],i=this.getHeightOfChar(t,0),r=1,n=e.length;r<n;r++){var A=this.getHeightOfChar(t,r);i<A&&(i=A)}return this.__lineHeights[t]=i*this.lineHeight*this._fontSizeMult,this.__lineHeights[t]},calcTextHeight:function(){for(var t,e=0,i=0,r=this._textLines.length;i<r;i++)t=this.getHeightOfLine(i),e+=i===r-1?t/this.lineHeight:t;return e},_getLeftOffset:function(){return-this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(t,e){t.save();for(var i=0,r=this._getLeftOffset(),n=this._getTopOffset(),A=this._applyPatternGradientTransform(t,"fillText"===e?this.fill:this.stroke),s=0,o=this._textLines.length;s<o;s++){var a=this.getHeightOfLine(s),l=a/this.lineHeight,c=this._getLineLeftOffset(s);this._renderTextLine(e,t,this._textLines[s],r+c-A.offsetX,n+i+l-A.offsetY,s),i+=a}t.restore()},_renderTextFill:function(t){(this.fill||this.styleHas("fill"))&&this._renderTextCommon(t,"fillText")},_renderTextStroke:function(t){(this.stroke&&0!==this.strokeWidth||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray),t.beginPath(),this._renderTextCommon(t,"strokeText"),t.closePath(),t.restore())},_renderChars:function(t,e,i,r,n,A){var s,o,a,l,c=this.getHeightOfLine(A),h=-1!==this.textAlign.indexOf("justify"),u="",f=0;e.save(),n-=c*this._fontSizeFraction/this.lineHeight;for(var d=0,g=i.length-1;d<=g;d++)l=d===g||this.charSpacing,u+=i[d],a=this.__charBounds[A][d],0===f?(r+=a.kernedWidth-a.width,f+=a.width):f+=a.kernedWidth,h&&!l&&this._reSpaceAndTab.test(i[d])&&(l=!0),l||(s=s||this.getCompleteStyleDeclaration(A,d),o=this.getCompleteStyleDeclaration(A,d+1),l=this._hasStyleChanged(s,o)),l&&(this._renderChar(t,e,A,d,u,r,n,c),u="",s=o,r+=f,f=0);e.restore()},_renderChar:function(t,e,i,r,n,A,s){var o=this._getStyleDeclaration(i,r),a=this.getCompleteStyleDeclaration(i,r),l="fillText"===t&&a.fill,c="strokeText"===t&&a.stroke&&a.strokeWidth;(c||l)&&(o&&e.save(),this._applyCharStyles(t,e,i,r,a),o&&o.textBackgroundColor&&this._removeShadow(e),l&&e.fillText(n,A,s),c&&e.strokeText(n,A,s),o&&e.restore())},_hasStyleChanged:function(t,e){return t.fill!==e.fill||t.stroke!==e.stroke||t.strokeWidth!==e.strokeWidth||t.fontSize!==e.fontSize||t.fontFamily!==e.fontFamily||t.fontWeight!==e.fontWeight||t.fontStyle!==e.fontStyle},_hasStyleChangedForSvg:function(t,e){return this._hasStyleChanged(t,e)||t.overline!==e.overline||t.underline!==e.underline||t.linethrough!==e.linethrough},_getLineLeftOffset:function(t){var e=this.getLineWidth(t);return"center"===this.textAlign?(this.width-e)/2:"right"===this.textAlign?this.width-e:"justify-center"===this.textAlign&&this.isEndOfWrapping(t)?(this.width-e)/2:"justify-right"===this.textAlign&&this.isEndOfWrapping(t)?this.width-e:0},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var t=this._forceClearCache;return t||(t=this.hasStateChanged("_dimensionAffectingProps")),t&&(this.dirty=!0,this._forceClearCache=!1),t},getLineWidth:function(t){return this.__lineWidths[t]?this.__lineWidths[t]:(""===this._textLines[t]?e=0:e=this.measureLine(t).width,this.__lineWidths[t]=e);var e},_getWidthOfCharSpacing:function(){return 0!==this.charSpacing?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(t,e,i){var r=this._getStyleDeclaration(t,e);return r&&void 0!==r[i]?r[i]:this[i]},_renderTextDecoration:function(t,e){if(this[e]||this.styleHas(e)){for(var i,r,n,A,s,o,a,l,c,h,u,f=this._getLeftOffset(),d=this._getTopOffset(),g=0,p=this._textLines.length;g<p;g++)if(i=this.getHeightOfLine(g),this[e]||this.styleHas(e,g)){n=this._textLines[g],c=i/this.lineHeight,r=this._getLineLeftOffset(g),o=s=0,A=this.getValueOfPropertyAt(g,0,e),u=this.getValueOfPropertyAt(g,0,"fill");for(var B=0,m=n.length;B<m;B++)a=this.__charBounds[g][B],l=this.getValueOfPropertyAt(g,B,e),h=this.getValueOfPropertyAt(g,B,"fill"),(l!==A||h!==u)&&0<o?(t.fillStyle=u,A&&u&&t.fillRect(f+r+s,d+c*(1-this._fontSizeFraction)+this.offsets[e]*this.fontSize,o,this.fontSize/15),s=a.left,o=a.width,A=l,u=h):o+=a.kernedWidth;t.fillStyle=h,l&&h&&t.fillRect(f+r+s,d+c*(1-this._fontSizeFraction)+this.offsets[e]*this.fontSize,o,this.fontSize/15),d+=i}else d+=i;this._removeShadow(t)}},_getFontDeclaration:function(t,e){var i=t||this;return[u.isLikelyNode?i.fontWeight:i.fontStyle,u.isLikelyNode?i.fontStyle:i.fontWeight,e?"200px":i.fontSize+"px",u.isLikelyNode?'"'+i.fontFamily+'"':i.fontFamily].join(" ")},render:function(t){this.visible&&(!this.canvas||!this.canvas.skipOffscreen||this.group||this.isOnScreen())&&(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",t))},_splitTextIntoLines:function(t){for(var e=t.split(this._reNewline),i=new Array(e.length),r=["\n"],n=[],A=0;A<e.length;A++)i[A]=u.util.string.graphemeSplit(e[A]),n=n.concat(i[A],r);return n.pop(),{_unwrappedLines:i,lines:e,graphemeText:n,graphemeLines:i}},toObject:function(t){var e=["text","fontSize","fontWeight","fontFamily","fontStyle","lineHeight","underline","overline","linethrough","textAlign","textBackgroundColor","charSpacing"].concat(t),i=this.callSuper("toObject",e);return i.styles=f(this.styles,!0),i},set:function(t,e){this.callSuper("set",t,e);var i=!1;if("object"==typeof t)for(var r in t)i=i||-1!==this._dimensionAffectingProps.indexOf(r);else i=-1!==this._dimensionAffectingProps.indexOf(t);return i&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),u.Text.ATTRIBUTE_NAMES=u.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size text-decoration text-anchor".split(" ")),u.Text.DEFAULT_SVG_FONT_SIZE=16,u.Text.fromElement=function(t,e,i){if(!t)return e(null);var r=u.parseAttributes(t,u.Text.ATTRIBUTE_NAMES),n=r.textAnchor||"left";if((i=u.util.object.extend(i?f(i):{},r)).top=i.top||0,i.left=i.left||0,r.textDecoration){var A=r.textDecoration;-1!==A.indexOf("underline")&&(i.underline=!0),-1!==A.indexOf("overline")&&(i.overline=!0),-1!==A.indexOf("line-through")&&(i.linethrough=!0),delete i.textDecoration}"dx"in r&&(i.left+=r.dx),"dy"in r&&(i.top+=r.dy),"fontSize"in i||(i.fontSize=u.Text.DEFAULT_SVG_FONT_SIZE);var s="";"textContent"in t?s=t.textContent:"firstChild"in t&&null!==t.firstChild&&"data"in t.firstChild&&null!==t.firstChild.data&&(s=t.firstChild.data),s=s.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var o=new u.Text(s,i),a=o.getScaledHeight()/o.height,l=((o.height+o.strokeWidth)*o.lineHeight-o.height)*a,c=o.getScaledHeight()+l,h=0;"center"===n&&(h=o.getScaledWidth()/2),"right"===n&&(h=o.getScaledWidth()),o.set({left:o.left-h,top:o.top-(c-o.fontSize*(.18+o._fontSizeFraction))/o.lineHeight}),e(o)},u.Text.fromObject=function(t,e){return u.Object._fromObject("Text",t,e,"text")},u.util.createAccessors&&u.util.createAccessors(u.Text))}("undefined"!=typeof exports?exports:this),fabric.util.object.extend(fabric.Text.prototype,{isEmptyStyles:function(t){if(!this.styles)return!0;if(void 0!==t&&!this.styles[t])return!0;var e=void 0===t?this.styles:{line:this.styles[t]};for(var i in e)for(var r in e[i])for(var n in e[i][r])return!1;return!0},styleHas:function(t,e){if(!this.styles||!t||""===t)return!1;if(void 0!==e&&!this.styles[e])return!1;var i=void 0===e?this.styles:{line:this.styles[e]};for(var r in i)for(var n in i[r])if(void 0!==i[r][n][t])return!0;return!1},cleanStyle:function(t){if(!this.styles||!t||""===t)return!1;var e,i,r=this.styles,n=0,A=!1,s=!0,o=0;for(var a in r){for(var l in e=0,r[a])n++,A?r[a][l][t]!==i&&(s=!1):(i=r[a][l][t],A=!0),r[a][l][t]===this[t]&&delete r[a][l][t],0!==Object.keys(r[a][l]).length?e++:delete r[a][l];0===e&&delete r[a]}for(var c=0;c<this._textLines.length;c++)o+=this._textLines[c].length;s&&n===o&&(this[t]=i,this.removeStyle(t))},removeStyle:function(t){if(this.styles&&t&&""!==t){var e,i,r,n=this.styles;for(i in n){for(r in e=n[i])delete e[r][t],0===Object.keys(e[r]).length&&delete e[r];0===Object.keys(e).length&&delete n[i]}}},_extendStyles:function(t,e){var i=this.get2DCursorLocation(t);this._getLineStyle(i.lineIndex)||this._setLineStyle(i.lineIndex,{}),this._getStyleDeclaration(i.lineIndex,i.charIndex)||this._setStyleDeclaration(i.lineIndex,i.charIndex,{}),fabric.util.object.extend(this._getStyleDeclaration(i.lineIndex,i.charIndex),e)},get2DCursorLocation:function(t,e){void 0===t&&(t=this.selectionStart);for(var i=e?this._unwrappedTextLines:this._textLines,r=i.length,n=0;n<r;n++){if(t<=i[n].length)return{lineIndex:n,charIndex:t};t-=i[n].length+1}return{lineIndex:n-1,charIndex:i[n-1].length<t?i[n-1].length:t}},getSelectionStyles:function(t,e,i){void 0===t&&(t=this.selectionStart||0),void 0===e&&(e=this.selectionEnd||t);for(var r=[],n=t;n<e;n++)r.push(this.getStyleAtPosition(n,i));return r},getStyleAtPosition:function(t,e){var i=this.get2DCursorLocation(t);return(e?this.getCompleteStyleDeclaration(i.lineIndex,i.charIndex):this._getStyleDeclaration(i.lineIndex,i.charIndex))||{}},setSelectionStyles:function(t,e,i){void 0===e&&(e=this.selectionStart||0),void 0===i&&(i=this.selectionEnd||e);for(var r=e;r<i;r++)this._extendStyles(r,t);return this._forceClearCache=!0,this},_getStyleDeclaration:function(t,e){var i=this.styles&&this.styles[t];return i?i[e]:null},getCompleteStyleDeclaration:function(t,e){for(var i,r=this._getStyleDeclaration(t,e)||{},n={},A=0;A<this._styleProperties.length;A++)n[i=this._styleProperties[A]]=void 0===r[i]?this[i]:r[i];return n},_setStyleDeclaration:function(t,e,i){this.styles[t][e]=i},_deleteStyleDeclaration:function(t,e){delete this.styles[t][e]},_getLineStyle:function(t){return this.styles[t]},_setLineStyle:function(t,e){this.styles[t]=e},_deleteLineStyle:function(t){delete this.styles[t]}}),function(){function n(t){t.textDecoration&&(-1<t.textDecoration.indexOf("underline")&&(t.underline=!0),-1<t.textDecoration.indexOf("line-through")&&(t.linethrough=!0),-1<t.textDecoration.indexOf("overline")&&(t.overline=!0),delete t.textDecoration)}fabric.IText=fabric.util.createClass(fabric.Text,fabric.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"#333",cursorDelay:1e3,cursorDuration:600,caching:!0,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(t,e){this.callSuper("initialize",t,e),this.initBehavior()},setSelectionStart:function(t){t=Math.max(t,0),this._updateAndFire("selectionStart",t)},setSelectionEnd:function(t){t=Math.min(t,this.text.length),this._updateAndFire("selectionEnd",t)},_updateAndFire:function(t,e){this[t]!==e&&(this._fireSelectionChanged(),this[t]=e),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(t){this.clearContextTop(),this.callSuper("render",t),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(t){this.callSuper("_render",t)},clearContextTop:function(t){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var e=this.canvas.contextTop,i=this.canvas.viewportTransform;e.save(),e.transform(i[0],i[1],i[2],i[3],i[4],i[5]),this.transform(e),this.transformMatrix&&e.transform.apply(e,this.transformMatrix),this._clearTextArea(e),t||e.restore()}},renderCursorOrSelection:function(){if(this.isEditing&&this.canvas){var t,e=this._getCursorBoundaries();this.canvas&&this.canvas.contextTop?(t=this.canvas.contextTop,this.clearContextTop(!0)):(t=this.canvas.contextContainer).save(),this.selectionStart===this.selectionEnd?this.renderCursor(e,t):this.renderSelection(e,t),t.restore()}},_clearTextArea:function(t){var e=this.width+4,i=this.height+4;t.clearRect(-e/2,-i/2,e,i)},_getCursorBoundaries:function(t){void 0===t&&(t=this.selectionStart);var e=this._getLeftOffset(),i=this._getTopOffset(),r=this._getCursorBoundariesOffsets(t);return{left:e,top:i,leftOffset:r.left,topOffset:r.top}},_getCursorBoundariesOffsets:function(t){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;for(var e,i,r=0,n=0,A=this.get2DCursorLocation(t),s=0;s<A.lineIndex;s++)r+=this.getHeightOfLine(s);e=this._getLineLeftOffset(A.lineIndex);var o=this.__charBounds[A.lineIndex][A.charIndex];return o&&(n=o.left),0!==this.charSpacing&&0===this._textLines[0].length&&(n-=this._getWidthOfCharSpacing()),i={top:r,left:e+(0<n?n:0)},this.cursorOffsetCache=i,this.cursorOffsetCache},renderCursor:function(t,e){var i=this.get2DCursorLocation(),r=i.lineIndex,n=0<i.charIndex?i.charIndex-1:0,A=this.getValueOfPropertyAt(r,n,"fontSize"),s=this.scaleX*this.canvas.getZoom(),o=this.cursorWidth/s,a=t.topOffset;a+=(1-this._fontSizeFraction)*this.getHeightOfLine(r)/this.lineHeight-A*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(t,e),e.fillStyle=this.getValueOfPropertyAt(r,n,"fill"),e.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,e.fillRect(t.left+t.leftOffset-o/2,a+t.top,o,A)},renderSelection:function(t,e){for(var i=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,r=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,n=-1!==this.textAlign.indexOf("justify"),A=this.get2DCursorLocation(i),s=this.get2DCursorLocation(r),o=A.lineIndex,a=s.lineIndex,l=A.charIndex<0?0:A.charIndex,c=s.charIndex<0?0:s.charIndex,h=o;h<=a;h++){var u,f=this._getLineLeftOffset(h)||0,d=this.getHeightOfLine(h),g=0,p=0;h===o&&(g=this.__charBounds[o][l].left),o<=h&&h<a?p=n&&!this.isEndOfWrapping(h)?this.width:this.getLineWidth(h)||5:h===a&&(p=0===c?this.__charBounds[a][c].left:this.__charBounds[a][c-1].left+this.__charBounds[a][c-1].width),u=d,(this.lineHeight<1||h===a&&1<this.lineHeight)&&(d/=this.lineHeight),this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",e.fillRect(t.left+f+g,t.top+t.topOffset+d,p-g,1)):(e.fillStyle=this.selectionColor,e.fillRect(t.left+f+g,t.top+t.topOffset,p-g,d)),t.topOffset+=u}},getCurrentCharFontSize:function(){var t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,"fontSize")},getCurrentCharColor:function(){var t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,"fill")},_getCurrentCharIndex:function(){var t=this.get2DCursorLocation(this.selectionStart,!0),e=0<t.charIndex?t.charIndex-1:0;return{l:t.lineIndex,c:e}}}),fabric.IText.fromObject=function(t,e){if(n(t),t.styles)for(var i in t.styles)for(var r in t.styles[i])n(t.styles[i][r]);fabric.Object._fromObject("IText",t,e,"text")}}(),function(){var l=fabric.util.object.clone;fabric.util.object.extend(fabric.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(t){this.isEditing&&this.exitEditing(),this.selected=!1,fabric.Object.prototype.onDeselect.call(this,t)},initAddedHandler:function(){var e=this;this.on("added",function(){var t=e.canvas;t&&(t._hasITextHandlers||(t._hasITextHandlers=!0,e._initCanvasHandlers(t)),t._iTextInstances=t._iTextInstances||[],t._iTextInstances.push(e))})},initRemovedHandler:function(){var e=this;this.on("removed",function(){var t=e.canvas;t&&(t._iTextInstances=t._iTextInstances||[],fabric.util.removeFromArray(t._iTextInstances,e),0===t._iTextInstances.length&&(t._hasITextHandlers=!1,e._removeCanvasHandlers(t)))})},_initCanvasHandlers:function(t){t._mouseUpITextHandler=function(){t._iTextInstances&&t._iTextInstances.forEach(function(t){t.__isMousedown=!1})}.bind(this),t.on("mouse:up",t._mouseUpITextHandler)},_removeCanvasHandlers:function(t){t.off("mouse:up",t._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(t,e,i,r){var n;return n={isAborted:!1,abort:function(){this.isAborted=!0}},t.animate("_currentCursorOpacity",e,{duration:i,onComplete:function(){n.isAborted||t[r]()},onChange:function(){t.canvas&&t.selectionStart===t.selectionEnd&&t.renderCursorOrSelection()},abort:function(){return n.isAborted}}),n},_onTickComplete:function(){var t=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){t._currentTickCompleteState=t._animateCursor(t,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(t){var e=this,i=t?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){e._tick()},i)},abortCursorAnimation:function(){var t=this._currentTickState||this._currentTickCompleteState,e=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,t&&e&&e.clearContext(e.contextTop||e.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(t){var e=0,i=t-1;if(this._reSpace.test(this._text[i]))for(;this._reSpace.test(this._text[i]);)e++,i--;for(;/\S/.test(this._text[i])&&-1<i;)e++,i--;return t-e},findWordBoundaryRight:function(t){var e=0,i=t;if(this._reSpace.test(this._text[i]))for(;this._reSpace.test(this._text[i]);)e++,i++;for(;/\S/.test(this._text[i])&&i<this.text.length;)e++,i++;return t+e},findLineBoundaryLeft:function(t){for(var e=0,i=t-1;!/\n/.test(this._text[i])&&-1<i;)e++,i--;return t-e},findLineBoundaryRight:function(t){for(var e=0,i=t;!/\n/.test(this._text[i])&&i<this.text.length;)e++,i++;return t+e},searchWordBoundary:function(t,e){for(var i=this._reSpace.test(this.text.charAt(t))?t-1:t,r=this.text.charAt(i),n=/[ \n\.,;!\?\-]/;!n.test(r)&&0<i&&i<this.text.length;)i+=e,r=this.text.charAt(i);return n.test(r)&&"\n"!==r&&(i+=1===e?0:1),i},selectWord:function(t){t=t||this.selectionStart;var e=this.searchWordBoundary(t,-1),i=this.searchWordBoundary(t,1);this.selectionStart=e,this.selectionEnd=i,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(t){t=t||this.selectionStart;var e=this.findLineBoundaryLeft(t),i=this.findLineBoundaryRight(t);return this.selectionStart=e,this.selectionEnd=i,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(t){return!this.isEditing&&this.editable?(this.canvas&&this.exitEditingOnOthers(this.canvas),this.isEditing=!0,this.initHiddenTextarea(t),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll()),this):void 0},exitEditingOnOthers:function(t){t._iTextInstances&&t._iTextInstances.forEach(function(t){t.selected=!1,t.isEditing&&t.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(t){if(this.__isMousedown&&this.isEditing){var e=this.getSelectionStartFromPointer(t.e),i=this.selectionStart,r=this.selectionEnd;(e===this.__selectionStartOnMouseDown&&i!==r||i!==e&&r!==e)&&(e>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=e):(this.selectionStart=e,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==i||this.selectionEnd!==r)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(t,e,i){var r=i.slice(0,t),n=fabric.util.string.graphemeSplit(r).length;if(t===e)return{selectionStart:n,selectionEnd:n};var A=i.slice(t,e);return{selectionStart:n,selectionEnd:n+fabric.util.string.graphemeSplit(A).length}},fromGraphemeToStringSelection:function(t,e,i){var r=i.slice(0,t).join("").length;return t===e?{selectionStart:r,selectionEnd:r}:{selectionStart:r,selectionEnd:r+i.slice(t,e).join("").length}},_updateTextarea:function(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){var t=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=t.selectionStart,this.hiddenTextarea.selectionEnd=t.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var t=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var t=this._calcTextareaPosition();this.hiddenTextarea.style.left=t.left,this.hiddenTextarea.style.top=t.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var t=this.inCompositionMode?this.compositionStart:this.selectionStart,e=this._getCursorBoundaries(t),i=this.get2DCursorLocation(t),r=i.lineIndex,n=i.charIndex,A=this.getValueOfPropertyAt(r,n,"fontSize")*this.lineHeight,s=e.leftOffset,o=this.calcTransformMatrix(),a={x:e.left+s,y:e.top+e.topOffset+A},l=this.canvas.upperCanvasEl,c=l.width-A,h=l.height-A;return a=fabric.util.transformPoint(a,o),(a=fabric.util.transformPoint(a,this.canvas.viewportTransform)).x<0&&(a.x=0),a.x>c&&(a.x=c),a.y<0&&(a.y=0),a.y>h&&(a.y=h),a.x+=this.canvas._offset.left,a.y+=this.canvas._offset.top,{left:a.x+"px",top:a.y+"px",fontSize:A+"px",charHeight:A}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var t=this._textBeforeEdit!==this.text;return this.selected=!1,this.isEditing=!1,this.selectable=!0,this.selectionEnd=this.selectionStart,this.hiddenTextarea&&(this.hiddenTextarea.blur&&this.hiddenTextarea.blur(),this.canvas&&this.hiddenTextarea.parentNode.removeChild(this.hiddenTextarea),this.hiddenTextarea=null),this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),t&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),t&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var t in this.styles)this._textLines[t]||delete this.styles[t]},removeStyleFromTo:function(t,e){var i,r,n=this.get2DCursorLocation(t,!0),A=this.get2DCursorLocation(e,!0),s=n.lineIndex,o=n.charIndex,a=A.lineIndex,l=A.charIndex;if(s!==a){if(this.styles[s])for(i=o;i<this._textLines[s].length;i++)delete this.styles[s][i];if(this.styles[a])for(i=l;i<this._textLines[a].length;i++)(r=this.styles[a][i])&&(this.styles[s]||(this.styles[s]={}),this.styles[s][o+i-l]=r);for(i=s+1;i<=a;i++)delete this.styles[i];this.shiftLineStyles(a,s-a)}else if(this.styles[s]){r=this.styles[s];var c,h,u=l-o;for(i=o;i<l;i++)delete r[i];for(h in this.styles[s])l<=(c=parseInt(h,10))&&(r[c-u]=r[h],delete r[h])}},shiftLineStyles:function(t,e){var i=l(this.styles);for(var r in this.styles){var n=parseInt(r,10);t<n&&(this.styles[n+e]=i[n],i[n-e]||delete this.styles[n])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(t,e,i,r){var n,A={},s=!1;for(var o in i||(i=1),this.shiftLineStyles(t,i),this.styles[t]&&(n=this.styles[t][0===e?e:e-1]),this.styles[t]){var a=parseInt(o,10);e<=a&&(s=!0,A[a-e]=this.styles[t][o],delete this.styles[t][o])}for(s?this.styles[t+i]=A:delete this.styles[t+i];1<i;)i--,r&&r[i]?this.styles[t+i]={0:l(r[i])}:n?this.styles[t+i]={0:l(n)}:delete this.styles[t+i];this._forceClearCache=!0},insertCharStyleObject:function(t,e,i,r){this.styles||(this.styles={});var n=this.styles[t],A=n?l(n):{};for(var s in i||(i=1),A){var o=parseInt(s,10);e<=o&&(n[o+i]=A[o],A[o-i]||delete n[o])}if(this._forceClearCache=!0,r)for(;i--;)Object.keys(r[i]).length&&(this.styles[t]||(this.styles[t]={}),this.styles[t][e+i]=l(r[i]));else if(n)for(var a=n[e?e-1:1];a&&i--;)this.styles[t][e+i]=l(a)},insertNewStyleBlock:function(t,e,i){for(var r=this.get2DCursorLocation(e,!0),n=[0],A=0,s=0;s<t.length;s++)"\n"===t[s]?n[++A]=0:n[A]++;0<n[0]&&(this.insertCharStyleObject(r.lineIndex,r.charIndex,n[0],i),i=i&&i.slice(n[0]+1)),A&&this.insertNewlineStyleObject(r.lineIndex,r.charIndex+n[0],A);for(s=1;s<A;s++)this.insertCharStyleObject(r.lineIndex+s,0,n[s],i),i=i&&i.slice(n[s]+1);0<n[s]&&this.insertCharStyleObject(r.lineIndex+s,0,n[s],i)},setSelectionStartEndWithShift:function(t,e,i){i<=t?(e===t?this._selectionDirection="left":"right"===this._selectionDirection&&(this._selectionDirection="left",this.selectionEnd=t),this.selectionStart=i):t<i&&i<e?"right"===this._selectionDirection?this.selectionEnd=i:this.selectionStart=i:(e===t?this._selectionDirection="right":"left"===this._selectionDirection&&(this._selectionDirection="right",this.selectionStart=e),this.selectionEnd=i)},setSelectionInBoundaries:function(){var t=this.text.length;this.selectionStart>t?this.selectionStart=t:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>t?this.selectionEnd=t:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),fabric.util.object.extend(fabric.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown.bind(this))},onMouseDown:function(t){this.__newClickTime=+new Date;var e=this.canvas.getPointer(t.e);this.isTripleClick(e,t.e)&&(this.fire("tripleclick",t),this._stopEvent(t.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=e,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected},isTripleClick:function(t){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===t.x&&this.__lastPointer.y===t.y},_stopEvent:function(t){t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},initClicks:function(){this.on("mousedblclick",function(t){this.selectWord(this.getSelectionStartFromPointer(t.e))}),this.on("tripleclick",function(t){this.selectLine(this.getSelectionStartFromPointer(t.e))})},initMousedownHandler:function(){this.on("mousedown",function(t){if(this.editable&&(!t.e.button||1===t.e.button)){var e=this.canvas.getPointer(t.e);this.__mousedownX=e.x,this.__mousedownY=e.y,this.__isMousedown=!0,this.selected&&this.setCursorByClick(t.e),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection())}})},_isObjectMoved:function(t){var e=this.canvas.getPointer(t);return this.__mousedownX!==e.x||this.__mousedownY!==e.y},initMouseupHandler:function(){this.on("mouseup",function(t){this.__isMousedown=!1,!this.editable||this._isObjectMoved(t.e)||t.e.button&&1!==t.e.button||(this.__lastSelected&&!this.__corner&&(this.enterEditing(t.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()),this.selected=!0)})},setCursorByClick:function(t){var e=this.getSelectionStartFromPointer(t),i=this.selectionStart,r=this.selectionEnd;t.shiftKey?this.setSelectionStartEndWithShift(i,r,e):(this.selectionStart=e,this.selectionEnd=e),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(t){for(var e=this.getLocalPointer(t),i=0,r=0,n=0,A=0,s=0,o=0,a=this._textLines.length;o<a&&n<=e.y;o++)n+=this.getHeightOfLine(o)*this.scaleY,0<(s=o)&&(A+=this._textLines[o-1].length+1);r=this._getLineLeftOffset(s)*this.scaleX;for(var l=0,c=this._textLines[s].length;l<c&&(i=r,(r+=this.__charBounds[s][l].kernedWidth*this.scaleX)<=e.x);l++)A++;return this._getNewSelectionStartFromOffset(e,i,r,A,c)},_getNewSelectionStartFromOffset:function(t,e,i,r,n){var A=t.x-e,s=i-t.x,o=r+(A<s||s<0?0:1);return this.flipX&&(o=n-o),o>this._text.length&&(o=this._text.length),o}}),fabric.util.object.extend(fabric.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=fabric.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var t=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+t.top+"; left: "+t.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; line-height: 1px; paddingtop: "+t.fontSize+";",fabric.document.body.appendChild(this.hiddenTextarea),fabric.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),fabric.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),fabric.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),fabric.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),fabric.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),fabric.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),fabric.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),fabric.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),fabric.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(fabric.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(t){if(this.isEditing&&!this.inCompositionMode){if(t.keyCode in this.keysMap)this[this.keysMap[t.keyCode]](t);else{if(!(t.keyCode in this.ctrlKeysMapDown&&(t.ctrlKey||t.metaKey)))return;this[this.ctrlKeysMapDown[t.keyCode]](t)}t.stopImmediatePropagation(),t.preventDefault(),33<=t.keyCode&&t.keyCode<=40?(this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(t){return!this.isEditing||this._copyDone||this.inCompositionMode?void(this._copyDone=!1):void(t.keyCode in this.ctrlKeysMapUp&&(t.ctrlKey||t.metaKey)&&(this[this.ctrlKeysMapUp[t.keyCode]](t),t.stopImmediatePropagation(),t.preventDefault(),this.canvas&&this.canvas.requestRenderAll()))},onInput:function(t){var e=this.fromPaste;if(this.fromPaste=!1,t&&t.stopPropagation(),this.isEditing){var i,r,n=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,A=this._text.length,s=n.length,o=s-A;if(""===this.hiddenTextarea.value)return this.styles={},this.updateFromTextArea(),this.fire("changed"),void(this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll()));var a=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),l=this.selectionStart>a.selectionStart;this.selectionStart!==this.selectionEnd?(i=this._text.slice(this.selectionStart,this.selectionEnd),o+=this.selectionEnd-this.selectionStart):s<A&&(i=l?this._text.slice(this.selectionEnd+o,this.selectionEnd):this._text.slice(this.selectionStart,this.selectionStart-o)),r=n.slice(a.selectionEnd-o,a.selectionEnd),i&&i.length&&(this.selectionStart!==this.selectionEnd?this.removeStyleFromTo(this.selectionStart,this.selectionEnd):l?this.removeStyleFromTo(this.selectionEnd-i.length,this.selectionEnd):this.removeStyleFromTo(this.selectionEnd,this.selectionEnd+i.length)),r.length&&(e&&r.join("")===fabric.copiedText?this.insertNewStyleBlock(r,this.selectionStart,fabric.copiedTextStyle):this.insertNewStyleBlock(r,this.selectionStart)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(t){this.compositionStart=t.target.selectionStart,this.compositionEnd=t.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(fabric.copiedText=this.getSelectedText(),fabric.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(t){return t&&t.clipboardData||fabric.window.clipboardData},_getWidthBeforeCursor:function(t,e){var i,r=this._getLineLeftOffset(t);return 0<e&&(r+=(i=this.__charBounds[t][e-1]).left+i.width),r},getDownCursorOffset:function(t,e){var i=this._getSelectionForOffset(t,e),r=this.get2DCursorLocation(i),n=r.lineIndex;if(n===this._textLines.length-1||t.metaKey||34===t.keyCode)return this._text.length-i;var A=r.charIndex,s=this._getWidthBeforeCursor(n,A),o=this._getIndexOnLine(n+1,s);return this._textLines[n].slice(A).length+o+2},_getSelectionForOffset:function(t,e){return t.shiftKey&&this.selectionStart!==this.selectionEnd&&e?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(t,e){var i=this._getSelectionForOffset(t,e),r=this.get2DCursorLocation(i),n=r.lineIndex;if(0===n||t.metaKey||33===t.keyCode)return-i;var A=r.charIndex,s=this._getWidthBeforeCursor(n,A),o=this._getIndexOnLine(n-1,s),a=this._textLines[n].slice(0,A);return-this._textLines[n-1].length+o-a.length},_getIndexOnLine:function(t,e){for(var i,r,n=this._textLines[t],A=this._getLineLeftOffset(t),s=0,o=0,a=n.length;o<a;o++)if(e<(A+=i=this.__charBounds[t][o].width)){r=!0;var l=A-i,c=A,h=Math.abs(l-e);s=Math.abs(c-e)<h?o:o-1;break}return r||(s=n.length-1),s},moveCursorDown:function(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",t)},moveCursorUp:function(t){(0!==this.selectionStart||0!==this.selectionEnd)&&this._moveCursorUpOrDown("Up",t)},_moveCursorUpOrDown:function(t,e){var i=this["get"+t+"CursorOffset"](e,"right"===this._selectionDirection);e.shiftKey?this.moveCursorWithShift(i):this.moveCursorWithoutShift(i),0!==i&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(t){var e="left"===this._selectionDirection?this.selectionStart+t:this.selectionEnd+t;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,e),0!==t},moveCursorWithoutShift:function(t){return t<0?(this.selectionStart+=t,this.selectionEnd=this.selectionStart):(this.selectionEnd+=t,this.selectionStart=this.selectionEnd),0!==t},moveCursorLeft:function(t){(0!==this.selectionStart||0!==this.selectionEnd)&&this._moveCursorLeftOrRight("Left",t)},_move:function(t,e,i){var r;if(t.altKey)r=this["findWordBoundary"+i](this[e]);else{if(!t.metaKey&&35!==t.keyCode&&36!==t.keyCode)return this[e]+="Left"===i?-1:1,!0;r=this["findLineBoundary"+i](this[e])}return void 0!==typeof r&&this[e]!==r?(this[e]=r,!0):void 0},_moveLeft:function(t,e){return this._move(t,e,"Left")},_moveRight:function(t,e){return this._move(t,e,"Right")},moveCursorLeftWithoutShift:function(t){var e=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&0!==this.selectionStart&&(e=this._moveLeft(t,"selectionStart")),this.selectionEnd=this.selectionStart,e},moveCursorLeftWithShift:function(t){return"right"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveLeft(t,"selectionEnd"):0!==this.selectionStart?(this._selectionDirection="left",this._moveLeft(t,"selectionStart")):void 0},moveCursorRight:function(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",t)},_moveCursorLeftOrRight:function(t,e){var i="moveCursor"+t+"With";this._currentCursorOpacity=1,this[i+=e.shiftKey?"Shift":"outShift"](e)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(t){return"left"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveRight(t,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection="right",this._moveRight(t,"selectionEnd")):void 0},moveCursorRightWithoutShift:function(t){var e=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(e=this._moveRight(t,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,e},removeChars:function(t,e){void 0===e&&(e=t+1),this.removeStyleFromTo(t,e),this._text.splice(t,e-t),this.text=this._text.join(""),this.set("dirty",!0),this._removeExtraneousStyles(),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords())}}),function(){var s=fabric.util.toFixed,o=fabric.Object.NUM_FRACTION_DIGITS;fabric.util.object.extend(fabric.Text.prototype,{toSVG:function(t){var e=this._createBaseSVGMarkup(),i=this._getSVGLeftTopOffsets(),r=this._getSVGTextAndBg(i.textTop,i.textLeft);return this._wrapSVGTextAndBg(e,r),t?t(e.join("")):e.join("")},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(t,e){var i=this.getSvgFilter(),r=""===i?"":' style="'+i+'"',n=this.getSvgTextDecoration(this);t.push("\t<g ",this.getSvgId(),'transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"',r,">\n",e.textBgRects.join(""),'\t\t<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",n?'text-decoration="'+n+'" ':"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >\n",e.textSpans.join(""),"\t\t</text>\n","\t</g>\n")},_getSVGTextAndBg:function(t,e){var i,r=[],n=[],A=t;this._setSVGBg(n);for(var s=0,o=this._textLines.length;s<o;s++)i=this._getLineLeftOffset(s),(this.textBackgroundColor||this.styleHas("textBackgroundColor",s))&&this._setSVGTextLineBg(n,s,e+i,A),this._setSVGTextLineText(r,s,e+i,A),A+=this.getHeightOfLine(s);return{textSpans:r,textBgRects:n}},_createTextCharSpan:function(t,e,i,r){var n=this.getSvgSpanStyles(e,t!==t.trim()),A=n?'style="'+n+'"':"";return['\t\t\t<tspan x="',s(i,o),'" y="',s(r,o),'" ',A,">",fabric.util.string.escapeXml(t),"</tspan>\n"].join("")},_setSVGTextLineText:function(t,e,i,r){var n,A,s,o,a,l=this.getHeightOfLine(e),c=-1!==this.textAlign.indexOf("justify"),h="",u=0,f=this._textLines[e];r+=l*(1-this._fontSizeFraction)/this.lineHeight;for(var d=0,g=f.length-1;d<=g;d++)a=d===g||this.charSpacing,h+=f[d],s=this.__charBounds[e][d],0===u?(i+=s.kernedWidth-s.width,u+=s.width):u+=s.kernedWidth,c&&!a&&this._reSpaceAndTab.test(f[d])&&(a=!0),a||(n=n||this.getCompleteStyleDeclaration(e,d),A=this.getCompleteStyleDeclaration(e,d+1),a=this._hasStyleChangedForSvg(n,A)),a&&(o=this._getStyleDeclaration(e,d)||{},t.push(this._createTextCharSpan(h,o,i,r)),h="",n=A,i+=u,u=0)},_pushTextBgRect:function(t,e,i,r,n,A){t.push("\t\t<rect ",this._getFillAttributes(e),' x="',s(i,o),'" y="',s(r,o),'" width="',s(n,o),'" height="',s(A,o),'"></rect>\n')},_setSVGTextLineBg:function(t,e,i,r){for(var n,A,s=this._textLines[e],o=this.getHeightOfLine(e)/this.lineHeight,a=0,l=0,c=this.getValueOfPropertyAt(e,0,"textBackgroundColor"),h=0,u=s.length;h<u;h++)n=this.__charBounds[e][h],(A=this.getValueOfPropertyAt(e,h,"textBackgroundColor"))!==c?(c&&this._pushTextBgRect(t,c,i+l,r,a,o),l=n.left,a=n.width,c=A):a+=n.kernedWidth;A&&this._pushTextBgRect(t,A,i+l,r,a,o)},_getFillAttributes:function(t){var e=t&&"string"==typeof t?new fabric.Color(t):"";return e&&e.getSource()&&1!==e.getAlpha()?'opacity="'+e.getAlpha()+'" fill="'+e.setAlpha(1).toRgb()+'"':'fill="'+t+'"'},_getSVGLineTopOffset:function(t){for(var e,i=0,r=0;r<t;r++)i+=this.getHeightOfLine(r);return e=this.getHeightOfLine(r),{lineTop:i,offset:(this._fontSizeMult-this._fontSizeFraction)*e/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(t){return fabric.Object.prototype.getSvgStyles.call(this,t)+" white-space: pre;"}})}(),function(t){"use strict";var g=t.fabric||(t.fabric={});g.Textbox=g.util.createClass(g.IText,g.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:g.Text.prototype._dimensionAffectingProps.concat("width"),initialize:function(t,e){this.callSuper("initialize",t,e)},initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(t){for(var e=0,i=0,r=0,n={},A=0;A<t.graphemeLines.length;A++)"\n"===t.graphemeText[r]&&0<A?(i=0,r++,e++):this._reSpaceAndTab.test(t.graphemeText[r])&&0<A&&(i++,r++),n[A]={line:e,offset:i},r+=t.graphemeLines[A].length,i+=t.graphemeLines[A].length;return n},styleHas:function(t,e){if(this._styleMap&&!this.isWrapping){var i=this._styleMap[e];i&&(e=i.line)}return g.Text.prototype.styleHas.call(this,t,e)},_getStyleDeclaration:function(t,e){if(this._styleMap&&!this.isWrapping){var i=this._styleMap[t];if(!i)return null;t=i.line,e=i.offset+e}return this.callSuper("_getStyleDeclaration",t,e)},_setStyleDeclaration:function(t,e,i){var r=this._styleMap[t];t=r.line,e=r.offset+e,this.styles[t][e]=i},_deleteStyleDeclaration:function(t,e){var i=this._styleMap[t];t=i.line,e=i.offset+e,delete this.styles[t][e]},_getLineStyle:function(t){var e=this._styleMap[t];return this.styles[e.line]},_setLineStyle:function(t,e){var i=this._styleMap[t];this.styles[i.line]=e},_deleteLineStyle:function(t){var e=this._styleMap[t];delete this.styles[e.line]},_wrapText:function(t,e){var i,r=[];for(this.isWrapping=!0,i=0;i<t.length;i++)r=r.concat(this._wrapLine(t[i],i,e));return this.isWrapping=!1,r},_measureWord:function(t,e,i){var r,n=0;i=i||0;for(var A=0,s=t.length;A<s;A++){n+=this._getGraphemeBox(t[A],e,A+i,r,!0).kernedWidth,r=t[A]}return n},_wrapLine:function(t,e,i){for(var r=0,n=[],A=[],s=t.split(this._reSpaceAndTab),o="",a=0,l=0,c=0,h=0,u=!0,f=this._getWidthOfCharSpacing(),d=0;d<s.length;d++)o=g.util.string.graphemeSplit(s[d]),l=this._measureWord(o,e,a),a+=o.length,i<=(r+=c+l-f)&&!u&&(n.push(A),A=[],r=l,u=!0),u||A.push(" "),A=A.concat(o),c=this._measureWord([" "],e,a),a++,u=!1,h<l&&(h=l);return d&&n.push(A),h>this.dynamicMinWidth&&(this.dynamicMinWidth=h-f),n},isEndOfWrapping:function(t){return!this._styleMap[t+1]||this._styleMap[t+1].line!==this._styleMap[t].line},_splitTextIntoLines:function(t){for(var e=g.Text.prototype._splitTextIntoLines.call(this,t),i=this._wrapText(e.lines,this.width),r=new Array(i.length),n=0;n<i.length;n++)r[n]=i[n].join("");return e.lines=r,e.graphemeLines=i,e},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},toObject:function(t){return this.callSuper("toObject",["minWidth"].concat(t))}}),g.Textbox.fromObject=function(t,e){return g.Object._fromObject("Textbox",t,e,"text")}}("undefined"!=typeof exports?exports:this),function(){var c=fabric.Canvas.prototype._setObjectScale;fabric.Canvas.prototype._setObjectScale=function(t,e,i,r,n,A,s){var o=e.target;if(!("x"===n&&o instanceof fabric.Textbox))return c.call(fabric.Canvas.prototype,t,e,i,r,n,A,s);var a=o._getTransformedDimensions().x,l=o.width*(t.x/a);return l>=o.getMinWidth()?(o.set("width",l),!0):void 0},fabric.util.object.extend(fabric.Textbox.prototype,{_removeExtraneousStyles:function(){for(var t in this._styleMap)this._textLines[t]||delete this.styles[this._styleMap[t].line]}})}(),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.html2canvas=e():t.html2canvas=e()}(this,function(){return function(i){function r(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}var n={};return r.m=i,r.c=n,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=27)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],r=!0,n=!1,A=void 0;try{for(var s,o=t[Symbol.iterator]();!(r=(s=o.next()).done)&&(i.push(s.value),!e||i.length!==e);r=!0);}catch(t){n=!0,A=t}finally{try{!r&&o.return&&o.return()}finally{if(n)throw A}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function r(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}}(),n=/^#([a-f0-9]{3})$/i,l=function(t){var e=t.match(n);return!!e&&[parseInt(e[1][0]+e[1][0],16),parseInt(e[1][1]+e[1][1],16),parseInt(e[1][2]+e[1][2],16),null]},A=/^#([a-f0-9]{6})$/i,c=function(t){var e=t.match(A);return!!e&&[parseInt(e[1].substring(0,2),16),parseInt(e[1].substring(2,4),16),parseInt(e[1].substring(4,6),16),null]},s=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/,h=function(t){var e=t.match(s);return!!e&&[Number(e[1]),Number(e[2]),Number(e[3]),null]},o=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?\.?\d+)\s*\)$/,u=function(t){var e=t.match(o);return!!(e&&4<e.length)&&[Number(e[1]),Number(e[2]),Number(e[3]),Number(e[4])]},f=function(t){return[Math.min(t[0],255),Math.min(t[1],255),Math.min(t[2],255),3<t.length?t[3]:null]},d=function(t){return p[t.toLowerCase()]||!1},g=function(){function o(t){!function(t,e){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}(this);var e=Array.isArray(t)?f(t):l(t)||h(t)||u(t)||d(t)||c(t)||[0,0,0,null],i=a(e,4),r=i[0],n=i[1],A=i[2],s=i[3];this.r=r,this.g=n,this.b=A,this.a=s}return r(o,[{key:"isTransparent",value:function(){return 0===this.a}},{key:"toString",value:function(){return null!==this.a&&1!==this.a?"rgba("+this.r+","+this.g+","+this.b+","+this.a+")":"rgb("+this.r+","+this.g+","+this.b+")"}}]),o}();e.default=g;var p={transparent:[0,0,0,0],aliceblue:[240,248,255,null],antiquewhite:[250,235,215,null],aqua:[0,255,255,null],aquamarine:[127,255,212,null],azure:[240,255,255,null],beige:[245,245,220,null],bisque:[255,228,196,null],black:[0,0,0,null],blanchedalmond:[255,235,205,null],blue:[0,0,255,null],blueviolet:[138,43,226,null],brown:[165,42,42,null],burlywood:[222,184,135,null],cadetblue:[95,158,160,null],chartreuse:[127,255,0,null],chocolate:[210,105,30,null],coral:[255,127,80,null],cornflowerblue:[100,149,237,null],cornsilk:[255,248,220,null],crimson:[220,20,60,null],cyan:[0,255,255,null],darkblue:[0,0,139,null],darkcyan:[0,139,139,null],darkgoldenrod:[184,134,11,null],darkgray:[169,169,169,null],darkgreen:[0,100,0,null],darkgrey:[169,169,169,null],darkkhaki:[189,183,107,null],darkmagenta:[139,0,139,null],darkolivegreen:[85,107,47,null],darkorange:[255,140,0,null],darkorchid:[153,50,204,null],darkred:[139,0,0,null],darksalmon:[233,150,122,null],darkseagreen:[143,188,143,null],darkslateblue:[72,61,139,null],darkslategray:[47,79,79,null],darkslategrey:[47,79,79,null],darkturquoise:[0,206,209,null],darkviolet:[148,0,211,null],deeppink:[255,20,147,null],deepskyblue:[0,191,255,null],dimgray:[105,105,105,null],dimgrey:[105,105,105,null],dodgerblue:[30,144,255,null],firebrick:[178,34,34,null],floralwhite:[255,250,240,null],forestgreen:[34,139,34,null],fuchsia:[255,0,255,null],gainsboro:[220,220,220,null],ghostwhite:[248,248,255,null],gold:[255,215,0,null],goldenrod:[218,165,32,null],gray:[128,128,128,null],green:[0,128,0,null],greenyellow:[173,255,47,null],grey:[128,128,128,null],honeydew:[240,255,240,null],hotpink:[255,105,180,null],indianred:[205,92,92,null],indigo:[75,0,130,null],ivory:[255,255,240,null],khaki:[240,230,140,null],lavender:[230,230,250,null],lavenderblush:[255,240,245,null],lawngreen:[124,252,0,null],lemonchiffon:[255,250,205,null],lightblue:[173,216,230,null],lightcoral:[240,128,128,null],lightcyan:[224,255,255,null],lightgoldenrodyellow:[250,250,210,null],lightgray:[211,211,211,null],lightgreen:[144,238,144,null],lightgrey:[211,211,211,null],lightpink:[255,182,193,null],lightsalmon:[255,160,122,null],lightseagreen:[32,178,170,null],lightskyblue:[135,206,250,null],lightslategray:[119,136,153,null],lightslategrey:[119,136,153,null],lightsteelblue:[176,196,222,null],lightyellow:[255,255,224,null],lime:[0,255,0,null],limegreen:[50,205,50,null],linen:[250,240,230,null],magenta:[255,0,255,null],maroon:[128,0,0,null],mediumaquamarine:[102,205,170,null],mediumblue:[0,0,205,null],mediumorchid:[186,85,211,null],mediumpurple:[147,112,219,null],mediumseagreen:[60,179,113,null],mediumslateblue:[123,104,238,null],mediumspringgreen:[0,250,154,null],mediumturquoise:[72,209,204,null],mediumvioletred:[199,21,133,null],midnightblue:[25,25,112,null],mintcream:[245,255,250,null],mistyrose:[255,228,225,null],moccasin:[255,228,181,null],navajowhite:[255,222,173,null],navy:[0,0,128,null],oldlace:[253,245,230,null],olive:[128,128,0,null],olivedrab:[107,142,35,null],orange:[255,165,0,null],orangered:[255,69,0,null],orchid:[218,112,214,null],palegoldenrod:[238,232,170,null],palegreen:[152,251,152,null],paleturquoise:[175,238,238,null],palevioletred:[219,112,147,null],papayawhip:[255,239,213,null],peachpuff:[255,218,185,null],peru:[205,133,63,null],pink:[255,192,203,null],plum:[221,160,221,null],powderblue:[176,224,230,null],purple:[128,0,128,null],rebeccapurple:[102,51,153,null],red:[255,0,0,null],rosybrown:[188,143,143,null],royalblue:[65,105,225,null],saddlebrown:[139,69,19,null],salmon:[250,128,114,null],sandybrown:[244,164,96,null],seagreen:[46,139,87,null],seashell:[255,245,238,null],sienna:[160,82,45,null],silver:[192,192,192,null],skyblue:[135,206,235,null],slateblue:[106,90,205,null],slategray:[112,128,144,null],slategrey:[112,128,144,null],snow:[255,250,250,null],springgreen:[0,255,127,null],steelblue:[70,130,180,null],tan:[210,180,140,null],teal:[0,128,128,null],thistle:[216,191,216,null],tomato:[255,99,71,null],turquoise:[64,224,208,null],violet:[238,130,238,null],wheat:[245,222,179,null],white:[255,255,255,null],whitesmoke:[245,245,245,null],yellow:[255,255,0,null],yellowgreen:[154,205,50,null]};e.TRANSPARENT=new g([0,0,0,0])},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.parseBoundCurves=e.calculatePaddingBoxPath=e.calculateBorderBoxPath=e.parsePathForBorder=e.parseDocumentSize=e.calculateContentBox=e.calculatePaddingBox=e.parseBounds=e.Bounds=void 0;var A=function(){function r(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}}(),B=r(i(7)),c=r(i(32)),o=e.Bounds=function(){function n(t,e,i,r){!function(t,e){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this),this.left=t,this.top=e,this.width=i,this.height=r}return A(n,null,[{key:"fromClientRect",value:function(t,e,i){return new n(t.left+e,t.top+i,t.width,t.height)}}]),n}(),n=(e.parseBounds=function(t,e,i){return o.fromClientRect(t.getBoundingClientRect(),e,i)},e.calculatePaddingBox=function(t,e){return new o(t.left+e[3].borderWidth,t.top+e[0].borderWidth,t.width-(e[1].borderWidth+e[3].borderWidth),t.height-(e[0].borderWidth+e[2].borderWidth))},e.calculateContentBox=function(t,e,i){var r=e[0].value,n=e[1].value,A=e[2].value,s=e[3].value;return new o(t.left+s+i[3].borderWidth,t.top+r+i[0].borderWidth,t.width-(i[1].borderWidth+i[3].borderWidth+s+n),t.height-(i[0].borderWidth+i[2].borderWidth+r+A))},e.parseDocumentSize=function(t){var e=t.body,i=t.documentElement;if(!e||!i)throw new Error("");var r=Math.max(Math.max(e.scrollWidth,i.scrollWidth),Math.max(e.offsetWidth,i.offsetWidth),Math.max(e.clientWidth,i.clientWidth)),n=Math.max(Math.max(e.scrollHeight,i.scrollHeight),Math.max(e.offsetHeight,i.offsetHeight),Math.max(e.clientHeight,i.clientHeight));return new o(0,0,r,n)},e.parsePathForBorder=function(t,e){switch(e){case 0:return n(t.topLeftOuter,t.topLeftInner,t.topRightOuter,t.topRightInner);case 1:return n(t.topRightOuter,t.topRightInner,t.bottomRightOuter,t.bottomRightInner);case 2:return n(t.bottomRightOuter,t.bottomRightInner,t.bottomLeftOuter,t.bottomLeftInner);case 3:default:return n(t.bottomLeftOuter,t.bottomLeftInner,t.topLeftOuter,t.topLeftInner)}},function(t,e,i,r){var n=[];return t instanceof c.default?n.push(t.subdivide(.5,!1)):n.push(t),i instanceof c.default?n.push(i.subdivide(.5,!0)):n.push(i),r instanceof c.default?n.push(r.subdivide(.5,!0).reverse()):n.push(r),e instanceof c.default?n.push(e.subdivide(.5,!1).reverse()):n.push(e),n}),m=(e.calculateBorderBoxPath=function(t){return[t.topLeftOuter,t.topRightOuter,t.bottomRightOuter,t.bottomLeftOuter]},e.calculatePaddingBoxPath=function(t){return[t.topLeftInner,t.topRightInner,t.bottomRightInner,t.bottomLeftInner]},e.parseBoundCurves=function(t,e,i){var r=t.width/2,n=t.height/2,A=i[m.TOP_LEFT][0].getAbsoluteValue(t.width)<r?i[m.TOP_LEFT][0].getAbsoluteValue(t.width):r,s=i[m.TOP_LEFT][1].getAbsoluteValue(t.height)<n?i[m.TOP_LEFT][1].getAbsoluteValue(t.height):n,o=i[m.TOP_RIGHT][0].getAbsoluteValue(t.width)<r?i[m.TOP_RIGHT][0].getAbsoluteValue(t.width):r,a=i[m.TOP_RIGHT][1].getAbsoluteValue(t.height)<n?i[m.TOP_RIGHT][1].getAbsoluteValue(t.height):n,l=i[m.BOTTOM_RIGHT][0].getAbsoluteValue(t.width)<r?i[m.BOTTOM_RIGHT][0].getAbsoluteValue(t.width):r,c=i[m.BOTTOM_RIGHT][1].getAbsoluteValue(t.height)<n?i[m.BOTTOM_RIGHT][1].getAbsoluteValue(t.height):n,h=i[m.BOTTOM_LEFT][0].getAbsoluteValue(t.width)<r?i[m.BOTTOM_LEFT][0].getAbsoluteValue(t.width):r,u=i[m.BOTTOM_LEFT][1].getAbsoluteValue(t.height)<n?i[m.BOTTOM_LEFT][1].getAbsoluteValue(t.height):n,f=t.width-o,d=t.height-c,g=t.width-l,p=t.height-u;return{topLeftOuter:0<A||0<s?v(t.left,t.top,A,s,m.TOP_LEFT):new B.default(t.left,t.top),topLeftInner:0<A||0<s?v(t.left+e[3].borderWidth,t.top+e[0].borderWidth,Math.max(0,A-e[3].borderWidth),Math.max(0,s-e[0].borderWidth),m.TOP_LEFT):new B.default(t.left+e[3].borderWidth,t.top+e[0].borderWidth),topRightOuter:0<o||0<a?v(t.left+f,t.top,o,a,m.TOP_RIGHT):new B.default(t.left+t.width,t.top),topRightInner:0<o||0<a?v(t.left+Math.min(f,t.width+e[3].borderWidth),t.top+e[0].borderWidth,f>t.width+e[3].borderWidth?0:o-e[3].borderWidth,a-e[0].borderWidth,m.TOP_RIGHT):new B.default(t.left+t.width-e[1].borderWidth,t.top+e[0].borderWidth),bottomRightOuter:0<l||0<c?v(t.left+g,t.top+d,l,c,m.BOTTOM_RIGHT):new B.default(t.left+t.width,t.top+t.height),bottomRightInner:0<l||0<c?v(t.left+Math.min(g,t.width-e[3].borderWidth),t.top+Math.min(d,t.height+e[0].borderWidth),Math.max(0,l-e[1].borderWidth),c-e[2].borderWidth,m.BOTTOM_RIGHT):new B.default(t.left+t.width-e[1].borderWidth,t.top+t.height-e[2].borderWidth),bottomLeftOuter:0<h||0<u?v(t.left,t.top+p,h,u,m.BOTTOM_LEFT):new B.default(t.left,t.top+t.height),bottomLeftInner:0<h||0<u?v(t.left+e[3].borderWidth,t.top+p,Math.max(0,h-e[3].borderWidth),u-e[2].borderWidth,m.BOTTOM_LEFT):new B.default(t.left+e[3].borderWidth,t.top+t.height-e[2].borderWidth)}},{TOP_LEFT:0,TOP_RIGHT:1,BOTTOM_RIGHT:2,BOTTOM_LEFT:3}),v=function(t,e,i,r,n){var A=(Math.sqrt(2)-1)/3*4,s=i*A,o=r*A,a=t+i,l=e+r;switch(n){case m.TOP_LEFT:return new c.default(new B.default(t,l),new B.default(t,l-o),new B.default(a-s,e),new B.default(a,e));case m.TOP_RIGHT:return new c.default(new B.default(t,e),new B.default(t+s,e),new B.default(a,l-o),new B.default(a,l));case m.BOTTOM_RIGHT:return new c.default(new B.default(a,e),new B.default(a,e+o),new B.default(t+s,l),new B.default(t,l));case m.BOTTOM_LEFT:default:return new c.default(new B.default(a,l),new B.default(a-s,l),new B.default(t,e+o),new B.default(t,e))}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.calculateLengthFromValueWithUnit=e.LENGTH_TYPE=void 0;var r,n=function(){function r(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}}(),A=((r=i(3))&&r.__esModule,e.LENGTH_TYPE={PX:0,PERCENTAGE:1}),s=function(){function i(t){!function(t,e){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this),this.type="%"===t.substr(t.length-1)?A.PERCENTAGE:A.PX;var e=parseFloat(t);this.value=isNaN(e)?0:e}return n(i,[{key:"isPercentage",value:function(){return this.type===A.PERCENTAGE}},{key:"getAbsoluteValue",value:function(t){return this.isPercentage()?t*(this.value/100):this.value}}],[{key:"create",value:function(t){return new i(t)}}]),i}();e.default=s,e.calculateLengthFromValueWithUnit=function(t,e,i){switch(i){case"px":case"%":return new s(e+i);case"em":case"rem":var r=new s(e);return r.value*="em"===i?parseFloat(t.style.font.fontSize):function t(e){var i=e.parent;return i?t(i):parseFloat(e.style.font.fontSize)}(t),r;default:return new s("0")}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,n=function(){function r(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}}(),g=(r=i(0))&&r.__esModule?r:{default:r},A=i(4),p=i(5),B=i(12),m=i(33),v=i(34),w=i(35),C=i(36),b=i(37),_=i(38),y=i(8),E=i(39),Q=i(40),F=i(18),U=i(17),T=i(19),S=i(11),x=i(41),O=i(20),H=i(42),I=i(43),D=i(44),k=i(45),L=i(1),N=i(21),M=i(14),P=["INPUT","TEXTAREA","SELECT"],s=function(){function d(t,e,i,r){var n=this;!function(t,e){if(!(t instanceof d))throw new TypeError("Cannot call a class as a function")}(this),this.parent=e,this.tagName=t.tagName,this.index=r,this.childNodes=[],this.listItems=[],"number"==typeof t.start&&(this.listStart=t.start);var A=t.ownerDocument.defaultView,s=A.pageXOffset,o=A.pageYOffset,a=A.getComputedStyle(t,null),l=(0,v.parseDisplay)(a.display),c="radio"===t.type||"checkbox"===t.type,h=(0,T.parsePosition)(a.position);if(this.style={background:c?N.INPUT_BACKGROUND:(0,p.parseBackground)(a,i),border:c?N.INPUT_BORDERS:(0,B.parseBorder)(a),borderRadius:(t instanceof A.HTMLInputElement||t instanceof HTMLInputElement)&&c?(0,N.getInputBorderRadius)(t):(0,m.parseBorderRadius)(a),color:c?N.INPUT_COLOR:new g.default(a.color),display:l,float:(0,w.parseCSSFloat)(a.float),font:(0,C.parseFont)(a),letterSpacing:(0,b.parseLetterSpacing)(a.letterSpacing),listStyle:l===v.DISPLAY.LIST_ITEM?(0,y.parseListStyle)(a):null,lineBreak:(0,_.parseLineBreak)(a.lineBreak),margin:(0,E.parseMargin)(a),opacity:parseFloat(a.opacity),overflow:-1===P.indexOf(t.tagName)?(0,Q.parseOverflow)(a.overflow):Q.OVERFLOW.HIDDEN,overflowWrap:(0,F.parseOverflowWrap)(a.overflowWrap?a.overflowWrap:a.wordWrap),padding:(0,U.parsePadding)(a),position:h,textDecoration:(0,S.parseTextDecoration)(a),textShadow:(0,x.parseTextShadow)(a.textShadow),textTransform:(0,O.parseTextTransform)(a.textTransform),transform:(0,H.parseTransform)(a),visibility:(0,I.parseVisibility)(a.visibility),wordBreak:(0,D.parseWordBreak)(a.wordBreak),zIndex:(0,k.parseZIndex)(h!==T.POSITION.STATIC?a.zIndex:"auto")},this.isTransformed()&&(t.style.transform="matrix(1,0,0,1,0,0)"),l===v.DISPLAY.LIST_ITEM){var u=(0,M.getListOwner)(this);if(u){var f=u.listItems.length;u.listItems.push(this),this.listIndex=t.hasAttribute("value")&&"number"==typeof t.value?t.value:0===f?"number"==typeof u.listStart?u.listStart:1:u.listItems[f-1].listIndex+1}}"IMG"===t.tagName&&t.addEventListener("load",function(){n.bounds=(0,L.parseBounds)(t,s,o),n.curvedBounds=(0,L.parseBoundCurves)(n.bounds,n.style.border,n.style.borderRadius)}),this.image=R(t,i),this.bounds=c?(0,N.reformatInputBounds)((0,L.parseBounds)(t,s,o)):(0,L.parseBounds)(t,s,o),this.curvedBounds=(0,L.parseBoundCurves)(this.bounds,this.style.border,this.style.borderRadius)}return n(d,[{key:"getClipPaths",value:function(){var t=this.parent?this.parent.getClipPaths():[];return this.style.overflow!==Q.OVERFLOW.VISIBLE?t.concat([(0,L.calculatePaddingBoxPath)(this.curvedBounds)]):t}},{key:"isInFlow",value:function(){return this.isRootElement()&&!this.isFloating()&&!this.isAbsolutelyPositioned()}},{key:"isVisible",value:function(){return!(0,A.contains)(this.style.display,v.DISPLAY.NONE)&&0<this.style.opacity&&this.style.visibility===I.VISIBILITY.VISIBLE}},{key:"isAbsolutelyPositioned",value:function(){return this.style.position!==T.POSITION.STATIC&&this.style.position!==T.POSITION.RELATIVE}},{key:"isPositioned",value:function(){return this.style.position!==T.POSITION.STATIC}},{key:"isFloating",value:function(){return this.style.float!==w.FLOAT.NONE}},{key:"isRootElement",value:function(){return null===this.parent}},{key:"isTransformed",value:function(){return null!==this.style.transform}},{key:"isPositionedWithZIndex",value:function(){return this.isPositioned()&&!this.style.zIndex.auto}},{key:"isInlineLevel",value:function(){return(0,A.contains)(this.style.display,v.DISPLAY.INLINE)||(0,A.contains)(this.style.display,v.DISPLAY.INLINE_BLOCK)||(0,A.contains)(this.style.display,v.DISPLAY.INLINE_FLEX)||(0,A.contains)(this.style.display,v.DISPLAY.INLINE_GRID)||(0,A.contains)(this.style.display,v.DISPLAY.INLINE_LIST_ITEM)||(0,A.contains)(this.style.display,v.DISPLAY.INLINE_TABLE)}},{key:"isInlineBlockOrInlineTable",value:function(){return(0,A.contains)(this.style.display,v.DISPLAY.INLINE_BLOCK)||(0,A.contains)(this.style.display,v.DISPLAY.INLINE_TABLE)}}]),d}();e.default=s;var R=function(t,e){if(t instanceof t.ownerDocument.defaultView.SVGSVGElement||t instanceof SVGSVGElement){var i=new XMLSerializer;return e.loadImage("data:image/svg+xml,"+encodeURIComponent(i.serializeToString(t)))}switch(t.tagName){case"IMG":var r=t;return e.loadImage(r.currentSrc||r.src);case"CANVAS":var n=t;return e.loadCanvas(n);case"IFRAME":var A=t.getAttribute("data-html2canvas-internal-iframe-key");if(A)return A}return null}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.contains=function(t,e){return 0!=(t&e)},e.distance=function(t,e){return Math.sqrt(t*t+e*e)},e.copyCSSStyles=function(t,e){for(var i=t.length-1;0<=i;i--){var r=t.item(i);"content"!==r&&e.style.setProperty(r,t.getPropertyValue(r))}return e},e.SMALL_IMAGE="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.parseBackgroundImage=e.parseBackground=e.calculateBackgroundRepeatPath=e.calculateBackgroundPosition=e.calculateBackgroungPositioningArea=e.calculateBackgroungPaintingArea=e.calculateGradientBackgroundSize=e.calculateBackgroundSize=e.BACKGROUND_ORIGIN=e.BACKGROUND_CLIP=e.BACKGROUND_SIZE=e.BACKGROUND_REPEAT=void 0;var n=r(i(0)),A=r(i(2)),a=r(i(31)),s=r(i(7)),l=i(1),c=i(17),o=e.BACKGROUND_REPEAT={REPEAT:0,NO_REPEAT:1,REPEAT_X:2,REPEAT_Y:3},h=e.BACKGROUND_SIZE={AUTO:0,CONTAIN:1,COVER:2,LENGTH:3},u=e.BACKGROUND_CLIP={BORDER_BOX:0,PADDING_BOX:1,CONTENT_BOX:2},f=e.BACKGROUND_ORIGIN=u,d=function i(t){switch(function(t,e){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this),t){case"contain":this.size=h.CONTAIN;break;case"cover":this.size=h.COVER;break;case"auto":this.size=h.AUTO;break;default:this.value=new A.default(t)}},g=(e.calculateBackgroundSize=function(t,e,i){var r=0,n=0,A=t.size;if(A[0].size===h.CONTAIN||A[0].size===h.COVER){var s=i.width/i.height,o=e.width/e.height;return s<o!=(A[0].size===h.COVER)?new a.default(i.width,i.width/o):new a.default(i.height*o,i.height)}return A[0].value&&(r=A[0].value.getAbsoluteValue(i.width)),A[0].size===h.AUTO&&A[1].size===h.AUTO?n=e.height:A[1].size===h.AUTO?n=r/e.width*e.height:A[1].value&&(n=A[1].value.getAbsoluteValue(i.height)),A[0].size===h.AUTO&&(r=n/e.height*e.width),new a.default(r,n)},e.calculateGradientBackgroundSize=function(t,e){var i=t.size,r=i[0].value?i[0].value.getAbsoluteValue(e.width):e.width,n=i[1].value?i[1].value.getAbsoluteValue(e.height):i[0].value?r:e.height;return new a.default(r,n)},new d("auto")),p=(e.calculateBackgroungPaintingArea=function(t,e){switch(e){case u.BORDER_BOX:return(0,l.calculateBorderBoxPath)(t);case u.PADDING_BOX:default:return(0,l.calculatePaddingBoxPath)(t)}},e.calculateBackgroungPositioningArea=function(t,e,i,r){var n=(0,l.calculatePaddingBox)(e,r);switch(t){case f.BORDER_BOX:return e;case f.CONTENT_BOX:var A=i[c.PADDING_SIDES.LEFT].getAbsoluteValue(e.width),s=i[c.PADDING_SIDES.RIGHT].getAbsoluteValue(e.width),o=i[c.PADDING_SIDES.TOP].getAbsoluteValue(e.width),a=i[c.PADDING_SIDES.BOTTOM].getAbsoluteValue(e.width);return new l.Bounds(n.left+A,n.top+o,n.width-A-s,n.height-o-a);case f.PADDING_BOX:default:return n}},e.calculateBackgroundPosition=function(t,e,i){return new s.default(t[0].getAbsoluteValue(i.width-e.width),t[1].getAbsoluteValue(i.height-e.height))},e.calculateBackgroundRepeatPath=function(t,e,i,r,n){switch(t.repeat){case o.REPEAT_X:return[new s.default(Math.round(n.left),Math.round(r.top+e.y)),new s.default(Math.round(n.left+n.width),Math.round(r.top+e.y)),new s.default(Math.round(n.left+n.width),Math.round(i.height+r.top+e.y)),new s.default(Math.round(n.left),Math.round(i.height+r.top+e.y))];case o.REPEAT_Y:return[new s.default(Math.round(r.left+e.x),Math.round(n.top)),new s.default(Math.round(r.left+e.x+i.width),Math.round(n.top)),new s.default(Math.round(r.left+e.x+i.width),Math.round(n.height+n.top)),new s.default(Math.round(r.left+e.x),Math.round(n.height+n.top))];case o.NO_REPEAT:return[new s.default(Math.round(r.left+e.x),Math.round(r.top+e.y)),new s.default(Math.round(r.left+e.x+i.width),Math.round(r.top+e.y)),new s.default(Math.round(r.left+e.x+i.width),Math.round(r.top+e.y+i.height)),new s.default(Math.round(r.left+e.x),Math.round(r.top+e.y+i.height))];default:return[new s.default(Math.round(n.left),Math.round(n.top)),new s.default(Math.round(n.left+n.width),Math.round(n.top)),new s.default(Math.round(n.left+n.width),Math.round(n.height+n.top)),new s.default(Math.round(n.left),Math.round(n.height+n.top))]}},e.parseBackground=function(t,e){return{backgroundColor:new n.default(t.backgroundColor),backgroundImage:m(t,e),backgroundClip:p(t.backgroundClip),backgroundOrigin:B(t.backgroundOrigin)}},function(t){switch(t){case"padding-box":return u.PADDING_BOX;case"content-box":return u.CONTENT_BOX}return u.BORDER_BOX}),B=function(t){switch(t){case"padding-box":return f.PADDING_BOX;case"content-box":return f.CONTENT_BOX}return f.BORDER_BOX},m=function(t,i){var e=C(t.backgroundImage).map(function(t){if("url"===t.method){var e=i.loadImage(t.args[0]);t.args=e?[e]:[]}return t}),n=t.backgroundPosition.split(","),A=t.backgroundRepeat.split(","),s=t.backgroundSize.split(",");return e.map(function(t,e){var i=(s[e]||"auto").trim().split(" ").map(v),r=(n[e]||"auto").trim().split(" ").map(w);return{source:t,repeat:function(t){switch(("string"==typeof A[e]?A[e]:A[0]).trim()){case"no-repeat":return o.NO_REPEAT;case"repeat-x":case"repeat no-repeat":return o.REPEAT_X;case"repeat-y":case"no-repeat repeat":return o.REPEAT_Y;case"repeat":return o.REPEAT}return o.REPEAT}(),size:i.length<2?[i[0],g]:[i[0],i[1]],position:r.length<2?[r[0],r[0]]:[r[0],r[1]]}})},v=function(t){return"auto"===t?g:new d(t)},w=function(t){switch(t){case"bottom":case"right":return new A.default("100%");case"left":case"top":return new A.default("0%");case"auto":return new A.default("0")}return new A.default(t)},C=e.parseBackgroundImage=function(t){var e=/^\s$/,i=[],r=[],n="",A=null,s="",o=0,a=0,l=function(){var t="";if(n){'"'===s.substr(0,1)&&(s=s.substr(1,s.length-2)),s&&r.push(s.trim());var e=n.indexOf("-",1)+1;"-"===n.substr(0,1)&&0<e&&(t=n.substr(0,e).toLowerCase(),n=n.substr(e)),"none"!==(n=n.toLowerCase())&&i.push({prefix:t,method:n,args:r})}r=[],n=s=""};return t.split("").forEach(function(t){if(0!==o||!e.test(t)){switch(t){case'"':A?A===t&&(A=null):A=t;break;case"(":if(A)break;if(0===o)return void(o=1);a++;break;case")":if(A)break;if(1===o){if(0===a)return o=0,void l();a--}break;case",":if(A)break;if(0===o)return void l();if(1===o&&0===a&&!n.match(/^url$/i))return r.push(s.trim()),void(s="")}0===o?n+=t:s+=t}}),l(),i}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PATH={VECTOR:0,BEZIER_CURVE:1,CIRCLE:2}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(6);e.default=function i(t,e){!function(t,e){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this),this.type=r.PATH.VECTOR,this.x=t,this.y=e}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseListStyle=e.parseListStyleType=e.LIST_STYLE_TYPE=e.LIST_STYLE_POSITION=void 0;var r=i(5),n=e.LIST_STYLE_POSITION={INSIDE:0,OUTSIDE:1},A=e.LIST_STYLE_TYPE={NONE:-1,DISC:0,CIRCLE:1,SQUARE:2,DECIMAL:3,CJK_DECIMAL:4,DECIMAL_LEADING_ZERO:5,LOWER_ROMAN:6,UPPER_ROMAN:7,LOWER_GREEK:8,LOWER_ALPHA:9,UPPER_ALPHA:10,ARABIC_INDIC:11,ARMENIAN:12,BENGALI:13,CAMBODIAN:14,CJK_EARTHLY_BRANCH:15,CJK_HEAVENLY_STEM:16,CJK_IDEOGRAPHIC:17,DEVANAGARI:18,ETHIOPIC_NUMERIC:19,GEORGIAN:20,GUJARATI:21,GURMUKHI:22,HEBREW:22,HIRAGANA:23,HIRAGANA_IROHA:24,JAPANESE_FORMAL:25,JAPANESE_INFORMAL:26,KANNADA:27,KATAKANA:28,KATAKANA_IROHA:29,KHMER:30,KOREAN_HANGUL_FORMAL:31,KOREAN_HANJA_FORMAL:32,KOREAN_HANJA_INFORMAL:33,LAO:34,LOWER_ARMENIAN:35,MALAYALAM:36,MONGOLIAN:37,MYANMAR:38,ORIYA:39,PERSIAN:40,SIMP_CHINESE_FORMAL:41,SIMP_CHINESE_INFORMAL:42,TAMIL:43,TELUGU:44,THAI:45,TIBETAN:46,TRAD_CHINESE_FORMAL:47,TRAD_CHINESE_INFORMAL:48,UPPER_ARMENIAN:49,DISCLOSURE_OPEN:50,DISCLOSURE_CLOSED:51},s=e.parseListStyleType=function(t){switch(t){case"disc":return A.DISC;case"circle":return A.CIRCLE;case"square":return A.SQUARE;case"decimal":return A.DECIMAL;case"cjk-decimal":return A.CJK_DECIMAL;case"decimal-leading-zero":return A.DECIMAL_LEADING_ZERO;case"lower-roman":return A.LOWER_ROMAN;case"upper-roman":return A.UPPER_ROMAN;case"lower-greek":return A.LOWER_GREEK;case"lower-alpha":return A.LOWER_ALPHA;case"upper-alpha":return A.UPPER_ALPHA;case"arabic-indic":return A.ARABIC_INDIC;case"armenian":return A.ARMENIAN;case"bengali":return A.BENGALI;case"cambodian":return A.CAMBODIAN;case"cjk-earthly-branch":return A.CJK_EARTHLY_BRANCH;case"cjk-heavenly-stem":return A.CJK_HEAVENLY_STEM;case"cjk-ideographic":return A.CJK_IDEOGRAPHIC;case"devanagari":return A.DEVANAGARI;case"ethiopic-numeric":return A.ETHIOPIC_NUMERIC;case"georgian":return A.GEORGIAN;case"gujarati":return A.GUJARATI;case"gurmukhi":return A.GURMUKHI;case"hebrew":return A.HEBREW;case"hiragana":return A.HIRAGANA;case"hiragana-iroha":return A.HIRAGANA_IROHA;case"japanese-formal":return A.JAPANESE_FORMAL;case"japanese-informal":return A.JAPANESE_INFORMAL;case"kannada":return A.KANNADA;case"katakana":return A.KATAKANA;case"katakana-iroha":return A.KATAKANA_IROHA;case"khmer":return A.KHMER;case"korean-hangul-formal":return A.KOREAN_HANGUL_FORMAL;case"korean-hanja-formal":return A.KOREAN_HANJA_FORMAL;case"korean-hanja-informal":return A.KOREAN_HANJA_INFORMAL;case"lao":return A.LAO;case"lower-armenian":return A.LOWER_ARMENIAN;case"malayalam":return A.MALAYALAM;case"mongolian":return A.MONGOLIAN;case"myanmar":return A.MYANMAR;case"oriya":return A.ORIYA;case"persian":return A.PERSIAN;case"simp-chinese-formal":return A.SIMP_CHINESE_FORMAL;case"simp-chinese-informal":return A.SIMP_CHINESE_INFORMAL;case"tamil":return A.TAMIL;case"telugu":return A.TELUGU;case"thai":return A.THAI;case"tibetan":return A.TIBETAN;case"trad-chinese-formal":return A.TRAD_CHINESE_FORMAL;case"trad-chinese-informal":return A.TRAD_CHINESE_INFORMAL;case"upper-armenian":return A.UPPER_ARMENIAN;case"disclosure-open":return A.DISCLOSURE_OPEN;case"disclosure-closed":return A.DISCLOSURE_CLOSED;case"none":default:return A.NONE}},o=(e.parseListStyle=function(t){var e=(0,r.parseBackgroundImage)(t.getPropertyValue("list-style-image"));return{listStyleType:s(t.getPropertyValue("list-style-type")),listStyleImage:e.length?e[0]:null,listStylePosition:o(t.getPropertyValue("list-style-position"))}},function(t){switch(t){case"inside":return n.INSIDE;case"outside":default:return n.OUTSIDE}})},function(t,e,i){"use strict";function r(t,e,i){return 0<t.length?e+i.toUpperCase():t}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function r(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}}(),A=i(20),s=i(22),o=function(){function r(t,e,i){!function(t,e){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this),this.text=t,this.parent=e,this.bounds=i}return n(r,null,[{key:"fromTextNode",value:function(t,e){var i=l(t.data,e.style.textTransform);return new r(i,e,(0,s.parseTextBounds)(i,e,t))}}]),r}();e.default=o;var a=/(^|\s|:|-|\(|\))([a-z])/g,l=function(t,e){switch(e){case A.TEXT_TRANSFORM.LOWERCASE:return t.toLowerCase();case A.TEXT_TRANSFORM.CAPITALIZE:return t.replace(a,r);case A.TEXT_TRANSFORM.UPPERCASE:return t.toUpperCase();default:return t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(23),o=function(t){return 0===t[0]&&255===t[1]&&0===t[2]&&255===t[3]},a={get SUPPORT_RANGE_BOUNDS(){var t=function(t){if(t.createRange){var e=t.createRange();if(e.getBoundingClientRect){var i=t.createElement("boundtest");i.style.height="123px",i.style.display="block",t.body.appendChild(i),e.selectNode(i);var r=e.getBoundingClientRect(),n=Math.round(r.height);if(t.body.removeChild(i),123===n)return!0}}return!1}(document);return Object.defineProperty(a,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=function(t){var e=new Image,i=t.createElement("canvas"),r=i.getContext("2d");e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(e,0,0),i.toDataURL()}catch(t){return!1}return!0}(document);return Object.defineProperty(a,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_BASE64_DRAWING(){return function(t){var e,i,r,n,A,s=(e=document,i=t,r=new Image,n=e.createElement("canvas"),A=n.getContext("2d"),new Promise(function(e){r.src=i;var t=function(){try{A.drawImage(r,0,0),n.toDataURL()}catch(t){return e(!1)}return e(!0)};r.onload=t,r.onerror=function(){return e(!1)},!0===r.complete&&setTimeout(function(){t()},500)}));return Object.defineProperty(a,"SUPPORT_BASE64_DRAWING",{value:function(){return s}}),s}},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t="function"==typeof Array.from&&"function"==typeof window.fetch?function(r){var t=r.createElement("canvas");t.width=100,t.height=100;var n=t.getContext("2d");n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,100,100);var e=new Image,A=t.toDataURL();e.src=A;var i=(0,s.createForeignObjectSVG)(100,100,0,0,e);return n.fillStyle="red",n.fillRect(0,0,100,100),(0,s.loadSerializedSVG)(i).then(function(t){n.drawImage(t,0,0);var e=n.getImageData(0,0,100,100).data;n.fillStyle="red",n.fillRect(0,0,100,100);var i=r.createElement("div");return i.style.backgroundImage="url("+A+")",i.style.height="100px",o(e)?(0,s.loadSerializedSVG)((0,s.createForeignObjectSVG)(100,100,0,0,i)):Promise.reject(!1)}).then(function(t){return n.drawImage(t,0,0),o(n.getImageData(0,0,100,100).data)}).catch(function(t){return!1})}(document):Promise.resolve(!1);return Object.defineProperty(a,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=void 0!==(new Image).crossOrigin;return Object.defineProperty(a,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t="string"==typeof(new XMLHttpRequest).responseType;return Object.defineProperty(a,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(a,"SUPPORT_CORS_XHR",{value:t}),t}};e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseTextDecoration=e.TEXT_DECORATION_LINE=e.TEXT_DECORATION=e.TEXT_DECORATION_STYLE=void 0;var r,n=(r=i(0))&&r.__esModule?r:{default:r},A=e.TEXT_DECORATION_STYLE={SOLID:0,DOUBLE:1,DOTTED:2,DASHED:3,WAVY:4},s=e.TEXT_DECORATION={NONE:null},o=e.TEXT_DECORATION_LINE={UNDERLINE:1,OVERLINE:2,LINE_THROUGH:3,BLINK:4},a=function(t){switch(t){case"underline":return o.UNDERLINE;case"overline":return o.OVERLINE;case"line-through":return o.LINE_THROUGH}return o.BLINK};e.parseTextDecoration=function(e){var t,i="none"===(t=e.textDecorationLine?e.textDecorationLine:e.textDecoration)?null:t.split(" ").map(a);return null===i?s.NONE:{textDecorationLine:i,textDecorationColor:e.textDecorationColor?new n.default(e.textDecorationColor):null,textDecorationStyle:function(t){switch(e.textDecorationStyle){case"double":return A.DOUBLE;case"dotted":return A.DOTTED;case"dashed":return A.DASHED;case"wavy":return A.WAVY}return A.SOLID}()}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseBorder=e.BORDER_SIDES=e.BORDER_STYLE=void 0;var r,A=(r=i(0))&&r.__esModule?r:{default:r},s=e.BORDER_STYLE={NONE:0,SOLID:1},n=e.BORDER_SIDES={TOP:0,RIGHT:1,BOTTOM:2,LEFT:3},o=Object.keys(n).map(function(t){return t.toLowerCase()});e.parseBorder=function(n){return o.map(function(e){var t=new A.default(n.getPropertyValue("border-"+e+"-color")),i=function(t){switch(n.getPropertyValue("border-"+e+"-style")){case"none":return s.NONE}return s.SOLID}(),r=parseFloat(n.getPropertyValue("border-"+e+"-width"));return{borderColor:t,borderStyle:i,borderWidth:isNaN(r)?0:r}})}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toCodePoints=function(t){for(var e=[],i=0,r=t.length;i<r;){var n=t.charCodeAt(i++);if(55296<=n&&n<=56319&&i<r){var A=t.charCodeAt(i++);56320==(64512&A)?e.push(((1023&n)<<10)+(1023&A)+65536):(e.push(n),i--)}else e.push(n)}return e},e.fromCodePoint=function(){if(String.fromCodePoint)return String.fromCodePoint.apply(String,arguments);var t=arguments.length;if(!t)return"";for(var e=[],i=-1,r="";++i<t;){var n=arguments.length<=i?void 0:arguments[i];n<=65535?e.push(n):(n-=65536,e.push(55296+(n>>10),n%1024+56320)),(i+1===t||16384<e.length)&&(r+=String.fromCharCode.apply(String,e),e.length=0)}return r};for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h="undefined"==typeof Uint8Array?[]:new Uint8Array(256),n=0;n<r.length;n++)h[r.charCodeAt(n)]=n;e.decode=function(t){var e=.75*t.length,i=t.length,r=void 0,n=0,A=void 0,s=void 0,o=void 0,a=void 0;"="===t[t.length-1]&&(e--,"="===t[t.length-2]&&e--);var l="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(e):new Array(e),c=Array.isArray(l)?l:new Uint8Array(l);for(r=0;r<i;r+=4)A=h[t.charCodeAt(r)],s=h[t.charCodeAt(r+1)],o=h[t.charCodeAt(r+2)],a=h[t.charCodeAt(r+3)],c[n++]=A<<2|s>>4,c[n++]=(15&s)<<4|o>>2,c[n++]=(3&o)<<6|63&a;return l},e.polyUint16Array=function(t){for(var e=t.length,i=[],r=0;r<e;r+=2)i.push(t[r+1]<<8|t[r]);return i},e.polyUint32Array=function(t){for(var e=t.length,i=[],r=0;r<e;r+=4)i.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return i}},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.createCounterText=e.inlineListItemElement=e.getListOwner=void 0;var u=i(4),f=r(i(3)),d=r(i(9)),g=i(8),s=i(24),n=["OL","UL","MENU"],o=(e.getListOwner=function(t){var e=t.parent;if(!e)return null;do{if(-1!==n.indexOf(e.tagName))return e;e=e.parent}while(e);return t.parent},e.inlineListItemElement=function(t,e,i){var r=e.style.listStyle;if(r){var n=t.ownerDocument.defaultView.getComputedStyle(t,null),A=t.ownerDocument.createElement("html2canvaswrapper");switch((0,u.copyCSSStyles)(n,A),A.style.position="absolute",A.style.bottom="auto",A.style.display="block",A.style.letterSpacing="normal",r.listStylePosition){case g.LIST_STYLE_POSITION.OUTSIDE:A.style.left="auto",A.style.right=t.ownerDocument.defaultView.innerWidth-e.bounds.left-e.style.margin[1].getAbsoluteValue(e.bounds.width)+7+"px",A.style.textAlign="right";break;case g.LIST_STYLE_POSITION.INSIDE:A.style.left=e.bounds.left-e.style.margin[3].getAbsoluteValue(e.bounds.width)+"px",A.style.right="auto",A.style.textAlign="left"}var s=void 0,o=e.style.margin[0].getAbsoluteValue(e.bounds.width),a=r.listStyleImage;if(a)if("url"===a.method){var l=t.ownerDocument.createElement("img");l.src=a.args[0],A.style.top=e.bounds.top-o+"px",A.style.width="auto",A.style.height="auto",A.appendChild(l)}else{var c=.5*parseFloat(e.style.font.fontSize);A.style.top=e.bounds.top-o+e.bounds.height-1.5*c+"px",A.style.width=c+"px",A.style.height=c+"px",A.style.backgroundImage=n.listStyleImage}else"number"==typeof e.listIndex&&(s=t.ownerDocument.createTextNode(w(e.listIndex,r.listStyleType,!0)),A.appendChild(s),A.style.top=e.bounds.top-o+"px");var h=t.ownerDocument.body;h.appendChild(A),s?(e.childNodes.push(d.default.fromTextNode(s,e)),h.removeChild(A)):e.childNodes.push(new f.default(A,e,i,0))}},{integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]}),a={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},l={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},c={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},h=function(r,t,e,n,i,A){return r<t||e<r?w(r,i,0<A.length):n.integers.reduce(function(t,e,i){for(;e<=r;)r-=e,t+=n.values[i];return t},"")+A},p=function(t,e,i,r){for(var n="";i||t--,n=r(t)+n,e<=(t/=e)*e;);return n},B=function(t,e,i,r,n){var A=i-e+1;return(t<0?"-":"")+(p(Math.abs(t),A,r,function(t){return(0,s.fromCodePoint)(Math.floor(t%A)+e)})+n)},m=function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:". ",r=e.length;return p(Math.abs(t),r,!1,function(t){return e[Math.floor(t%r)]})+i},v=function(t,e,i,r,n,A){if(t<-9999||9999<t)return w(t,g.LIST_STYLE_TYPE.CJK_DECIMAL,0<n.length);var s=Math.abs(t),o=n;if(0===s)return e[0]+o;for(var a=0;0<s&&a<=4;a++){var l=s%10;0===l&&(0,u.contains)(A,1)&&""!==o?o=e[l]+o:1<l||1===l&&0===a||1===l&&1===a&&(0,u.contains)(A,2)||1===l&&1===a&&(0,u.contains)(A,4)&&100<t||1===l&&1<a&&(0,u.contains)(A,8)?o=e[l]+(0<a?i[a-1]:"")+o:1===l&&0<a&&(o=i[a-1]+o),s=Math.floor(s/10)}return(t<0?r:"")+o},w=e.createCounterText=function(t,e,i){var r=i?". ":"",n=i?"":"",A=i?", ":"";switch(e){case g.LIST_STYLE_TYPE.DISC:return"";case g.LIST_STYLE_TYPE.CIRCLE:return"";case g.LIST_STYLE_TYPE.SQUARE:return"";case g.LIST_STYLE_TYPE.DECIMAL_LEADING_ZERO:var s=B(t,48,57,!0,r);return s.length<4?"0"+s:s;case g.LIST_STYLE_TYPE.CJK_DECIMAL:return m(t,"",n);case g.LIST_STYLE_TYPE.LOWER_ROMAN:return h(t,1,3999,o,g.LIST_STYLE_TYPE.DECIMAL,r).toLowerCase();case g.LIST_STYLE_TYPE.UPPER_ROMAN:return h(t,1,3999,o,g.LIST_STYLE_TYPE.DECIMAL,r);case g.LIST_STYLE_TYPE.LOWER_GREEK:return B(t,945,969,!1,r);case g.LIST_STYLE_TYPE.LOWER_ALPHA:return B(t,97,122,!1,r);case g.LIST_STYLE_TYPE.UPPER_ALPHA:return B(t,65,90,!1,r);case g.LIST_STYLE_TYPE.ARABIC_INDIC:return B(t,1632,1641,!0,r);case g.LIST_STYLE_TYPE.ARMENIAN:case g.LIST_STYLE_TYPE.UPPER_ARMENIAN:return h(t,1,9999,a,g.LIST_STYLE_TYPE.DECIMAL,r);case g.LIST_STYLE_TYPE.LOWER_ARMENIAN:return h(t,1,9999,a,g.LIST_STYLE_TYPE.DECIMAL,r).toLowerCase();case g.LIST_STYLE_TYPE.BENGALI:return B(t,2534,2543,!0,r);case g.LIST_STYLE_TYPE.CAMBODIAN:case g.LIST_STYLE_TYPE.KHMER:return B(t,6112,6121,!0,r);case g.LIST_STYLE_TYPE.CJK_EARTHLY_BRANCH:return m(t,"",n);case g.LIST_STYLE_TYPE.CJK_HEAVENLY_STEM:return m(t,"",n);case g.LIST_STYLE_TYPE.CJK_IDEOGRAPHIC:case g.LIST_STYLE_TYPE.TRAD_CHINESE_INFORMAL:return v(t,"","","",n,14);case g.LIST_STYLE_TYPE.TRAD_CHINESE_FORMAL:return v(t,"","","",n,15);case g.LIST_STYLE_TYPE.SIMP_CHINESE_INFORMAL:return v(t,"","","",n,14);case g.LIST_STYLE_TYPE.SIMP_CHINESE_FORMAL:return v(t,"","","",n,15);case g.LIST_STYLE_TYPE.JAPANESE_INFORMAL:return v(t,"","","",n,0);case g.LIST_STYLE_TYPE.JAPANESE_FORMAL:return v(t,"","","",n,7);case g.LIST_STYLE_TYPE.KOREAN_HANGUL_FORMAL:return v(t,"",""," ",A,7);case g.LIST_STYLE_TYPE.KOREAN_HANJA_INFORMAL:return v(t,"",""," ",A,0);case g.LIST_STYLE_TYPE.KOREAN_HANJA_FORMAL:return v(t,"",""," ",A,7);case g.LIST_STYLE_TYPE.DEVANAGARI:return B(t,2406,2415,!0,r);case g.LIST_STYLE_TYPE.GEORGIAN:return h(t,1,19999,c,g.LIST_STYLE_TYPE.DECIMAL,r);case g.LIST_STYLE_TYPE.GUJARATI:return B(t,2790,2799,!0,r);case g.LIST_STYLE_TYPE.GURMUKHI:return B(t,2662,2671,!0,r);case g.LIST_STYLE_TYPE.HEBREW:return h(t,1,10999,l,g.LIST_STYLE_TYPE.DECIMAL,r);case g.LIST_STYLE_TYPE.HIRAGANA:return m(t,"");case g.LIST_STYLE_TYPE.HIRAGANA_IROHA:return m(t,"");case g.LIST_STYLE_TYPE.KANNADA:return B(t,3302,3311,!0,r);case g.LIST_STYLE_TYPE.KATAKANA:return m(t,"",n);case g.LIST_STYLE_TYPE.KATAKANA_IROHA:return m(t,"",n);case g.LIST_STYLE_TYPE.LAO:return B(t,3792,3801,!0,r);case g.LIST_STYLE_TYPE.MONGOLIAN:return B(t,6160,6169,!0,r);case g.LIST_STYLE_TYPE.MYANMAR:return B(t,4160,4169,!0,r);case g.LIST_STYLE_TYPE.ORIYA:return B(t,2918,2927,!0,r);case g.LIST_STYLE_TYPE.PERSIAN:return B(t,1776,1785,!0,r);case g.LIST_STYLE_TYPE.TAMIL:return B(t,3046,3055,!0,r);case g.LIST_STYLE_TYPE.TELUGU:return B(t,3174,3183,!0,r);case g.LIST_STYLE_TYPE.THAI:return B(t,3664,3673,!0,r);case g.LIST_STYLE_TYPE.TIBETAN:return B(t,3872,3881,!0,r);case g.LIST_STYLE_TYPE.DECIMAL:default:return B(t,48,57,!0,r)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function r(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}}(),n=i(6),a=i(11),c=function(t,e){var i=Math.max.apply(null,t.colorStops.map(function(t){return t.stop})),r=1/Math.max(1,i);t.colorStops.forEach(function(t){e.addColorStop(r*t.stop,t.color.toString())})},A=function(){function i(t){!function(t,e){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this),this.canvas=t||document.createElement("canvas")}return r(i,[{key:"render",value:function(t){this.ctx=this.canvas.getContext("2d"),this.options=t,this.canvas.width=Math.floor(t.width*t.scale),this.canvas.height=Math.floor(t.height*t.scale),this.canvas.style.width=t.width+"px",this.canvas.style.height=t.height+"px",this.ctx.scale(this.options.scale,this.options.scale),this.ctx.translate(-t.x,-t.y),this.ctx.textBaseline="bottom",t.logger.log("Canvas renderer initialized ("+t.width+"x"+t.height+" at "+t.x+","+t.y+") with scale "+this.options.scale)}},{key:"clip",value:function(t,e){var i=this;t.length&&(this.ctx.save(),t.forEach(function(t){i.path(t),i.ctx.clip()})),e(),t.length&&this.ctx.restore()}},{key:"drawImage",value:function(t,e,i){this.ctx.drawImage(t,e.left,e.top,e.width,e.height,i.left,i.top,i.width,i.height)}},{key:"drawShape",value:function(t,e){this.path(t),this.ctx.fillStyle=e.toString(),this.ctx.fill()}},{key:"fill",value:function(t){this.ctx.fillStyle=t.toString(),this.ctx.fill()}},{key:"getTarget",value:function(){return Promise.resolve(this.canvas)}},{key:"path",value:function(t){var r=this;this.ctx.beginPath(),Array.isArray(t)?t.forEach(function(t,e){var i=t.type===n.PATH.VECTOR?t:t.start;0===e?r.ctx.moveTo(i.x,i.y):r.ctx.lineTo(i.x,i.y),t.type===n.PATH.BEZIER_CURVE&&r.ctx.bezierCurveTo(t.startControl.x,t.startControl.y,t.endControl.x,t.endControl.y,t.end.x,t.end.y)}):this.ctx.arc(t.x+t.radius,t.y+t.radius,t.radius,0,2*Math.PI,!0),this.ctx.closePath()}},{key:"rectangle",value:function(t,e,i,r,n){this.ctx.fillStyle=n.toString(),this.ctx.fillRect(t,e,i,r)}},{key:"renderLinearGradient",value:function(t,e){var i=this.ctx.createLinearGradient(t.left+e.direction.x1,t.top+e.direction.y1,t.left+e.direction.x0,t.top+e.direction.y0);c(e,i),this.ctx.fillStyle=i,this.ctx.fillRect(t.left,t.top,t.width,t.height)}},{key:"renderRadialGradient",value:function(t,e){var i=this,r=t.left+e.center.x,n=t.top+e.center.y,A=this.ctx.createRadialGradient(r,n,0,r,n,e.radius.x);if(A)if(c(e,A),this.ctx.fillStyle=A,e.radius.x!==e.radius.y){var s=t.left+.5*t.width,o=t.top+.5*t.height,a=e.radius.y/e.radius.x,l=1/a;this.transform(s,o,[1,0,0,a,0,0],function(){return i.ctx.fillRect(t.left,l*(t.top-o)+o,t.width,t.height*l)})}else this.ctx.fillRect(t.left,t.top,t.width,t.height)}},{key:"renderRepeat",value:function(t,e,i,r,n){this.path(t),this.ctx.fillStyle=this.ctx.createPattern(this.resizeImage(e,i),"repeat"),this.ctx.translate(r,n),this.ctx.fill(),this.ctx.translate(-r,-n)}},{key:"renderTextNode",value:function(t,e,A,i,s){var o=this;this.ctx.font=[A.fontStyle,A.fontVariant,A.fontWeight,A.fontSize,A.fontFamily].join(" "),t.forEach(function(r){if(o.ctx.fillStyle=e.toString(),s&&r.text.trim().length?s.slice(0).reverse().forEach(function(t){o.ctx.shadowColor=t.color.toString(),o.ctx.shadowOffsetX=t.offsetX*o.options.scale,o.ctx.shadowOffsetY=t.offsetY*o.options.scale,o.ctx.shadowBlur=t.blur,o.ctx.fillText(r.text,r.bounds.left,r.bounds.top+r.bounds.height)}):o.ctx.fillText(r.text,r.bounds.left,r.bounds.top+r.bounds.height),null!==i){var n=i.textDecorationColor||e;i.textDecorationLine.forEach(function(t){switch(t){case a.TEXT_DECORATION_LINE.UNDERLINE:var e=o.options.fontMetrics.getMetrics(A).baseline;o.rectangle(r.bounds.left,Math.round(r.bounds.top+r.bounds.height-e),r.bounds.width,1,n);break;case a.TEXT_DECORATION_LINE.OVERLINE:o.rectangle(r.bounds.left,Math.round(r.bounds.top),r.bounds.width,1,n);break;case a.TEXT_DECORATION_LINE.LINE_THROUGH:var i=o.options.fontMetrics.getMetrics(A).middle;o.rectangle(r.bounds.left,Math.ceil(r.bounds.top+i),r.bounds.width,1,n)}})}})}},{key:"resizeImage",value:function(t,e){if(t.width===e.width&&t.height===e.height)return t;var i=this.canvas.ownerDocument.createElement("canvas");return i.width=e.width,i.height=e.height,i.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,e.width,e.height),i}},{key:"setOpacity",value:function(t){this.ctx.globalAlpha=t}},{key:"transform",value:function(t,e,i,r){this.ctx.save(),this.ctx.translate(t,e),this.ctx.transform(i[0],i[1],i[2],i[3],i[4],i[5]),this.ctx.translate(-t,-e),r(),this.ctx.restore()}}]),i}();e.default=A},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function r(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}}(),r=function(){function r(t,e,i){!function(t,e){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this),this.enabled=t,this.start=i||Date.now(),this.id=e}return n(r,[{key:"child",value:function(t){return new r(this.enabled,t,this.start)}},{key:"log",value:function(){if(this.enabled&&window.console&&window.console.log){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];Function.prototype.bind.call(window.console.log,window.console).apply(window.console,[Date.now()-this.start+"ms",this.id?"html2canvas ("+this.id+"):":"html2canvas:"].concat([].slice.call(e,0)))}}},{key:"error",value:function(){if(this.enabled&&window.console&&window.console.error){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];Function.prototype.bind.call(window.console.error,window.console).apply(window.console,[Date.now()-this.start+"ms",this.id?"html2canvas ("+this.id+"):":"html2canvas:"].concat([].slice.call(e,0)))}}}]),r}();e.default=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parsePadding=e.PADDING_SIDES=void 0;var r,n=(r=i(2))&&r.__esModule?r:{default:r},A=(e.PADDING_SIDES={TOP:0,RIGHT:1,BOTTOM:2,LEFT:3},["top","right","bottom","left"]);e.parsePadding=function(e){return A.map(function(t){return new n.default(e.getPropertyValue("padding-"+t))})}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=e.OVERFLOW_WRAP={NORMAL:0,BREAK_WORD:1};e.parseOverflowWrap=function(t){switch(t){case"break-word":return r.BREAK_WORD;case"normal":default:return r.NORMAL}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=e.POSITION={STATIC:0,RELATIVE:1,ABSOLUTE:2,FIXED:3,STICKY:4};e.parsePosition=function(t){switch(t){case"relative":return r.RELATIVE;case"absolute":return r.ABSOLUTE;case"fixed":return r.FIXED;case"sticky":return r.STICKY}return r.STATIC}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=e.TEXT_TRANSFORM={NONE:0,LOWERCASE:1,UPPERCASE:2,CAPITALIZE:3};e.parseTextTransform=function(t){switch(t){case"uppercase":return r.UPPERCASE;case"lowercase":return r.LOWERCASE;case"capitalize":return r.CAPITALIZE}return r.NONE}},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.reformatInputBounds=e.inlineSelectElement=e.inlineTextAreaElement=e.inlineInputElement=e.getInputBorderRadius=e.INPUT_BACKGROUND=e.INPUT_BORDERS=e.INPUT_COLOR=void 0;var o=r(i(9)),n=i(5),A=i(12),s=r(i(50)),a=r(i(7)),l=r(i(0)),c=r(i(2)),h=(i(1),i(22),i(4)),u=(e.INPUT_COLOR=new l.default([42,42,42]),new l.default([165,165,165])),f=new l.default([222,222,222]),d={borderWidth:1,borderColor:u,borderStyle:A.BORDER_STYLE.SOLID},g=(e.INPUT_BORDERS=[d,d,d,d],e.INPUT_BACKGROUND={backgroundColor:f,backgroundImage:[],backgroundClip:n.BACKGROUND_CLIP.PADDING_BOX,backgroundOrigin:n.BACKGROUND_ORIGIN.PADDING_BOX},new c.default("50%")),p=[g,g],B=[p,p,p,p],m=new c.default("3px"),v=[m,m],w=[v,v,v,v],C=(e.getInputBorderRadius=function(t){return"radio"===t.type?B:w},e.inlineInputElement=function(t,e){if("radio"===t.type||"checkbox"===t.type){if(t.checked){var i=Math.min(e.bounds.width,e.bounds.height);e.childNodes.push("checkbox"===t.type?[new a.default(e.bounds.left+.39363*i,e.bounds.top+.79*i),new a.default(e.bounds.left+.16*i,e.bounds.top+.5549*i),new a.default(e.bounds.left+.27347*i,e.bounds.top+.44071*i),new a.default(e.bounds.left+.39694*i,e.bounds.top+.5649*i),new a.default(e.bounds.left+.72983*i,e.bounds.top+.23*i),new a.default(e.bounds.left+.84*i,e.bounds.top+.34085*i),new a.default(e.bounds.left+.39363*i,e.bounds.top+.79*i)]:new s.default(e.bounds.left+i/4,e.bounds.top+i/4,i/4))}}else C(b(t),t,e,!1)},e.inlineTextAreaElement=function(t,e){C(t.value,t,e,!0)},e.inlineSelectElement=function(t,e){var i=t.options[t.selectedIndex||0];C(i&&i.text||"",t,e,!1)},e.reformatInputBounds=function(t){return t.width>t.height?(t.left+=(t.width-t.height)/2,t.width=t.height):t.width<t.height&&(t.top+=(t.height-t.width)/2,t.height=t.width),t},function(t,e,i,r){var n=e.ownerDocument.body;if(0<t.length&&n){var A=e.ownerDocument.createElement("html2canvaswrapper");(0,h.copyCSSStyles)(e.ownerDocument.defaultView.getComputedStyle(e,null),A),A.style.position="absolute",A.style.left=i.bounds.left+"px",A.style.top=i.bounds.top+"px",r||(A.style.whiteSpace="nowrap");var s=e.ownerDocument.createTextNode(t);A.appendChild(s),n.appendChild(A),i.childNodes.push(o.default.fromTextNode(s,i)),n.removeChild(A)}}),b=function(t){var e="password"===t.type?new Array(t.value.length+1).join(""):t.value;return 0===e.length?t.placeholder||"":e}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseTextBounds=e.TextBounds=void 0;var r,s=i(1),f=i(11),d=(r=i(10))&&r.__esModule?r:{default:r},g=i(24),p=e.TextBounds=function i(t,e){!function(t,e){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this),this.text=t,this.bounds=e},B=(e.parseTextBounds=function(t,e,i){for(var r=0!==e.style.letterSpacing?(0,g.toCodePoints)(t).map(function(t){return(0,g.fromCodePoint)(t)}):(0,g.breakWords)(t,e),n=r.length,A=i.parentNode?i.parentNode.ownerDocument.defaultView:null,s=A?A.pageXOffset:0,o=A?A.pageYOffset:0,a=[],l=0,c=0;c<n;c++){var h=r[c];if(e.style.textDecoration!==f.TEXT_DECORATION.NONE||0<h.trim().length)if(d.default.SUPPORT_RANGE_BOUNDS)a.push(new p(h,m(i,l,h.length,s,o)));else{var u=i.splitText(h.length);a.push(new p(h,B(i,s,o))),i=u}else d.default.SUPPORT_RANGE_BOUNDS||(i=i.splitText(h.length));l+=h.length}return a},function(t,e,i){var r=t.ownerDocument.createElement("html2canvaswrapper");r.appendChild(t.cloneNode(!0));var n=t.parentNode;if(n){n.replaceChild(r,t);var A=(0,s.parseBounds)(r,e,i);return r.firstChild&&n.replaceChild(r.firstChild,r),A}return new s.Bounds(0,0,0,0)}),m=function(t,e,i,r,n){var A=t.ownerDocument.createRange();return A.setStart(t,e),A.setEnd(t,e+i),s.Bounds.fromClientRect(A.getBoundingClientRect(),r,n)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function r(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}}(),n=function(){function i(t){!function(t,e){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this),this.element=t}return r(i,[{key:"render",value:function(e){var i=this;this.options=e,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.width=Math.floor(e.width)*e.scale,this.canvas.height=Math.floor(e.height)*e.scale,this.canvas.style.width=e.width+"px",this.canvas.style.height=e.height+"px",e.logger.log("ForeignObject renderer initialized ("+e.width+"x"+e.height+" at "+e.x+","+e.y+") with scale "+e.scale);var t=A(Math.max(e.windowWidth,e.width)*e.scale,Math.max(e.windowHeight,e.height)*e.scale,e.scrollX*e.scale,e.scrollY*e.scale,this.element);return s(t).then(function(t){return e.backgroundColor&&(i.ctx.fillStyle=e.backgroundColor.toString(),i.ctx.fillRect(0,0,e.width*e.scale,e.height*e.scale)),i.ctx.drawImage(t,-e.x*e.scale,-e.y*e.scale),i.canvas})}}]),i}();e.default=n;var A=e.createForeignObjectSVG=function(t,e,i,r,n){var A="http://www.w3.org/2000/svg",s=document.createElementNS(A,"svg"),o=document.createElementNS(A,"foreignObject");return s.setAttributeNS(null,"width",t),s.setAttributeNS(null,"height",e),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",i),o.setAttributeNS(null,"y",r),o.setAttributeNS(null,"externalResourcesRequired","true"),s.appendChild(o),o.appendChild(n),s},s=e.loadSerializedSVG=function(r){return new Promise(function(t,e){var i=new Image;i.onload=function(){return t(i)},i.onerror=e,i.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(r))})}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.breakWords=e.fromCodePoint=e.toCodePoints=void 0;var r,A=i(46);Object.defineProperty(e,"toCodePoints",{enumerable:!0,get:function(){return A.toCodePoints}}),Object.defineProperty(e,"fromCodePoint",{enumerable:!0,get:function(){return A.fromCodePoint}}),(r=i(3))&&r.__esModule;var s=i(18);e.breakWords=function(t,e){for(var i=(0,A.LineBreaker)(t,{lineBreak:e.style.lineBreak,wordBreak:e.style.overflowWrap===s.OVERFLOW_WRAP.BREAK_WORD?"break-word":e.style.wordBreak}),r=[],n=void 0;!(n=i.next()).done;)r.push(n.value.slice());return r}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FontMetrics=void 0;var r=function(){function r(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}}(),o=i(4);e.FontMetrics=function(){function i(t){!function(t,e){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this),this._data={},this._document=t}return r(i,[{key:"_parseMetrics",value:function(t){var e=this._document.createElement("div"),i=this._document.createElement("img"),r=this._document.createElement("span"),n=this._document.body;if(!n)throw new Error("");e.style.visibility="hidden",e.style.fontFamily=t.fontFamily,e.style.fontSize=t.fontSize,e.style.margin="0",e.style.padding="0",n.appendChild(e),i.src=o.SMALL_IMAGE,i.width=1,i.height=1,i.style.margin="0",i.style.padding="0",i.style.verticalAlign="baseline",r.style.fontFamily=t.fontFamily,r.style.fontSize=t.fontSize,r.style.margin="0",r.style.padding="0",r.appendChild(this._document.createTextNode("Hidden Text")),e.appendChild(r),e.appendChild(i);var A=i.offsetTop-r.offsetTop+2;e.removeChild(r),e.appendChild(this._document.createTextNode("Hidden Text")),e.style.lineHeight="normal",i.style.verticalAlign="super";var s=i.offsetTop-e.offsetTop+2;return n.removeChild(e),{baseline:A,middle:s}}},{key:"getMetrics",value:function(t){var e=t.fontFamily+" "+t.fontSize;return void 0===this._data[e]&&(this._data[e]=this._parseMetrics(t)),this._data[e]}}]),i}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Proxy=void 0;var r,a=(r=i(10))&&r.__esModule?r:{default:r};e.Proxy=function(A,s){if(!s.proxy)return Promise.reject(null);var o=s.proxy;return new Promise(function(e,i){var r=a.default.SUPPORT_CORS_XHR&&a.default.SUPPORT_RESPONSE_TYPE?"blob":"text",n=a.default.SUPPORT_CORS_XHR?new XMLHttpRequest:new XDomainRequest;if(n.onload=function(){if(n instanceof XMLHttpRequest)if(200===n.status)if("text"===r)e(n.response);else{var t=new FileReader;t.addEventListener("load",function(){return e(t.result)},!1),t.addEventListener("error",function(t){return i(t)},!1),t.readAsDataURL(n.response)}else i("");else e(n.responseText)},n.onerror=i,n.open("GET",o+"?url="+encodeURIComponent(A)+"&responseType="+r),"text"!==r&&n instanceof XMLHttpRequest&&(n.responseType=r),s.imageTimeout){var t=s.imageTimeout;n.timeout=t,n.ontimeout=function(){return i("")}}n.send()})}},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p=r(i(15)),B=r(i(16)),m=i(28),v=i(1),n=function(t,e){"object"===("undefined"==typeof console?"undefined":g(console))&&"function"==typeof console.log&&console.log("html2canvas 1.0.0-alpha.8");var i=e||{},r=new B.default("boolean"!=typeof i.logging||i.logging),n=t.ownerDocument;if(!n)return Promise.reject("Provided element is not within a Document");var A=n.defaultView,s=A.pageXOffset,o=A.pageYOffset,a="HTML"===t.tagName||"BODY"===t.tagName?(0,v.parseDocumentSize)(n):(0,v.parseBounds)(t,s,o),l=a.width,c=a.height,h=a.left,u=a.top,f={async:!0,allowTaint:!1,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,scale:A.devicePixelRatio||1,target:new p.default(i.canvas),useCORS:!1,x:h,y:u,width:Math.ceil(l),height:Math.ceil(c),windowWidth:A.innerWidth,windowHeight:A.innerHeight,scrollX:A.pageXOffset,scrollY:A.pageYOffset};return(0,m.renderElement)(t,d({},f,i),r)};n.CanvasRenderer=p.default,t.exports=n},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.renderElement=void 0;var c=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],r=!0,n=!1,A=void 0;try{for(var s,o=t[Symbol.iterator]();!(r=(s=o.next()).done)&&(i.push(s.value),!e||i.length!==e);r=!0);}catch(t){n=!0,A=t}finally{try{!r&&o.return&&o.return()}finally{if(n)throw A}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},h=(r(i(16)),i(29)),u=r(i(51)),s=r(i(23)),f=r(i(10)),d=i(1),g=i(54),p=i(25),B=i(0),m=r(B);e.renderElement=function i(r,o,a){var n=r.ownerDocument,A=new d.Bounds(o.scrollX,o.scrollY,o.windowWidth,o.windowHeight),t=n.documentElement?new m.default(getComputedStyle(n.documentElement).backgroundColor):B.TRANSPARENT,e=n.body?new m.default(getComputedStyle(n.body).backgroundColor):B.TRANSPARENT,l=r===n.documentElement?t.isTransparent()?e.isTransparent()?o.backgroundColor?new m.default(o.backgroundColor):null:e:t:o.backgroundColor?new m.default(o.backgroundColor):null;return(o.foreignObjectRendering?f.default.SUPPORT_FOREIGNOBJECT_DRAWING:Promise.resolve(!1)).then(function(t){return t?(e=new g.DocumentCloner(r,o,a,!0,i)).inlineFonts(n).then(function(){return e.resourceLoader.ready()}).then(function(){return new s.default(e.documentElement).render({backgroundColor:l,logger:a,scale:o.scale,x:o.x,y:o.y,width:o.width,height:o.height,windowWidth:o.windowWidth,windowHeight:o.windowHeight,scrollX:o.scrollX,scrollY:o.scrollY})}):(0,g.cloneWindow)(n,A,r,o,a,i).then(function(t){var e=c(t,3),n=e[0],i=e[1],r=e[2],A=(0,h.NodeParser)(i,r,a),s=i.ownerDocument;return l===A.container.style.background.backgroundColor&&(A.container.style.background.backgroundColor=B.TRANSPARENT),r.ready().then(function(t){var e=new p.FontMetrics(s),i={backgroundColor:l,fontMetrics:e,imageStore:t,logger:a,scale:o.scale,x:o.x,y:o.y,width:o.width,height:o.height};if(Array.isArray(o.target))return Promise.all(o.target.map(function(t){return new u.default(t,i).render(A)}));var r=new u.default(o.target,i).render(A);return!0===o.removeContainer&&n.parentNode&&n.parentNode.removeChild(n),r})});var e})}},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.NodeParser=void 0;var m=r(i(30)),v=r(i(3)),w=r(i(9)),C=i(21),b=i(14),_=i(8),y=(e.NodeParser=function(t,e,i){var r=0,n=new v.default(t,null,e,r++),A=new m.default(n,null,!0);return s(t,n,A,e,1),A},["SCRIPT","HEAD","TITLE","OBJECT","BR","OPTION"]),s=function t(e,i,r,n,A){for(var s,o=e.firstChild;o;o=s){s=o.nextSibling;var a=o.ownerDocument.defaultView;if(o instanceof a.Text||o instanceof Text||a.parent&&o instanceof a.parent.Text)0<o.data.trim().length&&i.childNodes.push(w.default.fromTextNode(o,i));else if(o instanceof a.HTMLElement||o instanceof HTMLElement||a.parent&&o instanceof a.parent.HTMLElement){if(-1===y.indexOf(o.nodeName)){var l=new v.default(o,i,n,A++);if(l.isVisible()){"INPUT"===o.tagName?(0,C.inlineInputElement)(o,l):"TEXTAREA"===o.tagName?(0,C.inlineTextAreaElement)(o,l):"SELECT"===o.tagName?(0,C.inlineSelectElement)(o,l):l.style.listStyle&&l.style.listStyle.listStyleType!==_.LIST_STYLE_TYPE.NONE&&(0,b.inlineListItemElement)(o,l,n);var c="TEXTAREA"!==o.tagName,h=E(l,o);if(h||Q(l)){var u=h||l.isPositioned()?r.getRealParentStackingContext():r,f=new m.default(l,u,h);u.contexts.push(f),c&&t(o,l,f,n,A)}else r.children.push(l),c&&t(o,l,r,n,A)}}}else if(o instanceof a.SVGSVGElement||o instanceof SVGSVGElement||a.parent&&o instanceof a.parent.SVGSVGElement){var d=new v.default(o,i,n,A++),g=E(d,o);if(g||Q(d)){var p=g||d.isPositioned()?r.getRealParentStackingContext():r,B=new m.default(d,p,g);p.contexts.push(B)}else r.children.push(d)}}},E=function(t,e){return t.isRootElement()||t.isPositionedWithZIndex()||t.style.opacity<1||t.isTransformed()||n(t,e)},Q=function(t){return t.isPositioned()||t.isFloating()},n=function(t,e){return"BODY"===e.nodeName&&t.parent instanceof v.default&&t.parent.style.background.backgroundColor.isTransparent()}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,n=function(){function r(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}}(),A=((r=i(3))&&r.__esModule,i(19),function(){function r(t,e,i){!function(t,e){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this),this.container=t,this.parent=e,this.contexts=[],this.children=[],this.treatAsRealStackingContext=i}return n(r,[{key:"getOpacity",value:function(){return this.parent?this.container.style.opacity*this.parent.getOpacity():this.container.style.opacity}},{key:"getRealParentStackingContext",value:function(){return!this.parent||this.treatAsRealStackingContext?this:this.parent.getRealParentStackingContext()}}]),r}());e.default=A},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function i(t,e){!function(t,e){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this),this.width=t,this.height=e}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,n=function(){function r(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}}(),A=i(6),s=(r=i(7))&&r.__esModule?r:{default:r},l=function(t,e,i){return new s.default(t.x+(e.x-t.x)*i,t.y+(e.y-t.y)*i)},o=function(){function a(t,e,i,r){!function(t,e){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this),this.type=A.PATH.BEZIER_CURVE,this.start=t,this.startControl=e,this.endControl=i,this.end=r}return n(a,[{key:"subdivide",value:function(t,e){var i=l(this.start,this.startControl,t),r=l(this.startControl,this.endControl,t),n=l(this.endControl,this.end,t),A=l(i,r,t),s=l(r,n,t),o=l(A,s,t);return e?new a(this.start,i,A,o):new a(o,s,n,this.end)}},{key:"reverse",value:function(){return new a(this.end,this.endControl,this.startControl,this.start)}}]),a}();e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseBorderRadius=void 0;var r,s=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],r=!0,n=!1,A=void 0;try{for(var s,o=t[Symbol.iterator]();!(r=(s=o.next()).done)&&(i.push(s.value),!e||i.length!==e);r=!0);}catch(t){n=!0,A=t}finally{try{!r&&o.return&&o.return()}finally{if(n)throw A}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=(r=i(2))&&r.__esModule?r:{default:r},n=["top-left","top-right","bottom-right","bottom-left"];e.parseBorderRadius=function(A){return n.map(function(t){var e=A.getPropertyValue("border-"+t+"-radius").split(" ").map(o.default.create),i=s(e,2),r=i[0],n=i[1];return void 0===n?[r,r]:[r,n]})}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=e.DISPLAY={NONE:1,BLOCK:2,INLINE:4,RUN_IN:8,FLOW:16,FLOW_ROOT:32,TABLE:64,FLEX:128,GRID:256,RUBY:512,SUBGRID:1024,LIST_ITEM:2048,TABLE_ROW_GROUP:4096,TABLE_HEADER_GROUP:8192,TABLE_FOOTER_GROUP:16384,TABLE_ROW:32768,TABLE_CELL:65536,TABLE_COLUMN_GROUP:1<<17,TABLE_COLUMN:1<<18,TABLE_CAPTION:1<<19,RUBY_BASE:1<<20,RUBY_TEXT:1<<21,RUBY_BASE_CONTAINER:1<<22,RUBY_TEXT_CONTAINER:1<<23,CONTENTS:1<<24,INLINE_BLOCK:1<<25,INLINE_LIST_ITEM:1<<26,INLINE_TABLE:1<<27,INLINE_FLEX:1<<28,INLINE_GRID:1<<29},n=function(t,e){return t|function(t){switch(e){case"block":return r.BLOCK;case"inline":return r.INLINE;case"run-in":return r.RUN_IN;case"flow":return r.FLOW;case"flow-root":return r.FLOW_ROOT;case"table":return r.TABLE;case"flex":return r.FLEX;case"grid":return r.GRID;case"ruby":return r.RUBY;case"subgrid":return r.SUBGRID;case"list-item":return r.LIST_ITEM;case"table-row-group":return r.TABLE_ROW_GROUP;case"table-header-group":return r.TABLE_HEADER_GROUP;case"table-footer-group":return r.TABLE_FOOTER_GROUP;case"table-row":return r.TABLE_ROW;case"table-cell":return r.TABLE_CELL;case"table-column-group":return r.TABLE_COLUMN_GROUP;case"table-column":return r.TABLE_COLUMN;case"table-caption":return r.TABLE_CAPTION;case"ruby-base":return r.RUBY_BASE;case"ruby-text":return r.RUBY_TEXT;case"ruby-base-container":return r.RUBY_BASE_CONTAINER;case"ruby-text-container":return r.RUBY_TEXT_CONTAINER;case"contents":return r.CONTENTS;case"inline-block":return r.INLINE_BLOCK;case"inline-list-item":return r.INLINE_LIST_ITEM;case"inline-table":return r.INLINE_TABLE;case"inline-flex":return r.INLINE_FLEX;case"inline-grid":return r.INLINE_GRID}return r.NONE}()};e.parseDisplay=function(t){return t.split(" ").reduce(n,0)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=e.FLOAT={NONE:0,LEFT:1,RIGHT:2,INLINE_START:3,INLINE_END:4};e.parseCSSFloat=function(t){switch(t){case"left":return r.LEFT;case"right":return r.RIGHT;case"inline-start":return r.INLINE_START;case"inline-end":return r.INLINE_END}return r.NONE}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseFont=function(t){return{fontFamily:t.fontFamily,fontSize:t.fontSize,fontStyle:t.fontStyle,fontVariant:t.fontVariant,fontWeight:function(t){switch(t){case"normal":return 400;case"bold":return 700}var e=parseInt(t,10);return isNaN(e)?400:e}(t.fontWeight)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseLetterSpacing=function(t){if("normal"===t)return 0;var e=parseFloat(t);return isNaN(e)?0:e}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=e.LINE_BREAK={NORMAL:"normal",STRICT:"strict"};e.parseLineBreak=function(t){switch(t){case"strict":return r.STRICT;case"normal":default:return r.NORMAL}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseMargin=void 0;var r,n=(r=i(2))&&r.__esModule?r:{default:r},A=["top","right","bottom","left"];e.parseMargin=function(e){return A.map(function(t){return new n.default(e.getPropertyValue("margin-"+t))})}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=e.OVERFLOW={VISIBLE:0,HIDDEN:1,SCROLL:2,AUTO:3};e.parseOverflow=function(t){switch(t){case"hidden":return r.HIDDEN;case"scroll":return r.SCROLL;case"auto":return r.AUTO;case"visible":default:return r.VISIBLE}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseTextShadow=void 0;var r,h=(r=i(0))&&r.__esModule?r:{default:r},u=/^([+-]|\d|\.)$/i;e.parseTextShadow=function(t){if("none"===t||"string"!=typeof t)return null;for(var e="",i=!1,r=[],n=[],A=0,s=null,o=function(){e.length&&(i?r.push(parseFloat(e)):s=new h.default(e)),i=!1,e=""},a=function(){r.length&&null!==s&&n.push({color:s,offsetX:r[0]||0,offsetY:r[1]||0,blur:r[2]||0}),r.splice(0,r.length),s=null},l=0;l<t.length;l++){var c=t[l];switch(c){case"(":e+=c,A++;break;case")":e+=c,A--;break;case",":0===A?(o(),a()):e+=c;break;case" ":0===A?o():e+=c;break;default:0===e.length&&u.test(c)&&(i=!0),e+=c}}return o(),a(),0===n.length?null:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseTransform=void 0;var r,n=(r=i(2))&&r.__esModule?r:{default:r},A=function(t){return parseFloat(t.trim())},s=/(matrix|matrix3d)\((.+)\)/,o=(e.parseTransform=function(t){var e=a(t.transform||t.webkitTransform||t.mozTransform||t.msTransform||t.oTransform);return null===e?null:{transform:e,transformOrigin:o(t.transformOrigin||t.webkitTransformOrigin||t.mozTransformOrigin||t.msTransformOrigin||t.oTransformOrigin)}},function(t){if("string"!=typeof t){var e=new n.default("0");return[e,e]}var i=t.split(" ").map(n.default.create);return[i[0],i[1]]}),a=function(t){if("none"===t||"string"!=typeof t)return null;var e=t.match(s);if(e){if("matrix"===e[1]){var i=e[2].split(",").map(A);return[i[0],i[1],i[2],i[3],i[4],i[5]]}var r=e[2].split(",").map(A);return[r[0],r[1],r[4],r[5],r[12],r[13]]}return null}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=e.VISIBILITY={VISIBLE:0,HIDDEN:1,COLLAPSE:2};e.parseVisibility=function(t){switch(t){case"hidden":return r.HIDDEN;case"collapse":return r.COLLAPSE;case"visible":default:return r.VISIBLE}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=e.WORD_BREAK={NORMAL:"normal",BREAK_ALL:"break-all",KEEP_ALL:"keep-all"};e.parseWordBreak=function(t){switch(t){case"break-all":return r.BREAK_ALL;case"keep-all":return r.KEEP_ALL;case"normal":default:return r.NORMAL}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseZIndex=function(t){var e="auto"===t;return{auto:e,order:e?0:parseInt(t,10)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(13);Object.defineProperty(e,"toCodePoints",{enumerable:!0,get:function(){return r.toCodePoints}}),Object.defineProperty(e,"fromCodePoint",{enumerable:!0,get:function(){return r.fromCodePoint}});var n=i(47);Object.defineProperty(e,"LineBreaker",{enumerable:!0,get:function(){return n.LineBreaker}})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LineBreaker=e.inlineBreakOpportunities=e.lineBreakAtIndex=e.codePointsToCharacterClasses=e.UnicodeTrie=e.BREAK_ALLOWED=e.BREAK_NOT_ALLOWED=e.BREAK_MANDATORY=e.classes=e.LETTER_NUMBER_MODIFIER=void 0;var r,A=function(){function r(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}}(),h=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],r=!0,n=!1,A=void 0;try{for(var s,o=t[Symbol.iterator]();!(r=(s=o.next()).done)&&(i.push(s.value),!e||i.length!==e);r=!0);}catch(t){n=!0,A=t}finally{try{!r&&o.return&&o.return()}finally{if(n)throw A}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=i(48),s=(r=i(49))&&r.__esModule?r:{default:r},u=i(13),a=e.LETTER_NUMBER_MODIFIER=50,B=10,m=13,v=15,w=17,C=18,b=19,_=20,y=21,E=22,Q=24,F=25,U=26,T=27,S=28,l=30,x=32,O=33,H=34,I=35,D=37,k=38,L=39,N=40,c=42,M=(e.classes={BK:1,CR:2,LF:3,CM:4,NL:5,SG:6,WJ:7,ZW:8,GL:9,SP:B,ZWJ:11,B2:12,BA:m,BB:14,HY:v,CB:16,CL:w,CP:C,EX:b,IN:_,NS:y,OP:E,QU:23,IS:Q,NU:F,PO:U,PR:T,SY:S,AI:29,AL:l,CJ:31,EB:x,EM:O,H2:H,H3:I,HL:36,ID:D,JL:k,JV:L,JT:N,RI:41,SA:c,XX:43},e.BREAK_MANDATORY="!"),P=e.BREAK_NOT_ALLOWED="",R=e.BREAK_ALLOWED="",K=e.UnicodeTrie=(0,n.createTrieFromBase64)(s.default),j=[l,36],z=[1,2,3,5],X=[B,8],V=[T,U],f=z.concat(X),G=[k,L,N,H,I],Y=[v,m],o=e.codePointsToCharacterClasses=function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"strict",A=[],s=[],o=[];return t.forEach(function(t,e){var i=K.get(t);if(a<i?(o.push(!0),i-=a):o.push(!1),-1!==["normal","auto","loose"].indexOf(n)&&-1!==[8208,8211,12316,12448].indexOf(t))return s.push(e),A.push(16);if(4===i||11===i){if(0===e)return s.push(e),A.push(l);var r=A[e-1];return-1===f.indexOf(r)?(s.push(s[e-1]),A.push(r)):(s.push(e),A.push(l))}return s.push(e),31===i?A.push("strict"===n?y:D):i===c?A.push(l):29===i?A.push(l):43===i?131072<=t&&t<=196605||196608<=t&&t<=262141?A.push(D):A.push(l):void A.push(i)}),[s,A,o]},W=function(t,e,i,r){var n=r[i];if(Array.isArray(t)?-1!==t.indexOf(n):t===n)for(var A=i;A<=r.length;){var s=r[++A];if(s===e)return!0;if(s!==B)break}if(n===B)for(var o=i;0<o;){var a=r[--o];if(Array.isArray(t)?-1!==t.indexOf(a):t===a)for(var l=i;l<=r.length;){var c=r[++l];if(c===e)return!0;if(c!==B)break}if(a!==B)break}return!1},J=function(t,e){for(var i=t;0<=i;){var r=e[i];if(r!==B)return r;i--}return 0},d=function(t,e,i,r,n){if(0===i[r])return P;var A=r-1;if(Array.isArray(n)&&!0===n[A])return P;var s=A-1,o=A+1,a=e[A],l=0<=s?e[s]:0,c=e[o];if(2===a&&3===c)return P;if(-1!==z.indexOf(a))return M;if(-1!==z.indexOf(c))return P;if(-1!==X.indexOf(c))return P;if(8===J(A,e))return R;if(11===K.get(t[A])&&(c===D||c===x||c===O))return P;if(7===a||7===c)return P;if(9===a)return P;if(-1===[B,m,v].indexOf(a)&&9===c)return P;if(-1!==[w,C,b,Q,S].indexOf(c))return P;if(J(A,e)===E)return P;if(W(23,E,A,e))return P;if(W([w,C],y,A,e))return P;if(W(12,12,A,e))return P;if(a===B)return R;if(23===a||23===c)return P;if(16===c||16===a)return R;if(-1!==[m,v,y].indexOf(c)||14===a)return P;if(36===l&&-1!==Y.indexOf(a))return P;if(a===S&&36===c)return P;if(c===_&&-1!==j.concat(_,b,F,D,x,O).indexOf(a))return P;if(-1!==j.indexOf(c)&&a===F||-1!==j.indexOf(a)&&c===F)return P;if(a===T&&-1!==[D,x,O].indexOf(c)||-1!==[D,x,O].indexOf(a)&&c===U)return P;if(-1!==j.indexOf(a)&&-1!==V.indexOf(c)||-1!==V.indexOf(a)&&-1!==j.indexOf(c))return P;if(-1!==[T,U].indexOf(a)&&(c===F||-1!==[E,v].indexOf(c)&&e[o+1]===F)||-1!==[E,v].indexOf(a)&&c===F||a===F&&-1!==[F,S,Q].indexOf(c))return P;if(-1!==[F,S,Q,w,C].indexOf(c))for(var h=A;0<=h;){var u=e[h];if(u===F)return P;if(-1===[S,Q].indexOf(u))break;h--}if(-1!==[T,U].indexOf(c))for(var f=-1!==[w,C].indexOf(a)?s:A;0<=f;){var d=e[f];if(d===F)return P;if(-1===[S,Q].indexOf(d))break;f--}if(k===a&&-1!==[k,L,H,I].indexOf(c)||-1!==[L,H].indexOf(a)&&-1!==[L,N].indexOf(c)||-1!==[N,I].indexOf(a)&&c===N)return P;if(-1!==G.indexOf(a)&&-1!==[_,U].indexOf(c)||-1!==G.indexOf(c)&&a===T)return P;if(-1!==j.indexOf(a)&&-1!==j.indexOf(c))return P;if(a===Q&&-1!==j.indexOf(c))return P;if(-1!==j.concat(F).indexOf(a)&&c===E||-1!==j.concat(F).indexOf(c)&&a===C)return P;if(41===a&&41===c){for(var g=i[A],p=1;0<g&&41===e[--g];)p++;if(p%2!=0)return P}return a===x&&c===O?P:R},g=(e.lineBreakAtIndex=function(t,e){if(0===e)return P;if(e>=t.length)return M;var i=o(t),r=h(i,2),n=r[0],A=r[1];return d(t,A,n,e)},function(i,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var e=o(i,t.lineBreak),r=h(e,3),n=r[0],A=r[1],s=r[2];return"break-all"!==t.wordBreak&&"break-word"!==t.wordBreak||(A=A.map(function(t){return-1!==[F,l,c].indexOf(t)?D:t})),[n,A,"keep-all"===t.wordBreak?s.map(function(t,e){return t&&19968<=i[e]&&i[e]<=40959}):null]}),p=(e.inlineBreakOpportunities=function(t,e){var i=(0,u.toCodePoints)(t),r=P,n=g(i,e),A=h(n,3),s=A[0],o=A[1],a=A[2];return i.forEach(function(t,e){r+=(0,u.fromCodePoint)(t)+(e>=i.length-1?M:d(i,o,s,e+1,a))}),r},function(){function n(t,e,i,r){!function(t,e){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this),this._codePoints=t,this.required=e===M,this.start=i,this.end=r}return A(n,[{key:"slice",value:function(){return u.fromCodePoint.apply(void 0,function(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}(this._codePoints.slice(this.start,this.end)))}}]),n}());e.LineBreaker=function(t,e){var i=(0,u.toCodePoints)(t),r=g(i,e),n=h(r,3),A=n[0],s=n[1],o=n[2],a=i.length,l=0,c=0;return{next:function(){if(a<=c)return{done:!0};for(var t=P;c<a&&(t=d(i,s,A,++c,o))===P;);if(t!==P||c===a){var e=new p(i,t,l,c);return l=c,{value:e,done:!1}}return{done:!0}}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Trie=e.createTrieFromBase64=e.UTRIE2_INDEX_2_MASK=e.UTRIE2_INDEX_2_BLOCK_LENGTH=e.UTRIE2_OMITTED_BMP_INDEX_1_LENGTH=e.UTRIE2_INDEX_1_OFFSET=e.UTRIE2_UTF8_2B_INDEX_2_LENGTH=e.UTRIE2_UTF8_2B_INDEX_2_OFFSET=e.UTRIE2_INDEX_2_BMP_LENGTH=e.UTRIE2_LSCP_INDEX_2_LENGTH=e.UTRIE2_DATA_MASK=e.UTRIE2_DATA_BLOCK_LENGTH=e.UTRIE2_LSCP_INDEX_2_OFFSET=e.UTRIE2_SHIFT_1_2=e.UTRIE2_INDEX_SHIFT=e.UTRIE2_SHIFT_1=e.UTRIE2_SHIFT_2=void 0;var r=function(){function r(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}}(),s=i(13),n=e.UTRIE2_SHIFT_2=5,A=e.UTRIE2_SHIFT_1=11,o=e.UTRIE2_INDEX_SHIFT=2,a=e.UTRIE2_SHIFT_1_2=A-n,l=e.UTRIE2_LSCP_INDEX_2_OFFSET=65536>>n,c=e.UTRIE2_DATA_BLOCK_LENGTH=1<<n,h=e.UTRIE2_DATA_MASK=c-1,u=e.UTRIE2_LSCP_INDEX_2_LENGTH=1024>>n,f=e.UTRIE2_INDEX_2_BMP_LENGTH=l+u,d=e.UTRIE2_UTF8_2B_INDEX_2_OFFSET=f,g=e.UTRIE2_UTF8_2B_INDEX_2_LENGTH=32,p=e.UTRIE2_INDEX_1_OFFSET=d+g,B=e.UTRIE2_OMITTED_BMP_INDEX_1_LENGTH=65536>>A,m=e.UTRIE2_INDEX_2_BLOCK_LENGTH=1<<a,v=e.UTRIE2_INDEX_2_MASK=m-1,w=(e.createTrieFromBase64=function(t){var e=(0,s.decode)(t),i=Array.isArray(e)?(0,s.polyUint32Array)(e):new Uint32Array(e),r=Array.isArray(e)?(0,s.polyUint16Array)(e):new Uint16Array(e),n=r.slice(12,i[4]/2),A=2===i[5]?r.slice((24+i[4])/2):i.slice(Math.ceil((24+i[4])/4));return new w(i[0],i[1],i[2],i[3],n,A)},e.Trie=function(){function s(t,e,i,r,n,A){!function(t,e){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}(this),this.initialValue=t,this.errorValue=e,this.highStart=i,this.highValueIndex=r,this.index=n,this.data=A}return r(s,[{key:"get",value:function(t){var e=void 0;if(0<=t){if(t<55296||56319<t&&t<=65535)return e=((e=this.index[t>>n])<<o)+(t&h),this.data[e];if(t<=65535)return e=((e=this.index[l+(t-55296>>n)])<<o)+(t&h),this.data[e];if(t<this.highStart)return e=p-B+(t>>A),e=this.index[e],e+=t>>n&v,e=((e=this.index[e])<<o)+(t&h),this.data[e];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue}}]),s}())},function(t,e,i){"use strict";t.exports="KwAAAAAAAAAACA4AIDoAAPAfAAACAAAAAAAIABAAGABAAEgAUABYAF4AZgBeAGYAYABoAHAAeABeAGYAfACEAIAAiACQAJgAoACoAK0AtQC9AMUAXgBmAF4AZgBeAGYAzQDVAF4AZgDRANkA3gDmAOwA9AD8AAQBDAEUARoBIgGAAIgAJwEvATcBPwFFAU0BTAFUAVwBZAFsAXMBewGDATAAiwGTAZsBogGkAawBtAG8AcIBygHSAdoB4AHoAfAB+AH+AQYCDgIWAv4BHgImAi4CNgI+AkUCTQJTAlsCYwJrAnECeQKBAk0CiQKRApkCoQKoArACuALAAsQCzAIwANQC3ALkAjAA7AL0AvwCAQMJAxADGAMwACADJgMuAzYDPgOAAEYDSgNSA1IDUgNaA1oDYANiA2IDgACAAGoDgAByA3YDfgOAAIQDgACKA5IDmgOAAIAAogOqA4AAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAK8DtwOAAIAAvwPHA88D1wPfAyAD5wPsA/QD/AOAAIAABAQMBBIEgAAWBB4EJgQuBDMEIAM7BEEEXgBJBCADUQRZBGEEaQQwADAAcQQ+AXkEgQSJBJEEgACYBIAAoASoBK8EtwQwAL8ExQSAAIAAgACAAIAAgACgAM0EXgBeAF4AXgBeAF4AXgBeANUEXgDZBOEEXgDpBPEE+QQBBQkFEQUZBSEFKQUxBTUFPQVFBUwFVAVcBV4AYwVeAGsFcwV7BYMFiwWSBV4AmgWgBacFXgBeAF4AXgBeAKsFXgCyBbEFugW7BcIFwgXIBcIFwgXQBdQF3AXkBesF8wX7BQMGCwYTBhsGIwYrBjMGOwZeAD8GRwZNBl4AVAZbBl4AXgBeAF4AXgBeAF4AXgBeAF4AXgBeAGMGXgBqBnEGXgBeAF4AXgBeAF4AXgBeAF4AXgB5BoAG4wSGBo4GkwaAAIADHgR5AF4AXgBeAJsGgABGA4AAowarBrMGswagALsGwwbLBjAA0wbaBtoG3QbaBtoG2gbaBtoG2gblBusG8wb7BgMHCwcTBxsHCwcjBysHMAc1BzUHOgdCB9oGSgdSB1oHYAfaBloHaAfaBlIH2gbaBtoG2gbaBtoG2gbaBjUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHbQdeAF4ANQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQd1B30HNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B4MH2gaKB68EgACAAIAAgACAAIAAgACAAI8HlwdeAJ8HpweAAIAArwe3B14AXgC/B8UHygcwANAH2AfgB4AA6AfwBz4B+AcACFwBCAgPCBcIogEYAR8IJwiAAC8INwg/CCADRwhPCFcIXwhnCEoDGgSAAIAAgABvCHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIhAiLCI4IMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAANQc1BzUHNQc1BzUHNQc1BzUHNQc1B54INQc1B6II2gaqCLIIugiAAIAAvgjGCIAAgACAAIAAgACAAIAAgACAAIAAywiHAYAA0wiAANkI3QjlCO0I9Aj8CIAAgACAAAIJCgkSCRoJIgknCTYHLwk3CZYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiAAIAAAAFAAXgBeAGAAcABeAHwAQACQAKAArQC9AJ4AXgBeAE0A3gBRAN4A7AD8AMwBGgEAAKcBNwEFAUwBXAF4QkhCmEKnArcCgAHHAsABz4LAAcABwAHAAd+C6ABoAG+C/4LAAcABwAHAAc+DF4MAAcAB54M3gweDV4Nng3eDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEeDqABVg6WDqABoQ6gAaABoAHXDvcONw/3DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DncPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB7cPPwlGCU4JMACAAIAAgABWCV4JYQmAAGkJcAl4CXwJgAkwADAAMAAwAIgJgACLCZMJgACZCZ8JowmrCYAAswkwAF4AXgB8AIAAuwkABMMJyQmAAM4JgADVCTAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAqwYWBNkIMAAwADAAMADdCeAJ6AnuCR4E9gkwAP4JBQoNCjAAMACAABUK0wiAAB0KJAosCjQKgAAwADwKQwqAAEsKvQmdCVMKWwowADAAgACAALcEMACAAGMKgABrCjAAMAAwADAAMAAwADAAMAAwADAAMAAeBDAAMAAwADAAMAAwADAAMAAwADAAMAAwAIkEPQFzCnoKiQSCCooKkAqJBJgKoAqkCokEGAGsCrQKvArBCjAAMADJCtEKFQHZCuEK/gHpCvEKMAAwADAAMACAAIwE+QowAIAAPwEBCzAAMAAwADAAMACAAAkLEQswAIAAPwEZCyELgAAOCCkLMAAxCzkLMAAwADAAMAAwADAAXgBeAEELMAAwADAAMAAwADAAMAAwAEkLTQtVC4AAXAtkC4AAiQkwADAAMAAwADAAMAAwADAAbAtxC3kLgAuFC4sLMAAwAJMLlwufCzAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAApwswADAAMACAAIAAgACvC4AAgACAAIAAgACAALcLMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAvwuAAMcLgACAAIAAgACAAIAAyguAAIAAgACAAIAA0QswADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAANkLgACAAIAA4AswADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACJCR4E6AswADAAhwHwC4AA+AsADAgMEAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMACAAIAAGAwdDCUMMAAwAC0MNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQw1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHPQwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADUHNQc1BzUHNQc1BzUHNQc2BzAAMAA5DDUHNQc1BzUHNQc1BzUHNQc1BzUHNQdFDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAATQxSDFoMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAF4AXgBeAF4AXgBeAF4AYgxeAGoMXgBxDHkMfwxeAIUMXgBeAI0MMAAwADAAMAAwAF4AXgCVDJ0MMAAwADAAMABeAF4ApQxeAKsMswy7DF4Awgy9DMoMXgBeAF4AXgBeAF4AXgBeAF4AXgDRDNkMeQBqCeAM3Ax8AOYM7Az0DPgMXgBeAF4AXgBeAF4AXgBeAF4AXgBeAF4AXgBeAF4AXgCgAAANoAAHDQ4NFg0wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAeDSYNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAC4NMABeAF4ANg0wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAD4NRg1ODVYNXg1mDTAAbQ0wADAAMAAwADAAMAAwADAA2gbaBtoG2gbaBtoG2gbaBnUNeg3CBYANwgWFDdoGjA3aBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gaUDZwNpA2oDdoG2gawDbcNvw3HDdoG2gbPDdYN3A3fDeYN2gbsDfMN2gbaBvoN/g3aBgYODg7aBl4AXgBeABYOXgBeACUG2gYeDl4AJA5eACwO2w3aBtoGMQ45DtoG2gbaBtoGQQ7aBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gZJDjUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B1EO2gY1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQdZDjUHNQc1BzUHNQc1B2EONQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHaA41BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B3AO2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gY1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B2EO2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gZJDtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBkkOeA6gAKAAoAAwADAAMAAwAKAAoACgAKAAoACgAKAAgA4wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAD//wQABAAEAAQABAAEAAQABAAEAA0AAwABAAEAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAKABMAFwAeABsAGgAeABcAFgASAB4AGwAYAA8AGAAcAEsASwBLAEsASwBLAEsASwBLAEsAGAAYAB4AHgAeABMAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAFgAbABIAHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYADQARAB4ABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkAFgAaABsAGwAbAB4AHQAdAB4ATwAXAB4ADQAeAB4AGgAbAE8ATwAOAFAAHQAdAB0ATwBPABcATwBPAE8AFgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwArAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAAQABAANAA0ASwBLAEsASwBLAEsASwBLAEsASwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUAArACsABABQAAQABAAEAAQABAAEAAQAKwArAAQABAArACsABAAEAAQAUAArACsAKwArACsAKwArACsABAArACsAKwArAFAAUAArAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAGgAaAFAAUABQAFAAUABMAB4AGwBQAB4AKwArACsABAAEAAQAKwBQAFAAUABQAFAAUAArACsAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUAArAFAAUAArACsABAArAAQABAAEAAQABAArACsAKwArAAQABAArACsABAAEAAQAKwArACsABAArACsAKwArACsAKwArAFAAUABQAFAAKwBQACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwAEAAQAUABQAFAABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUAArACsABABQAAQABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQAKwArAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwAeABsAKwArACsAKwArACsAKwBQAAQABAAEAAQABAAEACsABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwArAAQABAArACsABAAEAAQAKwArACsAKwArACsAKwArAAQABAArACsAKwArAFAAUAArAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwAeAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwAEAFAAKwBQAFAAUABQAFAAUAArACsAKwBQAFAAUAArAFAAUABQAFAAKwArACsAUABQACsAUAArAFAAUAArACsAKwBQAFAAKwArACsAUABQAFAAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQAKwArACsABAAEAAQAKwAEAAQABAAEACsAKwBQACsAKwArACsAKwArAAQAKwArACsAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAB4AHgAeAB4AHgAeABsAHgArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABAArACsAKwArACsAKwArAAQABAArAFAAUABQACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAB4AUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABAArACsAKwArACsAKwArAAQABAArACsAKwArACsAKwArAFAAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwArAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAKwBcAFwAKwBcACsAKwBcACsAKwArACsAKwArAFwAXABcAFwAKwBcAFwAXABcAFwAXABcACsAXABcAFwAKwBcACsAXAArACsAXABcACsAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgArACoAKgBcACsAKwBcAFwAXABcAFwAKwBcACsAKgAqACoAKgAqACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAFwAXABcAFwAUAAOAA4ADgAOAB4ADgAOAAkADgAOAA0ACQATABMAEwATABMACQAeABMAHgAeAB4ABAAEAB4AHgAeAB4AHgAeAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUAANAAQAHgAEAB4ABAAWABEAFgARAAQABABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAAQABAAEAAQABAANAAQABABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsADQANAB4AHgAeAB4AHgAeAAQAHgAeAB4AHgAeAB4AKwAeAB4ADgAOAA0ADgAeAB4AHgAeAB4ACQAJACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgAeAB4AHgBcAFwAXABcAFwAXAAqACoAKgAqAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAKgAqACoAKgAqACoAKgBcAFwAXAAqACoAKgAqAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAXAAqAEsASwBLAEsASwBLAEsASwBLAEsAKgAqACoAKgAqACoAUABQAFAAUABQAFAAKwBQACsAKwArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQACsAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwAEAAQABAAeAA0AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAEQArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAADQANAA0AUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAA0ADQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoADQANABUAXAANAB4ADQAbAFwAKgArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAB4AHgATABMADQANAA4AHgATABMAHgAEAAQABAAJACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAUABQAFAAUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwAeACsAKwArABMAEwBLAEsASwBLAEsASwBLAEsASwBLAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwBcAFwAXABcAFwAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcACsAKwArACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwAeAB4AXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgArACsABABLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKgAqACoAKgAqACoAKgBcACoAKgAqACoAKgAqACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAUABQAFAAUABQAFAAUAArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4ADQANAA0ADQAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAHgAeAB4AHgBQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwANAA0ADQANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwBQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsABAAEAAQAHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAABABQAFAAUABQAAQABAAEAFAAUAAEAAQABAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAKwBQACsAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAKwArAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAKwAeAB4AHgAeAB4AHgAeAA4AHgArAA0ADQANAA0ADQANAA0ACQANAA0ADQAIAAQACwAEAAQADQAJAA0ADQAMAB0AHQAeABcAFwAWABcAFwAXABYAFwAdAB0AHgAeABQAFAAUAA0AAQABAAQABAAEAAQABAAJABoAGgAaABoAGgAaABoAGgAeABcAFwAdABUAFQAeAB4AHgAeAB4AHgAYABYAEQAVABUAFQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgANAB4ADQANAA0ADQAeAA0ADQANAAcAHgAeAB4AHgArAAQABAAEAAQABAAEAAQABAAEAAQAUABQACsAKwBPAFAAUABQAFAAUAAeAB4AHgAWABEATwBQAE8ATwBPAE8AUABQAFAAUABQAB4AHgAeABYAEQArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAGwAbABsAGwAbABsAGwAaABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAaABsAGwAbABsAGgAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgBQABoAHgAdAB4AUAAeABoAHgAeAB4AHgAeAB4AHgAeAB4ATwAeAFAAGwAeAB4AUABQAFAAUABQAB4AHgAeAB0AHQAeAFAAHgBQAB4AUAAeAFAATwBQAFAAHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AUABQAFAAUABPAE8AUABQAFAAUABQAE8AUABQAE8AUABPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAE8ATwBPAE8ATwBPAE8ATwBPAE8AUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAATwAeAB4AKwArACsAKwAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB0AHQAeAB4AHgAdAB0AHgAeAB0AHgAeAB4AHQAeAB0AGwAbAB4AHQAeAB4AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB0AHgAdAB4AHQAdAB0AHQAdAB0AHgAdAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAdAB0AHQAdAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAlACUAHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBQAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB0AHQAeAB4AHgAeAB0AHQAdAB4AHgAdAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB0AHQAeAB4AHQAeAB4AHgAeAB0AHQAeAB4AHgAeACUAJQAdAB0AJQAeACUAJQAlACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAHgAeAB4AHgAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHQAdAB0AHgAdACUAHQAdAB4AHQAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHQAdAB0AHQAlAB4AJQAlACUAHQAlACUAHQAdAB0AJQAlAB0AHQAlAB0AHQAlACUAJQAeAB0AHgAeAB4AHgAdAB0AJQAdAB0AHQAdAB0AHQAlACUAJQAlACUAHQAlACUAIAAlAB0AHQAlACUAJQAlACUAJQAlACUAHgAeAB4AJQAlACAAIAAgACAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeABcAFwAXABcAFwAXAB4AEwATACUAHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwArACUAJQBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAKwArACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAE8ATwBPAE8ATwBPAE8ATwAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeACsAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUAArACsAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQBQAFAAUABQACsAKwArACsAUABQAFAAUABQAFAAUABQAA0AUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQACsAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgBQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAABAAEAAQAKwAEAAQAKwArACsAKwArAAQABAAEAAQAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsABAAEAAQAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsADQANAA0ADQANAA0ADQANAB4AKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AUABQAFAAUABQAFAAUABQAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAUABQAFAAUABQAA0ADQANAA0ADQANABQAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwANAA0ADQANAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAeAAQABAAEAB4AKwArAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLACsADQArAB4AKwArAAQABAAEAAQAUABQAB4AUAArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwAEAAQABAAEAAQABAAEAAQABAAOAA0ADQATABMAHgAeAB4ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0AUABQAFAAUAAEAAQAKwArAAQADQANAB4AUAArACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXABcAA0ADQANACoASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUAArACsAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANACsADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEcARwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQACsAKwAeAAQABAANAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAEAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUAArACsAUAArACsAUABQACsAKwBQAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AKwArAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAeAB4ADQANAA0ADQAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAArAAQABAArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAEAAQABAAEAAQABAAEACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAFgAWAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAKwBQACsAKwArACsAKwArAFAAKwArACsAKwBQACsAUAArAFAAKwBQAFAAUAArAFAAUAArAFAAKwArAFAAKwBQACsAUAArAFAAKwBQACsAUABQACsAUAArACsAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAUABQAFAAUAArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUAArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAlACUAJQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeACUAJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeACUAJQAlACUAJQAeACUAJQAlACUAJQAgACAAIAAlACUAIAAlACUAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIQAhACEAIQAhACUAJQAgACAAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACAAIAAlACUAJQAlACAAJQAgACAAIAAgACAAIAAgACAAIAAlACUAJQAgACUAJQAlACUAIAAgACAAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeACUAHgAlAB4AJQAlACUAJQAlACAAJQAlACUAJQAeACUAHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAIAAgACAAJQAlACUAIAAgACAAIAAgAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFwAXABcAFQAVABUAHgAeAB4AHgAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACAAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAlACAAIAAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsA"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(6);e.default=function i(t,e,r){!function(t,e){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this),this.type=n.PATH.CIRCLE,this.x=t,this.y=e,this.radius=r}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,u=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],r=!0,n=!1,A=void 0;try{for(var s,o=t[Symbol.iterator]();!(r=(s=o.next()).done)&&(i.push(s.value),!e||i.length!==e);r=!0);}catch(t){n=!0,A=t}finally{try{!r&&o.return&&o.return()}finally{if(n)throw A}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(){function r(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}}(),o=i(1),a=(i(25),i(52)),s=(r=i(9))&&r.__esModule?r:{default:r},l=i(5),c=i(12),A=function(){function i(t,e){!function(t,e){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this),this.target=t,this.options=e,t.render(e)}return n(i,[{key:"renderNode",value:function(t){t.isVisible()&&(this.renderNodeBackgroundAndBorders(t),this.renderNodeContent(t))}},{key:"renderNodeContent",value:function(n){var A=this,t=function(){if(n.childNodes.length&&n.childNodes.forEach(function(t){if(t instanceof s.default){var e=t.parent.style;A.target.renderTextNode(t.bounds,e.color,e.font,e.textDecoration,e.textShadow)}else A.target.drawShape(t,n.style.color)}),n.image){var t=A.options.imageStore.get(n.image);if(t){var e=(0,o.calculateContentBox)(n.bounds,n.style.padding,n.style.border),i="number"==typeof t.width&&0<t.width?t.width:e.width,r="number"==typeof t.height&&0<t.height?t.height:e.height;0<i&&0<r&&A.target.clip([(0,o.calculatePaddingBoxPath)(n.curvedBounds)],function(){A.target.drawImage(t,new o.Bounds(0,0,i,r),e)})}}},e=n.getClipPaths();e.length?this.target.clip(e,t):t()}},{key:"renderNodeBackgroundAndBorders",value:function(i){var r=this,e=!i.style.background.backgroundColor.isTransparent()||i.style.background.backgroundImage.length,t=i.style.border.some(function(t){return t.borderStyle!==c.BORDER_STYLE.NONE&&!t.borderColor.isTransparent()}),n=function(){var t=(0,l.calculateBackgroungPaintingArea)(i.curvedBounds,i.style.background.backgroundClip);e&&r.target.clip([t],function(){i.style.background.backgroundColor.isTransparent()||r.target.fill(i.style.background.backgroundColor),r.renderBackgroundImage(i)}),i.style.border.forEach(function(t,e){t.borderStyle===c.BORDER_STYLE.NONE||t.borderColor.isTransparent()||r.renderBorder(t,e,i.curvedBounds)})};if(e||t){var A=i.parent?i.parent.getClipPaths():[];A.length?this.target.clip(A,n):n()}}},{key:"renderBackgroundImage",value:function(e){var i=this;e.style.background.backgroundImage.slice(0).reverse().forEach(function(t){"url"===t.source.method&&t.source.args.length?i.renderBackgroundRepeat(e,t):/gradient/i.test(t.source.method)&&i.renderBackgroundGradient(e,t)})}},{key:"renderBackgroundRepeat",value:function(t,e){var i=this.options.imageStore.get(e.source.args[0]);if(i){var r=(0,l.calculateBackgroungPositioningArea)(t.style.background.backgroundOrigin,t.bounds,t.style.padding,t.style.border),n=(0,l.calculateBackgroundSize)(e,i,r),A=(0,l.calculateBackgroundPosition)(e.position,n,r),s=(0,l.calculateBackgroundRepeatPath)(e,A,n,r,t.bounds),o=Math.round(r.left+A.x),a=Math.round(r.top+A.y);this.target.renderRepeat(s,i,n,o,a)}}},{key:"renderBackgroundGradient",value:function(t,e){var i=(0,l.calculateBackgroungPositioningArea)(t.style.background.backgroundOrigin,t.bounds,t.style.padding,t.style.border),r=(0,l.calculateGradientBackgroundSize)(e,i),n=(0,l.calculateBackgroundPosition)(e.position,r,i),A=new o.Bounds(Math.round(i.left+n.x),Math.round(i.top+n.y),r.width,r.height),s=(0,a.parseGradient)(t,e.source,A);if(s)switch(s.type){case a.GRADIENT_TYPE.LINEAR_GRADIENT:this.target.renderLinearGradient(A,s);break;case a.GRADIENT_TYPE.RADIAL_GRADIENT:this.target.renderRadialGradient(A,s)}}},{key:"renderBorder",value:function(t,e,i){this.target.drawShape((0,o.parsePathForBorder)(i,e),t.borderColor)}},{key:"renderStack",value:function(t){var e=this;if(t.container.isVisible()){var i=t.getOpacity();i!==this._opacity&&(this.target.setOpacity(t.getOpacity()),this._opacity=i);var r=t.container.style.transform;null!==r?this.target.transform(t.container.bounds.left+r.transformOrigin[0].value,t.container.bounds.top+r.transformOrigin[1].value,r.transform,function(){return e.renderStackContent(t)}):this.renderStackContent(t)}}},{key:"renderStackContent",value:function(t){var e=d(t),i=u(e,5),r=i[0],n=i[1],A=i[2],s=i[3],o=i[4],a=f(t),l=u(a,2),c=l[0],h=l[1];this.renderNodeBackgroundAndBorders(t.container),r.sort(g).forEach(this.renderStack,this),this.renderNodeContent(t.container),h.forEach(this.renderNode,this),s.forEach(this.renderStack,this),o.forEach(this.renderStack,this),c.forEach(this.renderNode,this),n.forEach(this.renderStack,this),A.sort(g).forEach(this.renderStack,this)}},{key:"render",value:function(t){return this.options.backgroundColor&&this.target.rectangle(this.options.x,this.options.y,this.options.width,this.options.height,this.options.backgroundColor),this.renderStack(t),this.target.getTarget()}}]),i}();e.default=A;var f=function(t){for(var e=[],i=[],r=t.children.length,n=0;n<r;n++){var A=t.children[n];A.isInlineLevel()?e.push(A):i.push(A)}return[e,i]},d=function(t){for(var e=[],i=[],r=[],n=[],A=[],s=t.contexts.length,o=0;o<s;o++){var a=t.contexts[o];a.container.isPositioned()||a.container.style.opacity<1||a.container.isTransformed()?a.container.style.zIndex.order<0?e.push(a):0<a.container.style.zIndex.order?r.push(a):i.push(a):a.container.isFloating()?n.push(a):A.push(a)}return[e,i,r,n,A]},g=function(t,e){return t.container.style.zIndex.order>e.container.style.zIndex.order?1:t.container.style.zIndex.order<e.container.style.zIndex.order?-1:t.container.index>e.container.index?1:-1}},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function A(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.transformWebkitRadialGradientArgs=e.parseGradient=e.RadialGradient=e.LinearGradient=e.RADIAL_GRADIENT_SHAPE=e.GRADIENT_TYPE=void 0;var o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],r=!0,n=!1,A=void 0;try{for(var s,o=t[Symbol.iterator]();!(r=(s=o.next()).done)&&(i.push(s.value),!e||i.length!==e);r=!0);}catch(t){n=!0,A=t}finally{try{!r&&o.return&&o.return()}finally{if(n)throw A}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=(r(i(3)),i(53)),B=r(i(0)),c=i(2),m=r(c),f=i(4),h=/^(to )?(left|top|right|bottom)( (left|top|right|bottom))?$/i,u=/^([+-]?\d*\.?\d+)% ([+-]?\d*\.?\d+)%$/i,v=/(px)|%|( 0)$/i,n=/^(from|to|color-stop)\((?:([\d.]+)(%)?,\s*)?(.+?)\)$/i,d=/^\s*(circle|ellipse)?\s*((?:([\d.]+)(px|r?em|%)\s*(?:([\d.]+)(px|r?em|%))?)|closest-side|closest-corner|farthest-side|farthest-corner)?\s*(?:at\s*(?:(left|center|right)|([\d.]+)(px|r?em|%))\s+(?:(top|center|bottom)|([\d.]+)(px|r?em|%)))?(?:\s|$)/i,s=e.GRADIENT_TYPE={LINEAR_GRADIENT:0,RADIAL_GRADIENT:1},g=e.RADIAL_GRADIENT_SHAPE={CIRCLE:0,ELLIPSE:1},p={left:new m.default("0%"),top:new m.default("0%"),center:new m.default("50%"),right:new m.default("100%"),bottom:new m.default("100%")},w=e.LinearGradient=function t(e,i){A(this,t),this.type=s.LINEAR_GRADIENT,this.colorStops=e,this.direction=i},C=e.RadialGradient=function t(e,i,r,n){A(this,t),this.type=s.RADIAL_GRADIENT,this.colorStops=e,this.shape=i,this.center=r,this.radius=n},b=(e.parseGradient=function(t,e,i){var r=e.args,n=e.method,A=e.prefix;return"linear-gradient"===n?a(r,i,!!A):"gradient"===n&&"linear"===r[0]?a(["to bottom"].concat(x(r.slice(3))),i,!!A):"radial-gradient"===n?_(t,"-webkit-"===A?S(r):r,i):"gradient"===n&&"radial"===r[0]?_(t,x(S(r.slice(1))),i):void 0},function(t,e,r){for(var i=[],n=e;n<t.length;n++){var A=t[n],s=v.test(A),o=A.lastIndexOf(" "),a=new B.default(s?A.substring(0,o):A),l=s?new m.default(A.substring(o+1)):n===e?new m.default("0%"):n===t.length-1?new m.default("100%"):null;i.push({color:a,stop:l})}for(var c=i.map(function(t){var e=t.color,i=t.stop;return{color:e,stop:0===r?0:i?i.getAbsoluteValue(r)/r:null}}),h=c[0].stop,u=0;u<c.length;u++)if(null!==h){var f=c[u].stop;if(null===f){for(var d=u;null===c[d].stop;)d++;for(var g=d-u+1,p=(c[d].stop-h)/g;u<d;u++)h=c[u].stop=h+p}else h=f}return c}),a=function(t,e,i){var r=(0,l.parseAngle)(t[0]),n=h.test(t[0]),A=n||null!==r||u.test(t[0]),s=A?null!==r?y(i?r-.5*Math.PI:r,e):n?Q(t[0],e):F(t[0],e):y(Math.PI,e),o=A?1:0,a=Math.min((0,f.distance)(Math.abs(s.x0)+Math.abs(s.x1),Math.abs(s.y0)+Math.abs(s.y1)),2*e.width,2*e.height);return new w(b(t,o,a),s)},_=function(t,e,i){var r=e[0].match(d),n=r&&("circle"===r[1]||void 0!==r[3]&&void 0===r[5])?g.CIRCLE:g.ELLIPSE,A={},s={};r&&(void 0!==r[3]&&(A.x=(0,c.calculateLengthFromValueWithUnit)(t,r[3],r[4]).getAbsoluteValue(i.width)),void 0!==r[5]&&(A.y=(0,c.calculateLengthFromValueWithUnit)(t,r[5],r[6]).getAbsoluteValue(i.height)),r[7]?s.x=p[r[7].toLowerCase()]:void 0!==r[8]&&(s.x=(0,c.calculateLengthFromValueWithUnit)(t,r[8],r[9])),r[10]?s.y=p[r[10].toLowerCase()]:void 0!==r[11]&&(s.y=(0,c.calculateLengthFromValueWithUnit)(t,r[11],r[12])));var o={x:void 0===s.x?i.width/2:s.x.getAbsoluteValue(i.width),y:void 0===s.y?i.height/2:s.y.getAbsoluteValue(i.height)},a=T(r&&r[2]||"farthest-corner",n,o,A,i);return new C(b(e,r?1:0,Math.min(a.x,a.y)),n,o,a)},y=function(t,e){var i=e.width,r=e.height,n=.5*i,A=.5*r,s=(Math.abs(i*Math.sin(t))+Math.abs(r*Math.cos(t)))/2,o=n+Math.sin(t)*s,a=A-Math.cos(t)*s;return{x0:o,x1:i-o,y0:a,y1:r-a}},E=function(t){return Math.acos(t.width/2/((0,f.distance)(t.width,t.height)/2))},Q=function(t,e){switch(t){case"bottom":case"to top":return y(0,e);case"left":case"to right":return y(Math.PI/2,e);case"right":case"to left":return y(3*Math.PI/2,e);case"top right":case"right top":case"to bottom left":case"to left bottom":return y(Math.PI+E(e),e);case"top left":case"left top":case"to bottom right":case"to right bottom":return y(Math.PI-E(e),e);case"bottom left":case"left bottom":case"to top right":case"to right top":return y(E(e),e);case"bottom right":case"right bottom":case"to top left":case"to left top":return y(2*Math.PI-E(e),e);case"top":case"to bottom":default:return y(Math.PI,e)}},F=function(t,e){var i=t.split(" ").map(parseFloat),r=o(i,2),n=r[0],A=r[1],s=n/100*e.width/(A/100*e.height);return y(Math.atan(isNaN(s)?1:s)+Math.PI/2,e)},U=function(t,r,n,A){return[{x:0,y:0},{x:0,y:t.height},{x:t.width,y:0},{x:t.width,y:t.height}].reduce(function(t,e){var i=(0,f.distance)(r-e.x,n-e.y);return(A?i<t.optimumDistance:i>t.optimumDistance)?{optimumCorner:e,optimumDistance:i}:t},{optimumDistance:A?1/0:-1/0,optimumCorner:null}).optimumCorner},T=function(t,e,i,r,n){var A=i.x,s=i.y,o=0,a=0;switch(t){case"closest-side":e===g.CIRCLE?o=a=Math.min(Math.abs(A),Math.abs(A-n.width),Math.abs(s),Math.abs(s-n.height)):e===g.ELLIPSE&&(o=Math.min(Math.abs(A),Math.abs(A-n.width)),a=Math.min(Math.abs(s),Math.abs(s-n.height)));break;case"closest-corner":if(e===g.CIRCLE)o=a=Math.min((0,f.distance)(A,s),(0,f.distance)(A,s-n.height),(0,f.distance)(A-n.width,s),(0,f.distance)(A-n.width,s-n.height));else if(e===g.ELLIPSE){var l=Math.min(Math.abs(s),Math.abs(s-n.height))/Math.min(Math.abs(A),Math.abs(A-n.width)),c=U(n,A,s,!0);a=l*(o=(0,f.distance)(c.x-A,(c.y-s)/l))}break;case"farthest-side":e===g.CIRCLE?o=a=Math.max(Math.abs(A),Math.abs(A-n.width),Math.abs(s),Math.abs(s-n.height)):e===g.ELLIPSE&&(o=Math.max(Math.abs(A),Math.abs(A-n.width)),a=Math.max(Math.abs(s),Math.abs(s-n.height)));break;case"farthest-corner":if(e===g.CIRCLE)o=a=Math.max((0,f.distance)(A,s),(0,f.distance)(A,s-n.height),(0,f.distance)(A-n.width,s),(0,f.distance)(A-n.width,s-n.height));else if(e===g.ELLIPSE){var h=Math.max(Math.abs(s),Math.abs(s-n.height))/Math.max(Math.abs(A),Math.abs(A-n.width)),u=U(n,A,s,!1);a=h*(o=(0,f.distance)(u.x-A,(u.y-s)/h))}break;default:o=r.x||0,a=void 0!==r.y?r.y:o}return{x:o,y:a}},S=e.transformWebkitRadialGradientArgs=function(t){var e="",i="",r="",n="",A=0,s=/^(left|center|right|\d+(?:px|r?em|%)?)(?:\s+(top|center|bottom|\d+(?:px|r?em|%)?))?$/i,o=/^\d+(px|r?em|%)?(?:\s+\d+(px|r?em|%)?)?$/i,a=t[A].match(s);a&&A++;var l=t[A].match(/^(circle|ellipse)?\s*(closest-side|closest-corner|farthest-side|farthest-corner|contain|cover)?$/i);l&&(e=l[1]||"","contain"===(r=l[2]||"")?r="closest-side":"cover"===r&&(r="farthest-corner"),A++);var c=t[A].match(o);c&&A++;var h=t[A].match(s);h&&A++;var u=t[A].match(o);u&&A++;var f=h||a;f&&f[1]&&(n=f[1]+(/^\d+$/.test(f[1])?"px":""),f[2]&&(n+=" "+f[2]+(/^\d+$/.test(f[2])?"px":"")));var d=u||c;return d&&(i=d[0],d[1]||(i+="px")),!n||e||i||r||(i=n,n=""),n&&(n="at "+n),[[e,r,i,n].filter(function(t){return!!t}).join(" ")].concat(t.slice(A))},x=function(i){return i.map(function(t){return t.match(n)}).map(function(t,e){if(!t)return i[e];switch(t[1]){case"from":return t[4]+" 0%";case"to":return t[4]+" 100%";case"color-stop":return"%"===t[3]?t[4]+" "+t[2]:t[4]+" "+100*parseFloat(t[2])+"%"}})}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=/([+-]?\d*\.?\d+)(deg|grad|rad|turn)/i;e.parseAngle=function(t){var e=t.match(r);if(e){var i=parseFloat(e[1]);switch(e[2].toLowerCase()){case"deg":return Math.PI*i/180;case"grad":return Math.PI/200*i;case"rad":return i;case"turn":return 2*Math.PI*i}}return null}},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.cloneWindow=e.DocumentCloner=void 0;var A=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],r=!0,n=!1,A=void 0;try{for(var s,o=t[Symbol.iterator]();!(r=(s=o.next()).done)&&(i.push(s.value),!e||i.length!==e);r=!0);}catch(t){n=!0,A=t}finally{try{!r&&o.return&&o.return()}finally{if(n)throw A}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(){function r(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}}(),a=i(1),s=i(26),o=r(i(55)),c=i(4),h=i(5),l=r(i(15)),u=i(56),f="data-html2canvas-ignore",d=e.DocumentCloner=function(){function A(t,e,i,r,n){!function(t,e){if(!(t instanceof A))throw new TypeError("Cannot call a class as a function")}(this),this.referenceElement=t,this.scrolledElements=[],this.copyStyles=r,this.inlineImages=r,this.logger=i,this.options=e,this.renderer=n,this.resourceLoader=new o.default(e,i,window),this.pseudoContentData={counters:{},quoteDepth:0},this.documentElement=this.cloneNode(t.ownerDocument.documentElement)}return n(A,[{key:"inlineAllImages",value:function(r){var e=this;if(this.inlineImages&&r){var i=r.style;Promise.all((0,h.parseBackgroundImage)(i.backgroundImage).map(function(t){return"url"===t.method?e.resourceLoader.inlineImage(t.args[0]).then(function(t){return t&&"string"==typeof t.src?'url("'+t.src+'")':"none"}).catch(function(t){}):Promise.resolve(""+t.prefix+t.method+"("+t.args.join(",")+")")})).then(function(t){1<t.length&&(i.backgroundColor=""),i.backgroundImage=t.join(",")}),r instanceof HTMLImageElement&&this.resourceLoader.inlineImage(r.src).then(function(t){if(t&&r instanceof HTMLImageElement&&r.parentNode){var e=r.parentNode,i=(0,c.copyCSSStyles)(r.style,t.cloneNode(!1));e.replaceChild(i,r)}}).catch(function(t){})}}},{key:"inlineFonts",value:function(i){var r=this;return Promise.all(Array.from(i.styleSheets).map(function(e){return e.href?fetch(e.href).then(function(t){return t.text()}).then(function(t){return p(t,e.href)}).catch(function(t){return[]}):g(e,i)})).then(function(t){return t.reduce(function(t,e){return t.concat(e)},[])}).then(function(t){return Promise.all(t.map(function(e){return fetch(e.formats[0].src).then(function(t){return t.blob()}).then(function(r){return new Promise(function(e,t){var i=new FileReader;i.onerror=t,i.onload=function(){var t=i.result;e(t)},i.readAsDataURL(r)})}).then(function(t){return e.fontFace.setProperty("src",'url("'+t+'")'),"@font-face {"+e.fontFace.cssText+" "})}))}).then(function(t){var e=i.createElement("style");e.textContent=t.join("\n"),r.documentElement.appendChild(e)})}},{key:"createElementClone",value:function(n){var e=this;if(this.copyStyles&&n instanceof HTMLCanvasElement){var t=n.ownerDocument.createElement("img");try{return t.src=n.toDataURL(),t}catch(n){}}if(n instanceof HTMLIFrameElement){var A=n.cloneNode(!1),i=F();A.setAttribute("data-html2canvas-internal-iframe-key",i);var r=(0,a.parseBounds)(n,0,0),s=r.width,o=r.height;return this.resourceLoader.cache[i]=T(n,this.options).then(function(t){return e.renderer(t,{async:e.options.async,allowTaint:e.options.allowTaint,backgroundColor:"#ffffff",canvas:null,imageTimeout:e.options.imageTimeout,logging:e.options.logging,proxy:e.options.proxy,removeContainer:e.options.removeContainer,scale:e.options.scale,foreignObjectRendering:e.options.foreignObjectRendering,useCORS:e.options.useCORS,target:new l.default,width:s,height:o,x:0,y:0,windowWidth:t.ownerDocument.defaultView.innerWidth,windowHeight:t.ownerDocument.defaultView.innerHeight,scrollX:t.ownerDocument.defaultView.pageXOffset,scrollY:t.ownerDocument.defaultView.pageYOffset},e.logger.child(i))}).then(function(r){return new Promise(function(t,e){var i=document.createElement("img");i.onload=function(){return t(r)},i.onerror=e,i.src=r.toDataURL(),A.parentNode&&A.parentNode.replaceChild((0,c.copyCSSStyles)(n.ownerDocument.defaultView.getComputedStyle(n),i),A)})}),A}return n.cloneNode(!1)}},{key:"cloneNode",value:function(t){var e=t.nodeType===Node.TEXT_NODE?document.createTextNode(t.nodeValue):this.createElementClone(t),i=t.ownerDocument.defaultView,r=t instanceof i.HTMLElement?i.getComputedStyle(t):null,n=t instanceof i.HTMLElement?i.getComputedStyle(t,":before"):null,A=t instanceof i.HTMLElement?i.getComputedStyle(t,":after"):null;this.referenceElement===t&&e instanceof i.HTMLElement&&(this.clonedReferenceElement=e),e instanceof i.HTMLBodyElement&&y(e);for(var s=(0,u.parseCounterReset)(r,this.pseudoContentData),o=(0,u.resolvePseudoContent)(t,n,this.pseudoContentData),a=t.firstChild;a;a=a.nextSibling)(a.nodeType!==Node.ELEMENT_NODE||"SCRIPT"!==a.nodeName&&!a.hasAttribute(f))&&(this.copyStyles&&"STYLE"===a.nodeName||e.appendChild(this.cloneNode(a)));var l=(0,u.resolvePseudoContent)(t,A,this.pseudoContentData);if((0,u.popCounters)(s,this.pseudoContentData),t instanceof i.HTMLElement&&e instanceof i.HTMLElement)switch(n&&this.inlineAllImages(m(t,e,n,o,v)),A&&this.inlineAllImages(m(t,e,A,l,w)),!r||!this.copyStyles||t instanceof HTMLIFrameElement||(0,c.copyCSSStyles)(r,e),this.inlineAllImages(e),0===t.scrollTop&&0===t.scrollLeft||this.scrolledElements.push([e,t.scrollLeft,t.scrollTop]),t.nodeName){case"CANVAS":this.copyStyles||B(t,e);break;case"TEXTAREA":case"SELECT":e.value=t.value}return e}}]),A}(),g=function(t,s){return(t.cssRules?Array.from(t.cssRules):[]).filter(function(t){return t.type===CSSRule.FONT_FACE_RULE}).map(function(t){for(var e=(0,h.parseBackgroundImage)(t.style.getPropertyValue("src")),i=[],r=0;r<e.length;r++)if("url"===e[r].method&&e[r+1]&&"format"===e[r+1].method){var n=s.createElement("a");n.href=e[r].args[0],s.body&&s.body.appendChild(n);var A={src:n.href,format:e[r+1].args[0]};i.push(A)}return{formats:i.filter(function(t){return/^woff/i.test(t.format)}),fontFace:t.style}}).filter(function(t){return t.formats.length})},p=function(t,e){var i=document.implementation.createHTMLDocument(""),r=document.createElement("base");r.href=e;var n=document.createElement("style");return n.textContent=t,i.head&&i.head.appendChild(r),i.body&&i.body.appendChild(n),n.sheet?g(n.sheet,i):[]},B=function(t,e){try{if(e){e.width=t.width,e.height=t.height;var i=t.getContext("2d"),r=e.getContext("2d");i?r.putImageData(i.getImageData(0,0,t.width,t.height),0,0):r.drawImage(t,0,0)}}catch(t){}},m=function(t,e,i,r,n){if(i&&i.content&&"none"!==i.content&&"-moz-alt-content"!==i.content&&"none"!==i.display){var A=e.ownerDocument.createElement("html2canvaspseudoelement");if((0,c.copyCSSStyles)(i,A),r)for(var s=r.length,o=0;o<s;o++){var a=r[o];switch(a.type){case u.PSEUDO_CONTENT_ITEM_TYPE.IMAGE:var l=e.ownerDocument.createElement("img");l.src=(0,h.parseBackgroundImage)("url("+a.value+")")[0].args[0],l.style.opacity="1",A.appendChild(l);break;case u.PSEUDO_CONTENT_ITEM_TYPE.TEXT:A.appendChild(e.ownerDocument.createTextNode(a.value))}}return A.className=C+" "+b,e.className+=n===v?" "+C:" "+b,n===v?e.insertBefore(A,e.firstChild):e.appendChild(A),A}},v=":before",w=":after",C="___html2canvas___pseudoelement_before",b="___html2canvas___pseudoelement_after",_='{\n    content: "" !important;\n    display: none !important;\n}',y=function(t){E(t,"."+C+v+_+"\n         ."+b+w+_)},E=function(t,e){var i=t.ownerDocument.createElement("style");i.innerHTML=e,t.appendChild(i)},Q=function(t){var e=A(t,3),i=e[0],r=e[1],n=e[2];i.scrollLeft=r,i.scrollTop=n},F=function(){return Math.ceil(Date.now()+1e7*Math.random()).toString(16)},U=/^data:text\/(.+);(base64)?,(.*)$/i,T=function(e,i){try{return Promise.resolve(e.contentWindow.document.documentElement)}catch(t){return i.proxy?(0,s.Proxy)(e.src,i).then(function(t){var e=t.match(U);return e?"base64"===e[2]?window.atob(decodeURIComponent(e[3])):decodeURIComponent(e[3]):Promise.reject()}).then(function(r){return S(e.ownerDocument,(0,a.parseBounds)(e,0,0)).then(function(t){var e=t.contentWindow.document;e.open(),e.write(r);var i=x(t).then(function(){return e.documentElement});return e.close(),i})}):Promise.reject()}},S=function(t,e){var i=t.createElement("iframe");return i.className="html2canvas-container",i.style.visibility="hidden",i.style.position="fixed",i.style.left="-10000px",i.style.top="0px",i.style.border="0",i.width=e.width.toString(),i.height=e.height.toString(),i.scrolling="no",i.setAttribute(f,"true"),t.body?(t.body.appendChild(i),Promise.resolve(i)):Promise.reject("")},x=function(i){var r=i.contentWindow,n=r.document;return new Promise(function(e,t){r.onload=i.onload=n.onreadystatechange=function(){var t=setInterval(function(){0<n.body.childNodes.length&&"complete"===n.readyState&&(clearInterval(t),e(i))},50)}})},O=(e.cloneWindow=function(o,a,l,t,e,i){var c=new d(l,t,e,!1,i),h=o.defaultView.pageXOffset,u=o.defaultView.pageYOffset;return S(o,a).then(function(t){var e,i,r,n=t.contentWindow,A=n.document,s=x(t).then(function(){return c.scrolledElements.forEach(Q),n.scrollTo(a.left,a.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||n.scrollY===a.top&&n.scrollX===a.left||(A.documentElement.style.top=-a.top+"px",A.documentElement.style.left=-a.left+"px",A.documentElement.style.position="absolute"),c.clonedReferenceElement instanceof n.HTMLElement||c.clonedReferenceElement instanceof o.defaultView.HTMLElement||c.clonedReferenceElement instanceof HTMLElement?Promise.resolve([t,c.clonedReferenceElement,c.resourceLoader]):Promise.reject("")});return A.open(),A.write(O(document.doctype)+"<html></html>"),e=l.ownerDocument,i=h,r=u,!e.defaultView||i===e.defaultView.pageXOffset&&r===e.defaultView.pageYOffset||e.defaultView.scrollTo(i,r),A.replaceChild(A.adoptNode(c.documentElement),A.documentElement),A.close(),s})},function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e})},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.ResourceStore=void 0;var r,A=function(){function r(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}}(),a=(r=i(10))&&r.__esModule?r:{default:r},s=i(26),o=function(){function r(t,e,i){n(this,r),this.options=t,this._window=i,this.origin=this.getOrigin(i.location.href),this.cache={},this.logger=e,this._index=0}return A(r,[{key:"loadImage",value:function(t){var e=this;if(this.hasResourceInCache(t))return t;if(!g(t)||a.default.SUPPORT_SVG_DRAWING){if(!0===this.options.allowTaint||f(t)||this.isSameOrigin(t))return this.addImage(t,t,!1);if(!this.isSameOrigin(t)){if("string"==typeof this.options.proxy)return this.cache[t]=(0,s.Proxy)(t,this.options).then(function(t){return p(t,e.options.imageTimeout||0)}),t;if(!0===this.options.useCORS&&a.default.SUPPORT_CORS_IMAGES)return this.addImage(t,t,!0)}}}},{key:"inlineImage",value:function(t){var e=this;return f(t)?p(t,this.options.imageTimeout||0):this.hasResourceInCache(t)?this.cache[t]:this.isSameOrigin(t)||"string"!=typeof this.options.proxy?this.xhrImage(t):this.cache[t]=(0,s.Proxy)(t,this.options).then(function(t){return p(t,e.options.imageTimeout||0)})}},{key:"xhrImage",value:function(n){var A=this;return this.cache[n]=new Promise(function(i,r){var t=new XMLHttpRequest;if(t.onreadystatechange=function(){if(4===t.readyState)if(200!==t.status)r("Failed to fetch image "+n.substring(0,256)+" with status code "+t.status);else{var e=new FileReader;e.addEventListener("load",function(){var t=e.result;i(t)},!1),e.addEventListener("error",function(t){return r(t)},!1),e.readAsDataURL(t.response)}},t.responseType="blob",A.options.imageTimeout){var e=A.options.imageTimeout;t.timeout=e,t.ontimeout=function(){return r("")}}t.open("GET",n,!0),t.send()}).then(function(t){return p(t,A.options.imageTimeout||0)}),this.cache[n]}},{key:"loadCanvas",value:function(t){var e=String(this._index++);return this.cache[e]=Promise.resolve(t),e}},{key:"hasResourceInCache",value:function(t){return void 0!==this.cache[t]}},{key:"addImage",value:function(t,A,s){var o=this,e=function(n){return new Promise(function(t,e){var i=new Image;if(i.onload=function(){return t(i)},n&&!s||(i.crossOrigin="anonymous"),i.onerror=e,i.src=A,!0===i.complete&&setTimeout(function(){t(i)},500),o.options.imageTimeout){var r=o.options.imageTimeout;setTimeout(function(){return e("")},r)}})};return this.cache[t]=d(A)&&!g(A)?a.default.SUPPORT_BASE64_DRAWING(A).then(e):e(!0),t}},{key:"isSameOrigin",value:function(t){return this.getOrigin(t)===this.origin}},{key:"getOrigin",value:function(t){var e=this._link||(this._link=this._window.document.createElement("a"));return e.href=t,e.href=e.href,e.protocol+e.hostname+e.port}},{key:"ready",value:function(){var e=this,i=Object.keys(this.cache),t=i.map(function(t){return e.cache[t].catch(function(t){return null})});return Promise.all(t).then(function(t){return new l(i,t)})}}]),r}();e.default=o;var l=e.ResourceStore=function(){function i(t,e){n(this,i),this._keys=t,this._resources=e}return A(i,[{key:"get",value:function(t){var e=this._keys.indexOf(t);return-1===e?null:this._resources[e]}}]),i}(),c=/^data:image\/svg\+xml/i,h=/^data:image\/.*;base64,/i,u=/^data:image\/.*/i,f=function(t){return u.test(t)},d=function(t){return h.test(t)},g=function(t){return"svg"===t.substr(-3).toLowerCase()||c.test(t)},p=function(r,n){return new Promise(function(t,e){var i=new Image;i.onload=function(){return t(i)},i.onerror=e,i.src=r,!0===i.complete&&setTimeout(function(){t(i)},500),n&&setTimeout(function(){return e("")},n)})}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseContent=e.resolvePseudoContent=e.popCounters=e.parseCounterReset=e.TOKEN_TYPE=e.PSEUDO_CONTENT_ITEM_TYPE=void 0;var B=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],r=!0,n=!1,A=void 0;try{for(var s,o=t[Symbol.iterator]();!(r=(s=o.next()).done)&&(i.push(s.value),!e||i.length!==e);r=!0);}catch(t){n=!0,A=t}finally{try{!r&&o.return&&o.return()}finally{if(n)throw A}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=i(14),o=i(8),m=e.PSEUDO_CONTENT_ITEM_TYPE={TEXT:0,IMAGE:1},v=e.TOKEN_TYPE={STRING:0,ATTRIBUTE:1,URL:2,COUNTER:3,COUNTERS:4,OPENQUOTE:5,CLOSEQUOTE:6},w=(e.parseCounterReset=function(t,e){if(!t||!t.counterReset||"none"===t.counterReset)return[];for(var i=[],r=t.counterReset.split(/\s*,\s*/),n=r.length,A=0;A<n;A++){var s=r[A].split(/\s+/),o=B(s,2),a=o[0],l=o[1];i.push(a);var c=e.counters[a];c||(c=e.counters[a]=[]),c.push(parseInt(l||0,10))}return i},e.popCounters=function(t,e){for(var i=t.length,r=0;r<i;r++)e.counters[t[r]].pop()},e.resolvePseudoContent=function(t,e,i){if(!e||!e.content||"none"===e.content||"-moz-alt-content"===e.content||"none"===e.display)return null;var r=w(e.content),n=r.length,A=[],s="",o=e.counterIncrement;if(o&&"none"!==o){var a=o.split(/\s+/),l=B(a,2),c=l[0],h=l[1],u=i.counters[c];u&&(u[u.length-1]+=void 0===h?1:parseInt(h,10))}for(var f=0;f<n;f++){var d=r[f];switch(d.type){case v.STRING:s+=d.value||"";break;case v.ATTRIBUTE:t instanceof HTMLElement&&d.value&&(s+=t.getAttribute(d.value)||"");break;case v.COUNTER:var g=i.counters[d.name||""];g&&(s+=b([g[g.length-1]],"",d.format));break;case v.COUNTERS:var p=i.counters[d.name||""];p&&(s+=b(p,d.glue,d.format));break;case v.OPENQUOTE:s+=C(e,!0,i.quoteDepth),i.quoteDepth++;break;case v.CLOSEQUOTE:i.quoteDepth--,s+=C(e,!1,i.quoteDepth);break;case v.URL:s&&(A.push({type:m.TEXT,value:s}),s=""),A.push({type:m.IMAGE,value:d.value||""})}}return s&&A.push({type:m.TEXT,value:s}),A},e.parseContent=function(t,e){if(e&&e[t])return e[t];for(var i=[],r=t.length,n=!1,A=!1,s=!1,o="",a="",l=[],c=0;c<r;c++){var h=t.charAt(c);switch(h){case"'":case'"':A?o+=h:(n=!n,s||n||(i.push({type:v.STRING,value:o}),o=""));break;case"\\":A?(o+=h,A=!1):A=!0;break;case"(":n?o+=h:(s=!0,a=o,o="",l=[]);break;case")":if(n)o+=h;else if(s){switch(o&&l.push(o),a){case"attr":0<l.length&&i.push({type:v.ATTRIBUTE,value:l[0]});break;case"counter":if(0<l.length){var u={type:v.COUNTER,name:l[0]};1<l.length&&(u.format=l[1]),i.push(u)}break;case"counters":if(0<l.length){var f={type:v.COUNTERS,name:l[0]};1<l.length&&(f.glue=l[1]),2<l.length&&(f.format=l[2]),i.push(f)}break;case"url":0<l.length&&i.push({type:v.URL,value:l[0]})}s=!1,o=""}break;case",":n?o+=h:s&&(l.push(o),o="");break;case" ":case"\t":n?o+=h:o&&(d(i,o),o="");break;default:o+=h}"\\"!==h&&(A=!1)}return o&&d(i,o),e&&(e[t]=i),i}),d=function(t,e){switch(e){case"open-quote":t.push({type:v.OPENQUOTE});break;case"close-quote":t.push({type:v.CLOSEQUOTE})}},C=function(t,e,i){var r=t.quotes?t.quotes.split(/\s+/):["'\"'","'\"'"],n=2*i;return n>=r.length&&(n=r.length-2),e||++n,r[n].replace(/^["']|["']$/g,"")},b=function(t,e,i){for(var r=t.length,n="",A=0;A<r;A++)0<A&&(n+=e||""),n+=(0,s.createCounterText)(t[A],(0,o.parseListStyleType)(i||"decimal"),!1);return n}}])}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Popper=e()}(this,function(){"use strict";function s(t){return t&&"[object Function]"==={}.toString.call(t)}function m(t,e){if(1!==t.nodeType)return[];var i=window.getComputedStyle(t,null);return e?i[e]:i}function v(t){return"HTML"===t.nodeName?t:t.parentNode||t.host}function w(t){if(!t||-1!==["HTML","BODY","#document"].indexOf(t.nodeName))return window.document.body;var e=m(t),i=e.overflow,r=e.overflowX,n=e.overflowY;return/(auto|scroll)/.test(i+n+r)?t:w(v(t))}function C(t){var e=t&&t.offsetParent,i=e&&e.nodeName;return i&&"BODY"!==i&&"HTML"!==i?-1!==["TD","TABLE"].indexOf(e.nodeName)&&"static"===m(e,"position")?C(e):e:window.document.documentElement}function c(t){return null===t.parentNode?t:c(t.parentNode)}function b(t,e){if(!(t&&t.nodeType&&e&&e.nodeType))return window.document.documentElement;var i=t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,r=i?t:e,n=i?e:t,A=document.createRange();A.setStart(r,0),A.setEnd(n,0);var s,o,a=A.commonAncestorContainer;if(t!==a&&e!==a||r.contains(n))return"BODY"===(o=(s=a).nodeName)||"HTML"!==o&&C(s.firstElementChild)!==s?C(a):a;var l=c(t);return l.host?b(l.host,e):b(t,c(e).host)}function _(t){var e="top"===(1<arguments.length&&void 0!==arguments[1]?arguments[1]:"top")?"scrollTop":"scrollLeft",i=t.nodeName;if("BODY"===i||"HTML"===i){var r=window.document.documentElement;return(window.document.scrollingElement||r)[e]}return t[e]}function h(t,e){var i="x"===e?"Left":"Top",r="Left"==i?"Right":"Bottom";return+t["border"+i+"Width"].split("px")[0]+ +t["border"+r+"Width"].split("px")[0]}function r(t,e,i,r){return k(e["offset"+t],e["scroll"+t],i["client"+t],i["offset"+t],i["scroll"+t],K()?i["offset"+t]+r["margin"+("Height"===t?"Top":"Left")]+r["margin"+("Height"===t?"Bottom":"Right")]:0)}function y(){var t=window.document.body,e=window.document.documentElement,i=K()&&window.getComputedStyle(e);return{height:r("Height",t,e,i),width:r("Width",t,e,i)}}function E(t){return V({},t,{right:t.left+t.width,bottom:t.top+t.height})}function Q(t){var e={};if(K())try{e=t.getBoundingClientRect();var i=_(t,"top"),r=_(t,"left");e.top+=i,e.left+=r,e.bottom+=i,e.right+=r}catch(t){}else e=t.getBoundingClientRect();var n={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},A="HTML"===t.nodeName?y():{},s=A.width||t.clientWidth||n.right-n.left,o=A.height||t.clientHeight||n.bottom-n.top,a=t.offsetWidth-s,l=t.offsetHeight-o;if(a||l){var c=m(t);a-=h(c,"x"),l-=h(c,"y"),n.width-=a,n.height-=l}return E(n)}function F(t,e){var i=K(),r="HTML"===e.nodeName,n=Q(t),A=Q(e),s=w(t),o=m(e),a=+o.borderTopWidth.split("px")[0],l=+o.borderLeftWidth.split("px")[0],c=E({top:n.top-A.top-a,left:n.left-A.left-l,width:n.width,height:n.height});if(c.marginTop=0,c.marginLeft=0,!i&&r){var h=+o.marginTop.split("px")[0],u=+o.marginLeft.split("px")[0];c.top-=a-h,c.bottom-=a-h,c.left-=l-u,c.right-=l-u,c.marginTop=h,c.marginLeft=u}return(i?e.contains(s):e===s&&"BODY"!==s.nodeName)&&(c=function(t,e){var i=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=_(e,"top"),n=_(e,"left"),A=i?-1:1;return t.top+=r*A,t.bottom+=r*A,t.left+=n*A,t.right+=n*A,t}(c,e)),c}function u(t,e,i,r){var n,A,s,o,a,l,c,h={top:0,left:0},u=b(t,e);if("viewport"===r)n=u,A=window.document.documentElement,s=F(n,A),o=k(A.clientWidth,window.innerWidth||0),a=k(A.clientHeight,window.innerHeight||0),l=_(A),c=_(A,"left"),h=E({top:l-s.top+s.marginTop,left:c-s.left+s.marginLeft,width:o,height:a});else{var f;"scrollParent"===r?"BODY"===(f=w(v(t))).nodeName&&(f=window.document.documentElement):f="window"===r?window.document.documentElement:r;var d=F(f,u);if("HTML"!==f.nodeName||function t(e){var i=e.nodeName;return"BODY"!==i&&"HTML"!==i&&("fixed"===m(e,"position")||t(v(e)))}(u))h=d;else{var g=y(),p=g.height,B=g.width;h.top+=d.top-d.marginTop,h.bottom=p+d.top,h.left+=d.left-d.marginLeft,h.right=B+d.left}}return h.left+=i,h.top+=i,h.right-=i,h.bottom-=i,h}function o(t,e,r,i,n){var A=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;if(-1===t.indexOf("auto"))return t;var s=u(r,i,A,n),o={top:{width:s.width,height:e.top-s.top},right:{width:s.right-e.right,height:s.height},bottom:{width:s.width,height:s.bottom-e.bottom},left:{width:e.left-s.left,height:s.height}},a=Object.keys(o).map(function(t){return V({key:t},o[t],{area:(e=o[t],e.width*e.height)});var e}).sort(function(t,e){return e.area-t.area}),l=a.filter(function(t){var e=t.width,i=t.height;return e>=r.clientWidth&&i>=r.clientHeight}),c=0<l.length?l[0].key:a[0].key,h=t.split("-")[1];return c+(h?"-"+h:"")}function a(t,e,i){return F(i,b(e,i))}function B(t){var e=window.getComputedStyle(t),i=parseFloat(e.marginTop)+parseFloat(e.marginBottom),r=parseFloat(e.marginLeft)+parseFloat(e.marginRight);return{width:t.offsetWidth+r,height:t.offsetHeight+i}}function U(t){var e={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,function(t){return e[t]})}function T(t,e,i){i=i.split("-")[0];var r=B(t),n={width:r.width,height:r.height},A=-1!==["right","left"].indexOf(i),s=A?"top":"left",o=A?"left":"top",a=A?"height":"width",l=A?"width":"height";return n[s]=e[s]+e[a]/2-r[a]/2,n[o]=i===o?e[o]-r[l]:e[U(o)],n}function S(t,e){return Array.prototype.find?t.find(e):t.filter(e)[0]}function x(t,i,e){return(void 0===e?t:t.slice(0,function(t,e,i){if(Array.prototype.findIndex)return t.findIndex(function(t){return t[e]===i});var r=S(t,function(t){return t[e]===i});return t.indexOf(r)}(t,"name",e))).forEach(function(t){t.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var e=t.function||t.fn;t.enabled&&s(e)&&(i.offsets.popper=E(i.offsets.popper),i.offsets.reference=E(i.offsets.reference),i=e(i,t))}),i}function t(t,i){return t.some(function(t){var e=t.name;return t.enabled&&e===i})}function O(t){for(var e=[!1,"ms","Webkit","Moz","O"],i=t.charAt(0).toUpperCase()+t.slice(1),r=0;r<e.length-1;r++){var n=e[r],A=n?""+n+i:t;if(void 0!==window.document.body.style[A])return A}return null}function e(t,e,i,r){i.updateBound=r,window.addEventListener("resize",i.updateBound,{passive:!0});var n=w(t);return function t(e,i,r,n){var A="BODY"===e.nodeName,s=A?window:e;s.addEventListener(i,r,{passive:!0}),A||t(w(s.parentNode),i,r,n),n.push(s)}(n,"scroll",i.updateBound,i.scrollParents),i.scrollElement=n,i.eventsEnabled=!0,i}function i(){var e;this.state.eventsEnabled&&(window.cancelAnimationFrame(this.scheduleUpdate),this.state=(this.reference,e=this.state,window.removeEventListener("resize",e.updateBound),e.scrollParents.forEach(function(t){t.removeEventListener("scroll",e.updateBound)}),e.updateBound=null,e.scrollParents=[],e.scrollElement=null,e.eventsEnabled=!1,e))}function f(t){return""!==t&&!isNaN(parseFloat(t))&&isFinite(t)}function l(i,r){Object.keys(r).forEach(function(t){var e="";-1!==["width","height","top","right","bottom","left"].indexOf(t)&&f(r[t])&&(e="px"),i.style[t]=r[t]+e})}function H(t,e,i){var r=S(t,function(t){return t.name===e}),n=!!r&&t.some(function(t){return t.name===i&&t.enabled&&t.order<r.order});if(!n){var A="`"+e+"`";console.warn("`"+i+"` modifier is required by "+A+" modifier in order to work, be sure to include it before "+A+"!")}return n}function n(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],i=Y.indexOf(t),r=Y.slice(i+1).concat(Y.slice(0,i));return e?r.reverse():r}function d(t,n,A,e){var s=[0,0],o=-1!==["right","left"].indexOf(e),i=t.split(/(\+|\-)/).map(function(t){return t.trim()}),r=i.indexOf(S(i,function(t){return-1!==t.search(/,|\s/)}));i[r]&&-1===i[r].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var a=/\s*,\s*|\s+/,l=-1===r?[i]:[i.slice(0,r).concat([i[r].split(a)[0]]),[i[r].split(a)[1]].concat(i.slice(r+1))];return(l=l.map(function(t,e){var i=(1===e?!o:o)?"height":"width",r=!1;return t.reduce(function(t,e){return""===t[t.length-1]&&-1!==["+","-"].indexOf(e)?(t[t.length-1]=e,r=!0,t):r?(t[t.length-1]+=e,r=!1,t):t.concat(e)},[]).map(function(t){return function(t,e,i,r){var n=t.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),A=+n[1],s=n[2];if(!A)return t;if(0===s.indexOf("%")){var o;switch(s){case"%p":o=i;break;case"%":case"%r":default:o=r}return E(o)[e]/100*A}return"vh"===s||"vw"===s?("vh"===s?k(document.documentElement.clientHeight,window.innerHeight||0):k(document.documentElement.clientWidth,window.innerWidth||0))/100*A:A}(t,i,n,A)})})).forEach(function(i,r){i.forEach(function(t,e){f(t)&&(s[r]+=t*("-"===i[e-1]?-1:1))})}),s}for(var I=Math.min,D=Math.floor,k=Math.max,A=["native code","[object MutationObserverConstructor]"],g="undefined"!=typeof window,p=["Edge","Trident","Firefox"],L=0,N=0;N<p.length;N+=1)if(g&&0<=navigator.userAgent.indexOf(p[N])){L=1;break}var M,P,R=g&&(P=window.MutationObserver,A.some(function(t){return-1<(P||"").toString().indexOf(t)}))?function(t){var e=!1,i=0,r=document.createElement("span");return new MutationObserver(function(){t(),e=!1}).observe(r,{attributes:!0}),function(){e||(e=!0,r.setAttribute("x-index",i),++i)}}:function(t){var e=!1;return function(){e||(e=!0,setTimeout(function(){e=!1,t()},L))}},K=function(){return null==M&&(M=-1!==navigator.appVersion.indexOf("MSIE 10")),M},j=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},z=function(){function r(t,e){for(var i,r=0;r<e.length;r++)(i=e[r]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}}(),X=function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t},V=Object.assign||function(t){for(var e,i=1;i<arguments.length;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},G=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],Y=G.slice(3),W="flip",J="clockwise",q="counterclockwise",Z=function(){function A(t,e){var i=this,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};j(this,A),this.scheduleUpdate=function(){return requestAnimationFrame(i.update)},this.update=R(this.update.bind(this)),this.options=V({},A.Defaults,r),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=t.jquery?t[0]:t,this.popper=e.jquery?e[0]:e,this.options.modifiers={},Object.keys(V({},A.Defaults.modifiers,r.modifiers)).forEach(function(t){i.options.modifiers[t]=V({},A.Defaults.modifiers[t]||{},r.modifiers?r.modifiers[t]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(t){return V({name:t},i.options.modifiers[t])}).sort(function(t,e){return t.order-e.order}),this.modifiers.forEach(function(t){t.enabled&&s(t.onLoad)&&t.onLoad(i.reference,i.popper,i.options,t,i.state)}),this.update();var n=this.options.eventsEnabled;n&&this.enableEventListeners(),this.state.eventsEnabled=n}return z(A,[{key:"update",value:function(){return function(){if(!this.state.isDestroyed){var t={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};t.offsets.reference=a(this.state,this.popper,this.reference),t.placement=o(this.options.placement,t.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),t.originalPlacement=t.placement,t.offsets.popper=T(this.popper,t.offsets.reference,t.placement),t.offsets.popper.position="absolute",t=x(this.modifiers,t),this.state.isCreated?this.options.onUpdate(t):(this.state.isCreated=!0,this.options.onCreate(t))}}.call(this)}},{key:"destroy",value:function(){return function(){return this.state.isDestroyed=!0,t(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.left="",this.popper.style.position="",this.popper.style.top="",this.popper.style[O("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}.call(this)}},{key:"enableEventListeners",value:function(){return function(){this.state.eventsEnabled||(this.state=e(this.reference,this.options,this.state,this.scheduleUpdate))}.call(this)}},{key:"disableEventListeners",value:function(){return i.call(this)}}]),A}();return Z.Utils=("undefined"==typeof window?global:window).PopperUtils,Z.placements=G,Z.Defaults={placement:"bottom",eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(t){var e=t.placement,i=e.split("-")[0],r=e.split("-")[1];if(r){var n=t.offsets,A=n.reference,s=n.popper,o=-1!==["bottom","top"].indexOf(i),a=o?"left":"top",l=o?"width":"height",c={start:X({},a,A[a]),end:X({},a,A[a]+A[l]-s[l])};t.offsets.popper=V({},s,c[r])}return t}},offset:{order:200,enabled:!0,fn:function(t,e){var i,r=e.offset,n=t.placement,A=t.offsets,s=A.popper,o=A.reference,a=n.split("-")[0];return i=f(+r)?[+r,0]:d(r,s,o,a),"left"===a?(s.top+=i[0],s.left-=i[1]):"right"===a?(s.top+=i[0],s.left+=i[1]):"top"===a?(s.left+=i[0],s.top-=i[1]):"bottom"===a&&(s.left+=i[0],s.top+=i[1]),t.popper=s,t},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(t,r){var e=r.boundariesElement||C(t.instance.popper);t.instance.reference===e&&(e=C(e));var n=u(t.instance.popper,t.instance.reference,r.padding,e);r.boundaries=n;var i=r.priority,A=t.offsets.popper,s={primary:function(t){var e=A[t];return A[t]<n[t]&&!r.escapeWithReference&&(e=k(A[t],n[t])),X({},t,e)},secondary:function(t){var e="right"===t?"left":"top",i=A[e];return A[t]>n[t]&&!r.escapeWithReference&&(i=I(A[e],n[t]-("right"===t?A.width:A.height))),X({},e,i)}};return i.forEach(function(t){var e=-1===["left","top"].indexOf(t)?"secondary":"primary";A=V({},A,s[e](t))}),t.offsets.popper=A,t},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(t){var e=t.offsets,i=e.popper,r=e.reference,n=t.placement.split("-")[0],A=D,s=-1!==["top","bottom"].indexOf(n),o=s?"right":"bottom",a=s?"left":"top",l=s?"width":"height";return i[o]<A(r[a])&&(t.offsets.popper[a]=A(r[a])-i[l]),i[a]>A(r[o])&&(t.offsets.popper[a]=A(r[o])),t}},arrow:{order:500,enabled:!0,fn:function(t,e){if(!H(t.instance.modifiers,"arrow","keepTogether"))return t;var i=e.element;if("string"==typeof i){if(!(i=t.instance.popper.querySelector(i)))return t}else if(!t.instance.popper.contains(i))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),t;var r=t.placement.split("-")[0],n=t.offsets,A=n.popper,s=n.reference,o=-1!==["left","right"].indexOf(r),a=o?"height":"width",l=o?"Top":"Left",c=l.toLowerCase(),h=o?"left":"top",u=o?"bottom":"right",f=B(i)[a];s[u]-f<A[c]&&(t.offsets.popper[c]-=A[c]-(s[u]-f)),s[c]+f>A[u]&&(t.offsets.popper[c]+=s[c]+f-A[u]);var d=s[c]+s[a]/2-f/2,g=m(t.instance.popper,"margin"+l).replace("px",""),p=d-E(t.offsets.popper)[c]-g;return p=k(I(A[a]-f,p),0),t.arrowElement=i,t.offsets.arrow={},t.offsets.arrow[c]=Math.round(p),t.offsets.arrow[h]="",t},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(d,g){if(t(d.instance.modifiers,"inner"))return d;if(d.flipped&&d.placement===d.originalPlacement)return d;var p=u(d.instance.popper,d.instance.reference,g.padding,g.boundariesElement),B=d.placement.split("-")[0],m=U(B),v=d.placement.split("-")[1]||"",w=[];switch(g.behavior){case W:w=[B,m];break;case J:w=n(B);break;case q:w=n(B,!0);break;default:w=g.behavior}return w.forEach(function(t,e){if(B!==t||w.length===e+1)return d;B=d.placement.split("-")[0],m=U(B);var i,r=d.offsets.popper,n=d.offsets.reference,A=D,s="left"===B&&A(r.right)>A(n.left)||"right"===B&&A(r.left)<A(n.right)||"top"===B&&A(r.bottom)>A(n.top)||"bottom"===B&&A(r.top)<A(n.bottom),o=A(r.left)<A(p.left),a=A(r.right)>A(p.right),l=A(r.top)<A(p.top),c=A(r.bottom)>A(p.bottom),h="left"===B&&o||"right"===B&&a||"top"===B&&l||"bottom"===B&&c,u=-1!==["top","bottom"].indexOf(B),f=!!g.flipVariations&&(u&&"start"===v&&o||u&&"end"===v&&a||!u&&"start"===v&&l||!u&&"end"===v&&c);(s||h||f)&&(d.flipped=!0,(s||h)&&(B=w[e+1]),f&&(v="end"===(i=v)?"start":"start"===i?"end":i),d.placement=B+(v?"-"+v:""),d.offsets.popper=V({},d.offsets.popper,T(d.instance.popper,d.offsets.reference,d.placement)),d=x(d.instance.modifiers,d,"flip"))}),d},behavior:"flip",padding:5,boundariesElement:"viewport"},inner:{order:700,enabled:!1,fn:function(t){var e=t.placement,i=e.split("-")[0],r=t.offsets,n=r.popper,A=r.reference,s=-1!==["left","right"].indexOf(i),o=-1===["top","left"].indexOf(i);return n[s?"left":"top"]=A[i]-(o?n[s?"width":"height"]:0),t.placement=U(e),t.offsets.popper=E(n),t}},hide:{order:800,enabled:!0,fn:function(t){if(!H(t.instance.modifiers,"hide","preventOverflow"))return t;var e=t.offsets.reference,i=S(t.instance.modifiers,function(t){return"preventOverflow"===t.name}).boundaries;if(e.bottom<i.top||e.left>i.right||e.top>i.bottom||e.right<i.left){if(!0===t.hide)return t;t.hide=!0,t.attributes["x-out-of-boundaries"]=""}else{if(!1===t.hide)return t;t.hide=!1,t.attributes["x-out-of-boundaries"]=!1}return t}},computeStyle:{order:850,enabled:!0,fn:function(t,e){var i=e.x,r=e.y,n=t.offsets.popper,A=S(t.instance.modifiers,function(t){return"applyStyle"===t.name}).gpuAcceleration;void 0!==A&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var s,o,a=void 0===A?e.gpuAcceleration:A,l=Q(C(t.instance.popper)),c={position:n.position},h={left:D(n.left),top:D(n.top),bottom:D(n.bottom),right:D(n.right)},u="bottom"===i?"top":"bottom",f="right"===r?"left":"right",d=O("transform");if(o="bottom"==u?-l.height+h.bottom:h.top,s="right"==f?-l.width+h.right:h.left,a&&d)c[d]="translate3d("+s+"px, "+o+"px, 0)",c[u]=0,c[f]=0,c.willChange="transform";else{var g="bottom"==u?-1:1,p="right"==f?-1:1;c[u]=o*g,c[f]=s*p,c.willChange=u+", "+f}var B={"x-placement":t.placement};return t.attributes=V({},B,t.attributes),t.styles=V({},c,t.styles),t.arrowStyles=V({},t.offsets.arrow,t.arrowStyles),t},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(t){return l(t.instance.popper,t.styles),e=t.instance.popper,i=t.attributes,Object.keys(i).forEach(function(t){!1===i[t]?e.removeAttribute(t):e.setAttribute(t,i[t])}),t.arrowElement&&Object.keys(t.arrowStyles).length&&l(t.arrowElement,t.arrowStyles),t;var e,i},onLoad:function(t,e,i,r,n){var A=a(0,e,t),s=o(i.placement,A,e,t,i.modifiers.flip.boundariesElement,i.modifiers.flip.padding);return e.setAttribute("x-placement",s),l(e,{position:"absolute"}),i},gpuAcceleration:void 0}}},Z}),fabric.Object.prototype.transparentCorners=!1,fabric.Object.prototype.padding=5,addHandler("color",function(t){setStyle(t,"fill",this.value)},"onchange"),addHandler("opacity",function(t){setStyle(t,"opacity",this.value)},"onchange"),addHandler("font-family",function(t){setStyle(t,"fontFamily",this.value)},"onchange"),addHandler("text-align",function(t){setStyle(t,"textAlign",this.value)},"onchange"),addHandler("text-bg-color",function(t){setStyle(t,"textBackgroundColor",this.value)},"onchange"),addHandler("text-lines-bg-color",function(t){setStyle(t,"backgroundColor",this.value)},"onchange"),addHandler("text-stroke-color",function(t){setStyle(t,"stroke",this.value)},"onchange"),addHandler("text-stroke-width",function(t){setStyle(t,"strokeWidth",this.value)},"onchange"),addHandler("text-font-size",function(t){setStyle(t,"fontSize",this.value)},"onchange"),addHandler("text-line-height",function(t){setStyle(t,"lineHeight",this.value)},"onchange"),addHandler("text-cmd-bold",function(t){setStyle(t,"fontWeight",this.value)},"onchange"),addHandler("text-cmd-italic",function(t){setStyle(t,"italic",this.value)},"onchange"),addHandler('text-cmd-underline"',function(t){setStyle(t,"underline",this.value)},"onchange"),addHandler("text-cmd-linethrough",function(t){setStyle(t,"line-through",this.value)},"onchange"),addHandler("text-cmd-overline",function(t){setStyle(t,"overline",this.value)},"onchange");